<!DOCTYPE html><html lang="en" class="no-js"><head><script>window.themeBackgrounds={light:"#fff",dark:"#111"},window.themeNames=Object.keys(themeBackgrounds),function(){var e,a=window.themeBackgrounds||{},n=Object.keys(a),t=document,o=t.querySelector("html"),c=t.createElement("style");try{e=localStorage.getItem("theme")}catch(e){}function r(e,t){if(n.forEach(function(e){o.classList.remove(e)}),e&&(o.classList.add(e),c.innerHTML="html { background-color:"+a[e]+"; }"),t)try{e?localStorage.setItem("theme",e):localStorage.removeItem("theme")}catch(e){}}o.classList.remove("no-js"),t.head.appendChild(c),window.addEventListener("contextmenu",function(e){e.target.getAttribute("data-theme")&&(e.preventDefault(),r(null,!0))}),window.addEventListener("click",function(e){r(e.target.getAttribute("data-theme"),!0)}),window.addEventListener("storage",function(e){"theme"===e.key&&r(e.newValue)}),window.matchMedia&&(t=window.matchMedia("(prefers-color-scheme: dark)"),!e&&t.matches&&(e="dark"),t.addEventListener("change",function(e){localStorage.getItem("theme")||r(e.matches?"dark":"light")})),r(e)}();</script><meta charSet="utf-8" /><title>Switching to ASDF version manager</title><link rel="cannonical" href="https://sidneyliebrand.io/blog/switching-to-asdf-version-manager" /><link rel="manifest" href="/site.webmanifest" /><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#a676ff" /><link rel="icon" sizes="48x48" type="image/icon" href="/favicon.ico" /><link rel="icon" sizes="16x16" type="image/png" href="/favicon-16x16.png" /><link rel="icon" sizes="32x32" type="image/png" href="/favicon-32x32.png" /><link rel="apple-touch-icon" sizes="180x180" type="image/png" href="/apple-touch-icon.png" /><link rel="alternate" type="application/atom+xml" title="The official https://sidneyliebrand.io Atom feed" href="/atom.xml" /><link rel="alternate" type="application/rss+xml" title="The official https://sidneyliebrand.io RSS feed" href="/feed.xml" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="theme-color" content="#ffffff" /><meta name="msapplication-TileColor" content="#ffc40d" /><meta name="robots" content="index, follow" /><meta name="author" content="Sidney Liebrand" /><meta name="description" content="Depending on how many languages you program in, getting all their version managers installed, added to &lt;code&gt;$PATH&lt;/code&gt;, configured etc... becomes quite a pain when setting up a new system, or even figuring out how this one works because you've used something else for a while." /><meta property="og:title" content="Switching to ASDF version manager" /><meta property="og:type" content="website" /><meta property="og:url" content="https://sidneyliebrand.io" /><meta property="og:site_name" content="https://sidneyliebrand.io" /><meta property="og:description" content="Depending on how many languages you program in, getting all their version managers installed, added to &lt;code&gt;$PATH&lt;/code&gt;, configured etc... becomes quite a pain when setting up a new system, or even figuring out how this one works because you've used something else for a while." /><meta name="dc:creator" content="Sidney Liebrand" /><meta name="dc:title" content="Switching to ASDF version manager" /><meta name="dc:description" content="Depending on how many languages you program in, getting all their version managers installed, added to &lt;code&gt;$PATH&lt;/code&gt;, configured etc... becomes quite a pain when setting up a new system, or even figuring out how this one works because you've used something else for a while." /><meta name="twitter:card" content="summary" /><meta name="twitter:creator" content="@scbydoooo" /><meta name="next-head-count" content="27" /><link rel="preload" href="/_next/static/css/20a44b1e01422e2fdde4.css" as="style" /><link rel="stylesheet" href="/_next/static/css/20a44b1e01422e2fdde4.css" data-n-g /><link rel="preload" href="/_next/static/css/d9a1bab85a2b6d0ea857.css" as="style" /><link rel="stylesheet" href="/_next/static/css/d9a1bab85a2b6d0ea857.css" data-n-p /><noscript data-n-css></noscript></head><body><div id="__next"><div class="layout_application__6A4un"><header class="layout_header__3bVjw"><div class="layout_headerFixed__3v8Yi"><div class="layout_headerContent__18ocK"><a title="View home page" class="layout_logo__319hZ" href="/"><span class="layout_logoTopLeft__2TXmp"></span><span class="layout_logoBottomLeft__1VwSz"></span><span class="layout_logoTopRight__36KVG"></span><span class="layout_logoBottomRight__34Roq"></span></a><nav class="layout_navigation__19PAD"><a title="View curriculum vitae" href="/cv">C.V.</a><a title="Visit Sidney Liebrand's GitHub page" href="https://github.com/SidOfc"><figure class="layout_github__23ZLB media_figure__1BF98 media_invertDark__1FMJX"><div style="padding-bottom: 100%;" class="media_relative__3Dzxp"><img loading="lazy" src="/media/github.svg" alt="Sidney Liebrand's GitHub page" class="media_media__1ZpPG" /></div></figure></a><div tabIndex="0" title="Toggle dark theme" class="dark-mode-toggle_wrapper__bHDaz"><svg fill="#000000" data-theme="light" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="dark-mode-toggle_toggle__2rc2d dark-mode-toggle_toggleDark__2f6wj"><path d="M0 0h24v24H0z" fill="none"></path><path d="M6.76 4.84l-1.8-1.79-1.41 1.41 1.79 1.79 1.42-1.41zM4 10.5H1v2h3v-2zm9-9.95h-2V3.5h2V.55zm7.45 3.91l-1.41-1.41-1.79 1.79 1.41 1.41 1.79-1.79zm-3.21 13.7l1.79 1.8 1.41-1.41-1.8-1.79-1.4 1.4zM20 10.5v2h3v-2h-3zm-8-5c-3.31 0-6 2.69-6 6s2.69 6 6 6 6-2.69 6-6-2.69-6-6-6zm-1 16.95h2V19.5h-2v2.95zm-7.45-3.91l1.41 1.41 1.79-1.8-1.41-1.41-1.79 1.8z"></path></svg><svg fill="#000000" data-theme="dark" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="dark-mode-toggle_toggle__2rc2d dark-mode-toggle_toggleLight__1OB2p"><path d="M0 0h24v24H0z" fill="none"></path><path d="M9.5,2c-1.82,0-3.53,0.5-5,1.35c2.99,1.73,5,4.95,5,8.65s-2.01,6.92-5,8.65C5.97,21.5,7.68,22,9.5,22c5.52,0,10-4.48,10-10 S15.02,2,9.5,2z"></path></svg></div></nav></div></div></header><main class="layout_content__2V5t2"><article class="post_post__2uzyE"><h1 class="heading_container__2UElk"><a href="/blog/switching-to-asdf-version-manager" class="heading_link__1aoFY">Switching to ASDF version manager</a></h1><span class="post_postData__yktVb text_page-accent-fg__3pARq">By Sidney Liebrand on Aug, 2017<span class="bullet_bullet__2pnOU">â€¢</span>5 min read</span><section><div><figure class="media_figure__1BF98 media_invertDark__1FMJX"><div style="padding-bottom: 56.17977528089888%;" class="media_relative__3Dzxp"><img loading="lazy" src="/media/posts/asdfmovie-banner.svg" alt="asdfmovie quote from youtube" class="media_media__1ZpPG" /></div><figcaption class="media_alt__xSx7S">asdfmovie quote from youtube</figcaption></figure><p>Version management tools for programming languages are a common thing in (web-)developer land.
I started to wonder if there was an all-in-one version management tool.
I want this because as I learn more and do more, I will need more version managers that all
slow down my shell. So lets prevent that shall we!</p><p>I've always used <a href="https://rvm.io" title="Visit rvm.io">RVM</a> in the past without problem, the shell took about half a
second to load and that was acceptable. I mean, you can't have it all right :)</p><p>Aside from sourcing good old RVM, recently I also added <a href="https://github.com/creationix/nvm" title="Visit creationix/nvm on GitHub">NVM</a> to the stack.
No problem I thought! Until I resourced my shell and had to wait for two seconds... Yeah,
this goes beyond the &quot;you can't have it all&quot; criteria. I often open a shell for a quick ssh session,
running tests, git commands, etc... There has to be a better way!</p><h2 class="heading_container__2UElk"><a id="a-universal-version-manager" class="heading_anchor__PWj4r"></a><a href="#a-universal-version-manager" class="heading_link__1aoFY">A universal version manager</a></h2><p>Enter <a href="https://github.com/asdf-vm/asdf" title="Visit asdf-vm/asdf on GitHub">ASDF</a> and <a href="https://github.com/asdf-vm/asdf-plugins" title="Visit asdf-vm/asdf-plugins on github">friends</a>.
ASDF is a universal and extensible version management tool for many <a href="https://github.com/asdf-vm/asdf-plugins" title="Visit asdf-vm/asdf-plugins on GitHub">programming languages</a>.
It provides the version management tooling and allows you to choose which plugins you would like to install.
Like Node.js, Ruby or Python for instance.</p><p>To get started, go to their <a href="https://github.com/asdf-vm/asdf" title="Visit asdf-vm/asdf on GitHub">github page</a> and install ASDF.</p><p>After installing, you'll only have the core of ASDF.
We'll need to extend it by adding plugins to it and using those to install versions
of the language we want to use.</p><p>The list of plugins you'll install will differ from what I use.
I am a front end developer that works with Ruby / Rails as well as React.
From time to time I also muck around in <a href="https://crystal-lang.org/" title="Visit crystal-lang.org">Crystal</a> or <a href="https://www.rust-lang.org/en-US/" title="Visit rust-lang.org">Rust</a>
(both of which are awesome â€” check them out!). So I would head to the <a href="https://github.com/asdf-vm/asdf-plugins" title="Visit asdf-vm plugins page">plugins page</a>
and look for plugins for those programming languages. The following is what I use:</p><ul><li><p><a href="https://github.com/asdf-vm/asdf-ruby" title="Visit asdf-vm-asdf-ruby">asdf-vm/asdf-ruby</a></p></li><li><p><a href="https://github.com/asdf-vm/asdf-nodejs" title="Visit asdf-vm/asdf-nodejs on GitHub">asdf-vm/asdf-nodejs</a></p></li><li><p><a href="https://github.com/code-lever/asdf-rust" title="Visit code-lever/asdf-rust on GitHub">code-lever/asdf-rust</a></p></li><li><p><a href="https://github.com/asdf-community/asdf-crystal" title="Visit asdf-community/asdf-crystal on GitHub">asdf-community/asdf-crystal</a></p></li></ul><p>There are installation instructions on every plugin repo. Sometimes, steps
for migrating from your old version manager are also included.
For Ruby using RVM, the migration is as easy as moving <code>~/.rvm/rubies</code> to <code>~/.asdf/installs/ruby.</code></p><h2 class="heading_container__2UElk"><a id="sounds-smooth-any-bumps-along-the-way" class="heading_anchor__PWj4r"></a><a href="#sounds-smooth-any-bumps-along-the-way" class="heading_link__1aoFY">Sounds smooth, any bumps along the way?</a></h2><p>It could be that gems and even Ruby versions will not work. If you run into this issue,
run <code>asdf reshim [language]</code> and restart your shell to fix any broken paths.</p><p>If the problem persists, you can run <code>asdf current [language]</code> to find the current version.
It will also print the path to the version file that defined it.
This is much simpler than running a mixture of <code>ls</code> and <code>grep</code> to find out where that version comes from.</p><p>If you see the following after running <code>asdf current [language]</code>:</p><blockquote><p>No version set for [language]</p></blockquote><p>It means that you haven't set or installed any versions for that language.
If you haven't installed a version, run <code>asdf list-all [language]</code>.
This will list all the available versions that ASDF can install. Choose a version and run
<code>asdf install [language] [version]</code> to install it.</p><p>If the plugin still doesn't work, run <code>asdf global [language] [version]</code> which will create a <code>~/.tool-versions</code> file.
The language and version info will be stored and ASDF will attempt to load that version.</p><p>To set a specific version in a directory, <code>cd</code> to it and run
<code>asdf local [language] [version]</code>. ASDF will use a local version over a global version.</p><p>After migrating from RVM, I had to rename my rubies.
RVM stored them in the format of <code>ruby-[major]-[minor]-[patch]-p[ruby-patch]</code>.
This caused ASDF not to switch after running <code>asdf local ruby 2.4.1</code> because the folder
name differed from the version input. Which meant I had to run <code>asdf local ruby ruby-2.4.1</code>.
If a language is already specified, I'd rather not bother typing it again.
Removing the <code>ruby-</code> prefix from the directory names in <code>~/.asdf/installs/ruby</code> fixed it.
Running <code>asdf local ruby 2.4.1</code> switched perfect afterwards.</p><h2 class="heading_container__2UElk"><a id="extra-s" class="heading_anchor__PWj4r"></a><a href="#extra-s" class="heading_link__1aoFY">Extra's</a></h2><p>A feature of the <code>asdf-ruby</code> plugin is that it can install a set of <a href="https://github.com/asdf-vm/asdf-ruby#default-gems" title="Visit asdf-vm/asdf-ruby section on default gems">default gems</a>
specified in a <code>~/.default-gems file</code>. I love this one as I'll never have to run <code>gem install pry</code> again!</p><p>What RVM additionally offers that I have not seen in ASDF is the option to create a gemset.
This was and still is a useful feature if you're doing Ruby projects involving lots of different
gems or even testing with specific gems. I rarely felt the need to create a gemset myself.
Thus not having this feature did not have a lot of impact on my workflow (yet).
I'm not sure if NVM adds any extra functionality, either way I think ASDF will fill the
gaps because of how it was designed and how it can be extended.</p><p>Finally, I added a <code>~/.asdfrc</code> file containing: <code>legacy_version_file = yes</code>.
This enables ASDF read all version files we know and love.</p><h2 class="heading_container__2UElk"><a id="conclusion" class="heading_anchor__PWj4r"></a><a href="#conclusion" class="heading_link__1aoFY">Conclusion</a></h2><p>As for my shell time, it's back where it was with only RVM. But nothing messes with my <code>cd</code> command anymore.
I also don't have to keep adding these noisy <code>source</code> lines to <a href="https://github.com/SidOfc/dotfiles" title="Visit SidOfc/dotfiles on GitHub">my dotfiles</a>.</p><p>ASDF is still quite new and at the time of writing, there are few integrations.
This means that if you use <code>capistrano</code> to deploy using RVM for example, you won't be able to do that using ASDF just yet.
But as mentioned above, someone somewhere will fix that gap or you could give it a shot yourself!</p><p>I hope you've learned something from this post and also that you will choose to switch to ASDF.
Not because it's better per-se but because it's universal and extensible and you now no longer have
to worry about version managers! Install a plugin and you're done! A plugin system and a management system,
bundled in 3 simple commands with a common interface. ASDF and I will be friends for a long time :)</p><p>Cheers!</p><p><em>Many thanks to <a href="https://medium.com/@vvangemert" title="Visit Vincent van Gemert on Medium">@vvgemert</a> for proofreading!</em></p><p>ðŸ‘‹</p></div></section><a tabIndex="0" class="button_button__LVJFE" href="/">Back</a></article></main><footer class="layout_footer__2cV3b"><strong>Â©</strong> sidneyliebrand.io 2021</footer></div></div></body></html>