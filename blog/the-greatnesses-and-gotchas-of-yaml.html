<!DOCTYPE html><html lang="en" class="no-js"><head><script>window.themeBackgrounds={light:"#fff",dark:"#111"},window.themeNames=Object.keys(themeBackgrounds),function(){var e,a=window.themeBackgrounds||{},n=Object.keys(a),t=document,o=t.querySelector("html"),c=t.createElement("style");try{e=localStorage.getItem("theme")}catch(e){}function r(e,t){if(n.forEach(function(e){o.classList.remove(e)}),e&&(o.classList.add(e),c.innerHTML="html { background-color:"+a[e]+"; }"),t)try{e?localStorage.setItem("theme",e):localStorage.removeItem("theme")}catch(e){}}o.classList.remove("no-js"),t.head.appendChild(c),window.addEventListener("contextmenu",function(e){e.target.getAttribute("data-theme")&&(e.preventDefault(),r(null,!0))}),window.addEventListener("click",function(e){e=e.target.getAttribute("data-theme");e&&r(e,!0)}),window.addEventListener("storage",function(e){"theme"===e.key&&r(e.newValue)}),window.matchMedia&&(t=window.matchMedia("(prefers-color-scheme: dark)"),!e&&t.matches&&(e="dark"),t.addEventListener("change",function(e){localStorage.getItem("theme")||r(e.matches?"dark":"light")})),r(e)}();</script><meta charSet="utf-8"/><title>Sidney Liebrand&#x27;s blog - The greatnesses and gotchas of YAML</title><link rel="canonical" href="https://sidneyliebrand.io/blog/the-greatnesses-and-gotchas-of-yaml"/><link rel="manifest" href="/site.webmanifest"/><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#a676ff"/><link rel="icon" sizes="48x48" type="image/icon" href="/favicon.ico"/><link rel="icon" sizes="16x16" type="image/png" href="/favicon-16x16.png"/><link rel="icon" sizes="32x32" type="image/png" href="/favicon-32x32.png"/><link rel="apple-touch-icon" sizes="180x180" type="image/png" href="/apple-touch-icon.png"/><link rel="alternate" type="application/atom+xml" title="The official https://sidneyliebrand.io Atom feed" href="/atom.xml"/><link rel="alternate" type="application/rss+xml" title="The official https://sidneyliebrand.io RSS feed" href="/feed.xml"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta name="theme-color" content="#ffffff"/><meta name="msapplication-TileColor" content="#ffc40d"/><meta name="robots" content="index, follow"/><meta name="author" content="Sidney Liebrand"/><meta name="description" content="YAML is a great language for configuration files, it is a lot more flexible than JSON with comments and inheritance for example. While I was doing some research about YAML I found bits of information scattered all over the place so I attempted to piece the great things and the quirks together in a post!"/><meta property="og:title" content="The greatnesses and gotchas of YAML"/><meta property="og:type" content="website"/><meta property="og:url" content="https://sidneyliebrand.io"/><meta property="og:site_name" content="https://sidneyliebrand.io"/><meta property="og:description" content="YAML is a great language for configuration files, it is a lot more flexible than JSON with comments and inheritance for example. While I was doing some research about YAML I found bits of information scattered all over the place so I attempted to piece the great things and the quirks together in a post!"/><meta name="dc:creator" content="Sidney Liebrand"/><meta name="dc:title" content="The greatnesses and gotchas of YAML"/><meta name="dc:description" content="YAML is a great language for configuration files, it is a lot more flexible than JSON with comments and inheritance for example. While I was doing some research about YAML I found bits of information scattered all over the place so I attempted to piece the great things and the quirks together in a post!"/><meta name="twitter:card" content="summary"/><meta name="twitter:creator" content="@scbydoooo"/><meta name="next-head-count" content="27"/><link rel="preload" href="/_next/static/css/3335279b1d604f272aae.css" as="style"/><link rel="stylesheet" href="/_next/static/css/3335279b1d604f272aae.css" data-n-g=""/><link rel="preload" href="/_next/static/css/73f36aa7120e7370d9d4.css" as="style"/><link rel="stylesheet" href="/_next/static/css/73f36aa7120e7370d9d4.css" data-n-p=""/><noscript data-n-css=""></noscript></head><body><div id="__next"><div class="layout_application__6A4un"><header class="layout_header__3bVjw"><div class="layout_headerFixed__3v8Yi"><div class="layout_headerContent__18ocK"><a class="layout_logo__319hZ" title="View home page" href="/"><span class="layout_logoTopLeft__2TXmp"></span><span class="layout_logoBottomLeft__1VwSz"></span><span class="layout_logoTopRight__36KVG"></span><span class="layout_logoBottomRight__34Roq"></span></a><nav class="layout_navigation__19PAD"><a title="View curriculum vitae" href="/cv">C.V.</a><a title="Visit Sidney Liebrand&#x27;s GitHub page" href="https://github.com/SidOfc"><figure class="layout_github__23ZLB media_figure__1BF98 media_invertDark__1FMJX"><div class="media_relative__3Dzxp" style="padding-bottom:100%"><img loading="lazy" class="media_media__1ZpPG" src="/media/github.svg" alt="Sidney Liebrand&#x27;s GitHub page"/></div></figure></a><div tabindex="0" title="Toggle dark theme" class="dark-mode-toggle_wrapper__bHDaz"><svg fill="#000000" data-theme="light" class="dark-mode-toggle_toggle__2rc2d dark-mode-toggle_toggleDark__2f6wj" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"></path><path d="M6.76 4.84l-1.8-1.79-1.41 1.41 1.79 1.79 1.42-1.41zM4 10.5H1v2h3v-2zm9-9.95h-2V3.5h2V.55zm7.45 3.91l-1.41-1.41-1.79 1.79 1.41 1.41 1.79-1.79zm-3.21 13.7l1.79 1.8 1.41-1.41-1.8-1.79-1.4 1.4zM20 10.5v2h3v-2h-3zm-8-5c-3.31 0-6 2.69-6 6s2.69 6 6 6 6-2.69 6-6-2.69-6-6-6zm-1 16.95h2V19.5h-2v2.95zm-7.45-3.91l1.41 1.41 1.79-1.8-1.41-1.41-1.79 1.8z"></path></svg><svg fill="#000000" data-theme="dark" class="dark-mode-toggle_toggle__2rc2d dark-mode-toggle_toggleLight__1OB2p" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"></path><path d="M9.5,2c-1.82,0-3.53,0.5-5,1.35c2.99,1.73,5,4.95,5,8.65s-2.01,6.92-5,8.65C5.97,21.5,7.68,22,9.5,22c5.52,0,10-4.48,10-10 S15.02,2,9.5,2z"></path></svg></div></nav></div></div></header><main class="layout_content__2V5t2"><article class="post_post__2uzyE"><h1 class="heading_container__2UElk"><a class="heading_link__1aoFY" href="/blog/the-greatnesses-and-gotchas-of-yaml">The greatnesses and gotchas of YAML</a></h1><span class="post_postData__yktVb text_page-accent-fg__3pARq">By Sidney Liebrand on <!-- -->Dec, 2017<span class="bullet_bullet__2pnOU">•</span>13<!-- --> min read</span><section><div><p><strong>Update 08–11–2018:</strong> Thank you <a href="https://medium.com/@abitrolly" title="Visit Anatoli Babenia on Medium">Anatoli Babenia</a>
for pointing to the base 60 parsing &#x27;feature&#x27; in the <a href="https://docs.docker.com/compose/compose-file/compose-file-v2/#ports" title="Visit base 60 parsing section on docs.docker.com"><code>docker-compose</code></a> documentation.
It led to me finding another great resource and added it along with some new content
to this post.</p><figure class="media_figure__1BF98"><div class="media_relative__3Dzxp" style="padding-bottom:41.22222222222222%"><img loading="lazy" class="media_media__1ZpPG" src="/media/posts/yaml-homepage.png" alt="yaml.org homepage"/></div><figcaption class="media_alt__xSx7S">yaml.org homepage</figcaption></figure><p>In this post I want to talk about <a href="http://yaml.org/" title="Visit yaml.org">YAML</a>.
Like the very popular <a href="http://json.org/" title="Visit json.org">JSON</a> format, it is a file format
that allows you to store data in a structured way. Last week I had a
discussion with a colleague about an unexpected output value when parsing
YAML to a Ruby hash. The YAML data looks like this:</p><pre class="prism-code language-yaml" style="background-color:#2a2734;color:#9a86fd"><div class="token-line" style="color:#9a86fd"><span class="token punctuation" style="color:#6c6783">---</span><span class="token plain"></span></div><div class="token-line" style="color:#9a86fd"><span class="token plain"></span><span class="token key atrule">some_key</span><span class="token punctuation" style="color:#6c6783">:</span><span class="token plain"></span></div><div class="token-line" style="color:#9a86fd"><span class="token plain">  </span><span class="token key atrule">some_other_key</span><span class="token punctuation" style="color:#6c6783">:</span><span class="token plain"> nil</span></div></pre><p>When parsed in Ruby, it looks like this:</p><pre class="prism-code language-ruby" style="background-color:#2a2734;color:#9a86fd"><div class="token-line" style="color:#9a86fd"><span class="token punctuation" style="color:#6c6783">{</span><span class="token string" style="color:#ffcc99">&#x27;some_key&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#e09142">=</span><span class="token operator" style="color:#e09142">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#6c6783">{</span><span class="token string" style="color:#ffcc99">&#x27;some_other_key&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#e09142">=</span><span class="token operator" style="color:#e09142">&gt;</span><span class="token plain"> </span><span class="token string" style="color:#ffcc99">&#x27;nil&#x27;</span><span class="token punctuation" style="color:#6c6783">}</span><span class="token punctuation" style="color:#6c6783">}</span></div></pre><p>And the equivalent Python output:</p><pre class="prism-code language-python" style="background-color:#2a2734;color:#9a86fd"><div class="token-line" style="color:#9a86fd"><span class="token punctuation" style="color:#6c6783">{</span><span class="token string" style="color:#ffcc99">&#x27;some_key&#x27;</span><span class="token punctuation" style="color:#6c6783">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#6c6783">{</span><span class="token string" style="color:#ffcc99">&#x27;some_other_key&#x27;</span><span class="token punctuation" style="color:#6c6783">:</span><span class="token plain"> </span><span class="token string" style="color:#ffcc99">&#x27;nil&#x27;</span><span class="token punctuation" style="color:#6c6783">}</span><span class="token punctuation" style="color:#6c6783">}</span></div></pre><p>The confusion was about the value of <code>some_other_key</code> which we
both thought would become <code>nil</code> instead of <code>&#x27;nil&#x27;</code>. I mentioned to my
colleague that if he wanted to get a nil value, he might as well
leave it completely empty:</p><pre class="prism-code language-yaml" style="background-color:#2a2734;color:#9a86fd"><div class="token-line" style="color:#9a86fd"><span class="token punctuation" style="color:#6c6783">---</span><span class="token plain"></span></div><div class="token-line" style="color:#9a86fd"><span class="token plain"></span><span class="token key atrule">some_key</span><span class="token punctuation" style="color:#6c6783">:</span><span class="token plain"></span></div><div class="token-line" style="color:#9a86fd"><span class="token plain">  some_other_key</span><span class="token punctuation" style="color:#6c6783">:</span></div></pre><p>Which indeed, leads to the expected result in Ruby:</p><pre class="prism-code language-ruby" style="background-color:#2a2734;color:#9a86fd"><div class="token-line" style="color:#9a86fd"><span class="token punctuation" style="color:#6c6783">{</span><span class="token string" style="color:#ffcc99">&#x27;some_key&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#e09142">=</span><span class="token operator" style="color:#e09142">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#6c6783">{</span><span class="token string" style="color:#ffcc99">&#x27;some_other_key&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#e09142">=</span><span class="token operator" style="color:#e09142">&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#ffcc99">nil</span><span class="token punctuation" style="color:#6c6783">}</span><span class="token punctuation" style="color:#6c6783">}</span></div></pre><p>And of course, in Python too:</p><pre class="prism-code language-python" style="background-color:#2a2734;color:#9a86fd"><div class="token-line" style="color:#9a86fd"><span class="token punctuation" style="color:#6c6783">{</span><span class="token string" style="color:#ffcc99">&#x27;some_key&#x27;</span><span class="token punctuation" style="color:#6c6783">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#6c6783">{</span><span class="token string" style="color:#ffcc99">&#x27;some_other_key&#x27;</span><span class="token punctuation" style="color:#6c6783">:</span><span class="token plain"> </span><span class="token boolean" style="color:#ffcc99">None</span><span class="token punctuation" style="color:#6c6783">}</span><span class="token punctuation" style="color:#6c6783">}</span></div></pre><p>At this point we became curious, I mean, there must be <em>some</em> kind of <code>nil</code> value,
right? So we ventured to Google and well, found an answer in no time at all :)
There is a <code>nil</code> value in YAML, it&#x27;s called <a href="http://yaml.org/type/null.html" title="Visit null type documentation on yaml.org"><code>null</code></a>!</p><pre class="prism-code language-yaml" style="background-color:#2a2734;color:#9a86fd"><div class="token-line" style="color:#9a86fd"><span class="token punctuation" style="color:#6c6783">---</span><span class="token plain"></span></div><div class="token-line" style="color:#9a86fd"><span class="token plain"></span><span class="token key atrule">some_key</span><span class="token punctuation" style="color:#6c6783">:</span><span class="token plain"></span></div><div class="token-line" style="color:#9a86fd"><span class="token plain">  </span><span class="token key atrule">some_other_key</span><span class="token punctuation" style="color:#6c6783">:</span><span class="token plain"> </span><span class="token null important" style="font-weight:bold;color:#c4b9fe">null</span></div></pre><p>Also yields the expected result for both Ruby and Python.</p><h2 class="heading_container__2UElk"><a class="heading_anchor__PWj4r" id="and-this-was-only-the-start"></a><a class="heading_link__1aoFY" href="#and-this-was-only-the-start">And this was only the start...</a></h2><p>Since that moment I&#x27;ve been wondering what <em>more</em> is there to YAML.
I&#x27;ve written literally <a href="https://github.com/SidOfc/browserino/tree/master/spec/files" title="Visit SidOfc/browserino YAML test files directory">thousands of lines of YAML</a>
test data for one of <a href="http://github.com/SidOfc/browserino" title="Visit SidOfc/browserino github repository">my gems</a>
but I&#x27;ve never really wondered what the language could really do.</p><p>What I also noticed is that there aren&#x27;t all that many YAML posts out there,
some resources I used while gathering information for this post:</p><ul><li><p><a href="https://learnxinyminutes.com/docs/yaml/" title="Visit the learnxinyminutes.com YAML docs">https://learnxinyminutes.com/docs/yaml/</a></p></li><li><p><a href="https://yaml.org/" title="Visit yaml.org">https://yaml.org/</a></p></li><li><p><a href="https://codebeautify.org/yaml-validator" title="Visit the codebeautify YAML validator">https://codebeautify.org/yaml-validator</a></p></li><li><p><a href="https://docs.saltstack.com/en/latest/topics/yaml/" title="visit the doc.saltstack.com YAML topic">https://docs.saltstack.com/en/latest/topics/yaml/</a></p></li><li><p><a href="https://www.yaml.org/spec/1.2/spec.html" title="Visit the YAML specification">https://www.yaml.org/spec/1.2/spec.html</a></p></li><li><p><a href="https://stackoverflow.com/a/1729545/2224331" title="Visit StackOverflow answer">https://stackoverflow.com/a/1729545/2224331</a></p></li><li><p><a href="https://stackoverflow.com/a/16986339/2224331" title="Visit StackOverflow answer">https://stackoverflow.com/a/16986339/2224331</a></p></li><li><p><a href="https://json.org/" title="Visit json.org">https://json.org/</a></p></li><li><p><a href="https://pyyaml.org/wiki/PyYAMLDocumentation" title="Visit pyyaml.org YAML documentation">https://pyyaml.org/wiki/PyYAMLDocumentation</a></p></li><li><p><a href="http://blog.teamlazerbeez.com/2009/04/15/yaml-gotchas/" title="Visit blog.teamlazerbeez.com YAML blog post">http://blog.teamlazerbeez.com/2009/04/15/yaml-gotchas/</a></p></li></ul><p>So I would like to share some of the features of YAML that you might not know about and also,
share some differences between YAML parsers (the Ruby and Python parsers).</p><h2 class="heading_container__2UElk"><a class="heading_anchor__PWj4r" id="inheritance"></a><a class="heading_link__1aoFY" href="#inheritance">Inheritance</a></h2><p>One cool feature, which I first saw when bootstrapping a sample Rails application was that you
can define &quot;defaults&quot; using anchors. In Rails, the <code>config/database.yml</code> file contains the
following content by default:</p><pre class="prism-code language-yaml" style="background-color:#2a2734;color:#9a86fd"><div class="token-line" style="color:#9a86fd"><span class="token key atrule">default</span><span class="token punctuation" style="color:#6c6783">:</span><span class="token plain"> </span><span class="token important" style="font-weight:bold;color:#c4b9fe">&amp;default</span><span class="token plain"></span></div><div class="token-line" style="color:#9a86fd"><span class="token plain">  </span><span class="token key atrule">adapter</span><span class="token punctuation" style="color:#6c6783">:</span><span class="token plain"> sqlite3</span></div><div class="token-line" style="color:#9a86fd"><span class="token plain">  </span><span class="token key atrule">pool</span><span class="token punctuation" style="color:#6c6783">:</span><span class="token plain"> &lt;%= ENV.fetch(&quot;RAILS_MAX_THREADS&quot;) </span><span class="token punctuation" style="color:#6c6783">{</span><span class="token plain"> </span><span class="token number" style="color:#e09142">5</span><span class="token plain"> </span><span class="token punctuation" style="color:#6c6783">}</span><span class="token plain"> %</span><span class="token punctuation" style="color:#6c6783">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#9a86fd"><span class="token plain">  </span><span class="token key atrule">timeout</span><span class="token punctuation" style="color:#6c6783">:</span><span class="token plain"> </span><span class="token number" style="color:#e09142">5000</span><span class="token plain"></span></div><div class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#9a86fd"><span class="token plain"></span><span class="token key atrule">development</span><span class="token punctuation" style="color:#6c6783">:</span><span class="token plain"></span></div><div class="token-line" style="color:#9a86fd"><span class="token plain">  </span><span class="token key atrule">&lt;&lt;</span><span class="token punctuation" style="color:#6c6783">:</span><span class="token plain"> </span><span class="token important" style="font-weight:bold;color:#c4b9fe">*default</span><span class="token plain"></span></div><div class="token-line" style="color:#9a86fd"><span class="token plain">  </span><span class="token key atrule">database</span><span class="token punctuation" style="color:#6c6783">:</span><span class="token plain"> db/development.sqlite3</span></div><div class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#9a86fd"><span class="token plain"></span><span class="token key atrule">test</span><span class="token punctuation" style="color:#6c6783">:</span><span class="token plain"></span></div><div class="token-line" style="color:#9a86fd"><span class="token plain">  </span><span class="token key atrule">&lt;&lt;</span><span class="token punctuation" style="color:#6c6783">:</span><span class="token plain"> </span><span class="token important" style="font-weight:bold;color:#c4b9fe">*default</span><span class="token plain"></span></div><div class="token-line" style="color:#9a86fd"><span class="token plain">  </span><span class="token key atrule">database</span><span class="token punctuation" style="color:#6c6783">:</span><span class="token plain"> db/test.sqlite3</span></div><div class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#9a86fd"><span class="token plain"></span><span class="token key atrule">production</span><span class="token punctuation" style="color:#6c6783">:</span><span class="token plain"></span></div><div class="token-line" style="color:#9a86fd"><span class="token plain">  </span><span class="token key atrule">&lt;&lt;</span><span class="token punctuation" style="color:#6c6783">:</span><span class="token plain"> </span><span class="token important" style="font-weight:bold;color:#c4b9fe">*default</span><span class="token plain"></span></div><div class="token-line" style="color:#9a86fd"><span class="token plain">  </span><span class="token key atrule">database</span><span class="token punctuation" style="color:#6c6783">:</span><span class="token plain"> db/production.sqlite3</span></div></pre><p>As you can see, there is a <code>default</code> key followed by <code>&amp;default</code>. The <code>&amp;default</code> keyword here represents
the anchor. Then, in another YAML node, you can inherit properties from that anchor by adding a
special key <code>&lt;&lt;</code> followed by <code>*default</code> in this case. To overwrite a default value, simply add the key
you want to overwrite with its new value below the <code>&lt;&lt;:* default</code> line.</p><h2 class="heading_container__2UElk"><a class="heading_anchor__PWj4r" id="write-json-in-your-yaml"></a><a class="heading_link__1aoFY" href="#write-json-in-your-yaml">Write JSON in your YAML</a></h2><p>Another handy thing to know is that you can write JSON inside YAML, this is pretty neat and to be
expected as <a href="https://stackoverflow.com/questions/1726802/what-is-the-difference-between-yaml-and-json-when-to-prefer-one-over-the-other/1729545#1729545" title="Visit StackOverflow answer">YAML is a superset of JSON</a> (or well, since version 1.2 it is at least).</p><p>The following YAML:</p><pre class="prism-code language-yaml" style="background-color:#2a2734;color:#9a86fd"><div class="token-line" style="color:#9a86fd"><span class="token punctuation" style="color:#6c6783">---</span><span class="token plain"></span></div><div class="token-line" style="color:#9a86fd"><span class="token plain"></span><span class="token key atrule">key</span><span class="token punctuation" style="color:#6c6783">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#6c6783">{</span><span class="token key atrule">&quot;some&quot;</span><span class="token punctuation" style="color:#6c6783">:</span><span class="token plain"> </span><span class="token string" style="color:#ffcc99">&quot;json&quot;</span><span class="token punctuation" style="color:#6c6783">}</span><span class="token plain"></span></div><div class="token-line" style="color:#9a86fd"><span class="token plain"></span><span class="token key atrule">another</span><span class="token punctuation" style="color:#6c6783">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#6c6783">[</span><span class="token number" style="color:#e09142">1</span><span class="token punctuation" style="color:#6c6783">,</span><span class="token plain"> </span><span class="token number" style="color:#e09142">2</span><span class="token punctuation" style="color:#6c6783">,</span><span class="token plain"> </span><span class="token number" style="color:#e09142">3</span><span class="token punctuation" style="color:#6c6783">]</span></div></pre><p>Parsed in Ruby this results in:</p><pre class="prism-code language-ruby" style="background-color:#2a2734;color:#9a86fd"><div class="token-line" style="color:#9a86fd"><span class="token punctuation" style="color:#6c6783">{</span><span class="token string" style="color:#ffcc99">&quot;key&quot;</span><span class="token operator" style="color:#e09142">=</span><span class="token operator" style="color:#e09142">&gt;</span><span class="token punctuation" style="color:#6c6783">{</span><span class="token string" style="color:#ffcc99">&quot;some&quot;</span><span class="token operator" style="color:#e09142">=</span><span class="token operator" style="color:#e09142">&gt;</span><span class="token string" style="color:#ffcc99">&quot;json&quot;</span><span class="token punctuation" style="color:#6c6783">}</span><span class="token punctuation" style="color:#6c6783">,</span><span class="token plain"> </span><span class="token string" style="color:#ffcc99">&quot;another&quot;</span><span class="token operator" style="color:#e09142">=</span><span class="token operator" style="color:#e09142">&gt;</span><span class="token punctuation" style="color:#6c6783">[</span><span class="token number" style="color:#e09142">1</span><span class="token punctuation" style="color:#6c6783">,</span><span class="token plain"> </span><span class="token number" style="color:#e09142">2</span><span class="token punctuation" style="color:#6c6783">,</span><span class="token plain"> </span><span class="token number" style="color:#e09142">3</span><span class="token punctuation" style="color:#6c6783">]</span><span class="token punctuation" style="color:#6c6783">}</span></div></pre><h2 class="heading_container__2UElk"><a class="heading_anchor__PWj4r" id="yaml-keys-as-ruby-symbols"></a><a class="heading_link__1aoFY" href="#yaml-keys-as-ruby-symbols">YAML keys as Ruby symbols</a></h2><p>This one I looked for specifically when I started a major rewrite of one of my gems and decided
to migrate test data out of Ruby into YAML. I was curious to see if YAML could actually store
Ruby <em>Symbols</em> instead of <em>Strings</em>. While I didn&#x27;t have thousands of tests written in YAML at the
time, I thought &quot;Why not?&quot;. The answer was that indeed, the Ruby parser understands symbols written
in YAML, and treats them as such when parsing in Ruby.</p><pre class="prism-code language-yaml" style="background-color:#2a2734;color:#9a86fd"><div class="token-line" style="color:#9a86fd"><span class="token punctuation" style="color:#6c6783">---</span><span class="token plain"></span></div><div class="token-line" style="color:#9a86fd"><span class="token plain"></span><span class="token key atrule">:my_symbol_key</span><span class="token punctuation" style="color:#6c6783">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#6c6783">:</span><span class="token plain">or_value</span></div></pre><p>In Ruby, evaluates to the following:</p><pre class="prism-code language-ruby" style="background-color:#2a2734;color:#9a86fd"><div class="token-line" style="color:#9a86fd"><span class="token punctuation" style="color:#6c6783">{</span><span class="token symbol">:my_symbol_key</span><span class="token operator" style="color:#e09142">=</span><span class="token operator" style="color:#e09142">&gt;</span><span class="token symbol">:or_value</span><span class="token punctuation" style="color:#6c6783">}</span></div></pre><p>Whereas the same YAML parsed in Python outputs:</p><pre class="prism-code language-python" style="background-color:#2a2734;color:#9a86fd"><div class="token-line" style="color:#9a86fd"><span class="token punctuation" style="color:#6c6783">{</span><span class="token string" style="color:#ffcc99">&#x27;:my_symbol_key&#x27;</span><span class="token punctuation" style="color:#6c6783">:</span><span class="token plain"> </span><span class="token string" style="color:#ffcc99">&#x27;:or_value&#x27;</span><span class="token punctuation" style="color:#6c6783">}</span></div></pre><p>I only recently gave this some thought, if I were to port my gem to Python for whatever reason,
I couldn&#x27;t &quot;conveniently&quot; use this YAML anymore and for anyone wanting to use the gem&#x27;s YAML
outside of Ruby, it would contain useless <code>:</code> characters at the start of every &quot;symbol&quot;.
So yeah, while awesome, use with caution! I&#x27;m considering rewriting my gem&#x27;s YAML to just
use strings instead of symbols because of this &quot;exclusive&quot; Ruby feature :)</p><h2 class="heading_container__2UElk"><a class="heading_anchor__PWj4r" id="multiline-strings-yaml-s-got-your-back"></a><a class="heading_link__1aoFY" href="#multiline-strings-yaml-s-got-your-back">Multiline strings? YAML&#x27;s got your back!</a></h2><p>Another topic often discussed in programming languages in general is how to handle multiline
strings, various languages have different solutions to the same problem. YAML has it&#x27;s own
two solutions. The pipe (<code>|</code>) character and the greater than (<code>&gt;</code>) sign.</p><p>The pipe notation, also referred to as &quot;literal block&quot;:</p><pre class="prism-code language-yaml" style="background-color:#2a2734;color:#9a86fd"><div class="token-line" style="color:#9a86fd"><span class="token key atrule">literal</span><span class="token punctuation" style="color:#6c6783">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#6c6783">|</span><span class="token scalar string" style="color:#ffcc99"></span></div><div class="token-line" style="color:#9a86fd"><span class="token scalar string" style="color:#ffcc99">    This block of text will be the value of the &#x27;literal&#x27; key,</span></div><div class="token-line" style="color:#9a86fd"><span class="token scalar string" style="color:#ffcc99">    with line breaks being preserved.</span><span class="token plain"></span></div><div class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#9a86fd"><span class="token plain">    It continues until de</span><span class="token punctuation" style="color:#6c6783">-</span><span class="token plain">dented</span><span class="token punctuation" style="color:#6c6783">,</span><span class="token plain"> leading indentation is</span></div><div class="token-line" style="color:#9a86fd"><span class="token plain">    stripped.</span></div><div class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#9a86fd"><span class="token plain">        Any lines that are &#x27;more</span><span class="token punctuation" style="color:#6c6783">-</span><span class="token plain">indented&#x27; keep the rest</span></div><div class="token-line" style="color:#9a86fd"><span class="token plain">        of their indentation </span><span class="token punctuation" style="color:#6c6783">-</span><span class="token plain"></span></div><div class="token-line" style="color:#9a86fd"><span class="token plain">        these lines will be indented by 4 spaces.</span></div></pre><p>The greater than sign notation, also referred to as &quot;folded block&quot;:</p><pre class="prism-code language-yaml" style="background-color:#2a2734;color:#9a86fd"><div class="token-line" style="color:#9a86fd"><span class="token key atrule">folded</span><span class="token punctuation" style="color:#6c6783">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#6c6783">&gt;</span><span class="token scalar string" style="color:#ffcc99"></span></div><div class="token-line" style="color:#9a86fd"><span class="token scalar string" style="color:#ffcc99">    This block of text will be the value of &#x27;folded&#x27;, but this</span></div><div class="token-line" style="color:#9a86fd"><span class="token scalar string" style="color:#ffcc99">    time, all newlines will be replaced with a single space.</span><span class="token plain"></span></div><div class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#9a86fd"><span class="token plain">    Blank lines</span><span class="token punctuation" style="color:#6c6783">,</span><span class="token plain"> like above</span><span class="token punctuation" style="color:#6c6783">,</span><span class="token plain"> are converted</span></div><div class="token-line" style="color:#9a86fd"><span class="token plain">    to a newline character.</span></div><div class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#9a86fd"><span class="token plain">        &#x27;More</span><span class="token punctuation" style="color:#6c6783">-</span><span class="token plain">indented&#x27; lines keep their newlines</span><span class="token punctuation" style="color:#6c6783">,</span><span class="token plain"> too </span><span class="token punctuation" style="color:#6c6783">-</span><span class="token plain"></span></div><div class="token-line" style="color:#9a86fd"><span class="token plain">        this text will appear over two lines.</span></div></pre><p><a href="https://learnxinyminutes.com/docs/yaml/" title="Visit the learnxinyminutes.com YAML docs">Both snippets came from here.</a> This post also contains
a lot of other great YAML examples you should definitely check out!</p><h2 class="heading_container__2UElk"><a class="heading_anchor__PWj4r" id="quoted-strings-begone"></a><a class="heading_link__1aoFY" href="#quoted-strings-begone">Quoted strings, begone!</a></h2><p>Unlike its friend JSON, YAML doesn&#x27;t mind if you don&#x27;t put your strings between quotes.
The following will output exactly what you would expect:</p><pre class="prism-code language-yaml" style="background-color:#2a2734;color:#9a86fd"><div class="token-line" style="color:#9a86fd"><span class="token key atrule">some_key</span><span class="token punctuation" style="color:#6c6783">:</span><span class="token plain"> with a string value</span></div></pre><p>In Ruby and Python, the results are the same (output in Ruby):</p><pre class="prism-code language-ruby" style="background-color:#2a2734;color:#9a86fd"><div class="token-line" style="color:#9a86fd"><span class="token punctuation" style="color:#6c6783">{</span><span class="token string" style="color:#ffcc99">&quot;some_key&quot;</span><span class="token operator" style="color:#e09142">=</span><span class="token operator" style="color:#e09142">&gt;</span><span class="token string" style="color:#ffcc99">&quot;with a string value&quot;</span><span class="token punctuation" style="color:#6c6783">}</span></div></pre><p>Keys don&#x27;t have to be quoted either, so removing the <code>_</code> from <code>some_key</code> results
in the following in both Ruby and Python (output in Ruby):</p><pre class="prism-code language-ruby" style="background-color:#2a2734;color:#9a86fd"><div class="token-line" style="color:#9a86fd"><span class="token punctuation" style="color:#6c6783">{</span><span class="token string" style="color:#ffcc99">&quot;some key&quot;</span><span class="token operator" style="color:#e09142">=</span><span class="token operator" style="color:#e09142">&gt;</span><span class="token string" style="color:#ffcc99">&quot;with a string value&quot;</span><span class="token punctuation" style="color:#6c6783">}</span></div></pre><p>While this makes copying certain values easier YAML tries to be smart about some
(more than you might think) of them. When a key with a value of either <code>yes</code>, <code>Yes</code>,
<code>YES</code>, <code>on</code>, <code>On</code> or <code>ON</code> is present, the resulting value when parsing this YAML will be
a boolean. The same is true for values <code>no</code>, <code>No</code>, <code>NO</code>, <code>off</code>, <code>Off</code> and <code>OFF</code>.</p><p>The following example shows Ruby syntax but Python 3.6 parsed it exactly the same.</p><pre class="prism-code language-ruby" style="background-color:#2a2734;color:#9a86fd"><div class="token-line" style="color:#9a86fd"><span class="token comment" style="color:#9390a1"># All the following equal true</span><span class="token plain"></span></div><div class="token-line" style="color:#9a86fd"><span class="token plain"></span><span class="token constant">YAML</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token plain">load</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token string" style="color:#ffcc99">&quot;key: Yes&quot;</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token plain"></span></div><div class="token-line" style="color:#9a86fd"><span class="token plain"></span><span class="token constant">YAML</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token plain">load</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token string" style="color:#ffcc99">&quot;key: yes&quot;</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token plain"></span></div><div class="token-line" style="color:#9a86fd"><span class="token plain"></span><span class="token constant">YAML</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token plain">load</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token string" style="color:#ffcc99">&quot;key: YES&quot;</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token plain"></span></div><div class="token-line" style="color:#9a86fd"><span class="token plain"></span><span class="token constant">YAML</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token plain">load</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token string" style="color:#ffcc99">&quot;key: on&quot;</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token plain"></span></div><div class="token-line" style="color:#9a86fd"><span class="token plain"></span><span class="token constant">YAML</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token plain">load</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token string" style="color:#ffcc99">&quot;key: On&quot;</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token plain"></span></div><div class="token-line" style="color:#9a86fd"><span class="token plain"></span><span class="token constant">YAML</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token plain">load</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token string" style="color:#ffcc99">&quot;key: ON&quot;</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token plain"></span></div><div class="token-line" style="color:#9a86fd"><span class="token plain"></span><span class="token comment" style="color:#9390a1"># =&gt; {&quot;key&quot;=&gt;true}</span><span class="token plain"></span></div><div class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#9a86fd"><span class="token plain"></span><span class="token comment" style="color:#9390a1"># All the following equal false</span><span class="token plain"></span></div><div class="token-line" style="color:#9a86fd"><span class="token plain"></span><span class="token constant">YAML</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token plain">load</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token string" style="color:#ffcc99">&quot;key: no&quot;</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token plain"></span></div><div class="token-line" style="color:#9a86fd"><span class="token plain"></span><span class="token constant">YAML</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token plain">load</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token string" style="color:#ffcc99">&quot;key: No&quot;</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token plain"></span></div><div class="token-line" style="color:#9a86fd"><span class="token plain"></span><span class="token constant">YAML</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token plain">load</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token string" style="color:#ffcc99">&quot;key: NO&quot;</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token plain"></span></div><div class="token-line" style="color:#9a86fd"><span class="token plain"></span><span class="token constant">YAML</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token plain">load</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token string" style="color:#ffcc99">&quot;key: off&quot;</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token plain"></span></div><div class="token-line" style="color:#9a86fd"><span class="token plain"></span><span class="token constant">YAML</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token plain">load</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token string" style="color:#ffcc99">&quot;key: Off&quot;</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token plain"></span></div><div class="token-line" style="color:#9a86fd"><span class="token plain"></span><span class="token constant">YAML</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token plain">load</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token string" style="color:#ffcc99">&quot;key: OFF&quot;</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token plain"></span></div><div class="token-line" style="color:#9a86fd"><span class="token plain"></span><span class="token comment" style="color:#9390a1"># =&gt; {&quot;key&quot;=&gt;false}</span></div></pre><p>If you expect your program to see these values as strings, the solution is to quote
the string or to cast the value as we&#x27;ll see in the next section.</p><h2 class="heading_container__2UElk"><a class="heading_anchor__PWj4r" id="casting-values"></a><a class="heading_link__1aoFY" href="#casting-values">Casting values</a></h2><p>If you want to ensure that a key has a value of a specific type, you can cast values
explicitly: <code>key: !!str 0.5</code> =&gt; <code>{&quot;key&quot; =&gt; &quot;0.5&quot;}</code> in both Ruby and Python. Likewise
key: <code>!!float &#x27;0.5&#x27;</code> =&gt; <code>{&quot;key&quot; =&gt; 0.5}</code> as well.</p><p>Some parsers actually implement <em>language specific</em> tags. These can be used to create specific data structures for that given language:</p><pre class="prism-code language-yaml" style="background-color:#2a2734;color:#9a86fd"><div class="token-line" style="color:#9a86fd"><span class="token punctuation" style="color:#6c6783">---</span><span class="token plain"></span></div><div class="token-line" style="color:#9a86fd"><span class="token plain"></span><span class="token key atrule">key</span><span class="token punctuation" style="color:#6c6783">:</span><span class="token plain"> </span><span class="token tag" style="color:#e09142">!!python/tuple</span><span class="token plain"> </span><span class="token punctuation" style="color:#6c6783">[</span><span class="token number" style="color:#e09142">1</span><span class="token punctuation" style="color:#6c6783">,</span><span class="token plain"> </span><span class="token number" style="color:#e09142">2</span><span class="token punctuation" style="color:#6c6783">]</span></div></pre><p>Results in the following in Python:</p><pre class="prism-code language-python" style="background-color:#2a2734;color:#9a86fd"><div class="token-line" style="color:#9a86fd"><span class="token punctuation" style="color:#6c6783">{</span><span class="token string" style="color:#ffcc99">&#x27;key&#x27;</span><span class="token punctuation" style="color:#6c6783">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#6c6783">(</span><span class="token number" style="color:#e09142">1</span><span class="token punctuation" style="color:#6c6783">,</span><span class="token plain"> </span><span class="token number" style="color:#e09142">2</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token punctuation" style="color:#6c6783">}</span></div></pre><p>What REALLY surprised me here was that the <em>Ruby parser turned it into an Array instead:</em></p><pre class="prism-code language-ruby" style="background-color:#2a2734;color:#9a86fd"><div class="token-line" style="color:#9a86fd"><span class="token punctuation" style="color:#6c6783">{</span><span class="token string" style="color:#ffcc99">&quot;key&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#e09142">=</span><span class="token operator" style="color:#e09142">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#6c6783">[</span><span class="token number" style="color:#e09142">1</span><span class="token punctuation" style="color:#6c6783">,</span><span class="token plain"> </span><span class="token number" style="color:#e09142">2</span><span class="token punctuation" style="color:#6c6783">]</span><span class="token punctuation" style="color:#6c6783">}</span></div></pre><p>So I thought to myself, <em>&quot;What if I change <code>!!python/tuple</code> to <code>!!ruby/array?</code>&quot;.</em>
So I went on ahead and updated the snippet:</p><pre class="prism-code language-yaml" style="background-color:#2a2734;color:#9a86fd"><div class="token-line" style="color:#9a86fd"><span class="token punctuation" style="color:#6c6783">---</span><span class="token plain"></span></div><div class="token-line" style="color:#9a86fd"><span class="token plain"></span><span class="token key atrule">key</span><span class="token punctuation" style="color:#6c6783">:</span><span class="token plain"> </span><span class="token tag" style="color:#e09142">!!ruby/array</span><span class="token plain"> </span><span class="token punctuation" style="color:#6c6783">[</span><span class="token number" style="color:#e09142">1</span><span class="token punctuation" style="color:#6c6783">,</span><span class="token plain"> </span><span class="token number" style="color:#e09142">2</span><span class="token punctuation" style="color:#6c6783">]</span></div></pre><p>And as expected, Ruby returns the correct result:</p><pre class="prism-code language-ruby" style="background-color:#2a2734;color:#9a86fd"><div class="token-line" style="color:#9a86fd"><span class="token punctuation" style="color:#6c6783">{</span><span class="token string" style="color:#ffcc99">&quot;key&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#e09142">=</span><span class="token operator" style="color:#e09142">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#6c6783">[</span><span class="token number" style="color:#e09142">1</span><span class="token punctuation" style="color:#6c6783">,</span><span class="token plain"> </span><span class="token number" style="color:#e09142">2</span><span class="token punctuation" style="color:#6c6783">]</span><span class="token punctuation" style="color:#6c6783">}</span></div></pre><p>Our friend Python on the other hand, has some issues here:</p><pre class="prism-code language-plain" style="background-color:#2a2734;color:#9a86fd"><div class="token-line" style="color:#9a86fd"><span class="token plain">...snipped...</span></div><div class="token-line" style="color:#9a86fd"><span class="token plain">yaml.constructor.ConstructorError: could not determine a</span></div><div class="token-line" style="color:#9a86fd"><span class="token plain">constructor for the tag &#x27;tag:yaml.org,2002:ruby/array&#x27;</span></div><div class="token-line" style="color:#9a86fd"><span class="token plain">  in &quot;&lt;unicode string&gt;&quot;, line 1, column 6:</span></div><div class="token-line" style="color:#9a86fd"><span class="token plain">    key: !!ruby/array [1, 2]</span></div></pre><p>In the above example we see that the Python parser throws an error because it can&#x27;t find the
correct constructor for the tag. When Ruby finds a <em>language specific</em> tag that it doesn&#x27;t know
how to use, it is simply ignored. I think both languages have a different point of view where
Python is more &quot;demanding&quot; about what kind of YAML you feed it and Ruby tries to &quot;cushion&quot; your
experience whenever it can.</p><p>So thank you Ruby (at least MRI Ruby) for supporting and treating
these Pythonic types as if they were your own ♥️</p><h2 class="heading_container__2UElk"><a class="heading_anchor__PWj4r" id="integer-notation"></a><a class="heading_link__1aoFY" href="#integer-notation">Integer notation</a></h2><p>This is a small one, and part of multiple programming languages to improve readability of
large integers / binary numbers. YAML allows the usage of _ characters to &quot;group&quot; numbers,
e.g. <code>1000000000</code> vs <code>1_000_000_000</code>. I think the latter is many more times more readable and
therefore think that YAML deserves a honorable mention for including this awesome feat! 👍</p><h2 class="heading_container__2UElk"><a class="heading_anchor__PWj4r" id="sexagesimal-numbers"></a><a class="heading_link__1aoFY" href="#sexagesimal-numbers">Sexagesimal numbers?</a></h2><p>We&#x27;ve already seen some weird behavior with some unquoted string values magically turning
into booleans but there is more! YAML parses numbers in <code>ii:jj</code> format in base 60! For example, in Ruby:</p><pre class="prism-code language-ruby" style="background-color:#2a2734;color:#9a86fd"><div class="token-line" style="color:#9a86fd"><span class="token constant">YAML</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token plain">load</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token string" style="color:#ffcc99">&quot;key: 12:30:00&quot;</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token plain"></span></div><div class="token-line" style="color:#9a86fd"><span class="token plain"></span><span class="token comment" style="color:#9390a1"># =&gt; {&quot;key&quot;=&gt;45000}</span></div></pre><p>While the result is <a href="http://yaml.org/type/float.html" title="Visit float type documentation on yaml.org">following the spec</a>, it is more often than
not undesired. It becomes more interesting when the digit starts with a leading <code>0</code>. In Ruby:</p><pre class="prism-code language-ruby" style="background-color:#2a2734;color:#9a86fd"><div class="token-line" style="color:#9a86fd"><span class="token constant">YAML</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token plain">load</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token string" style="color:#ffcc99">&quot;key: 01:30:00&quot;</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token plain"></span></div><div class="token-line" style="color:#9a86fd"><span class="token plain"></span><span class="token comment" style="color:#9390a1"># =&gt; {&quot;key&quot;=&gt;5400}</span></div></pre><p>Whereas in Python:</p><pre class="prism-code language-python" style="background-color:#2a2734;color:#9a86fd"><div class="token-line" style="color:#9a86fd"><span class="token plain">yaml</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token plain">safe_load</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token string" style="color:#ffcc99">&quot;key: 01:30:00&quot;</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token plain"></span></div><div class="token-line" style="color:#9a86fd"><span class="token plain">  </span><span class="token comment" style="color:#9390a1"># =&gt; {&#x27;key&#x27;: &#x27;01:30:00&#x27;}</span></div></pre><p>Ruby seems to be trying to &quot;fix&quot; this by trimming the leading <code>0</code> and parsing the rest in base 60 whereas
Python sees that this value is not valid <code>ii:jj</code> format. I am not sure why this is but my guess is what
we&#x27;re going to talk about next.</p><h2 class="heading_container__2UElk"><a class="heading_anchor__PWj4r" id="octal-numbers"></a><a class="heading_link__1aoFY" href="#octal-numbers">Octal numbers</a></h2><p>If your YAML contains integer values that start with a <code>0</code> and do not contain digits greater than <code>7</code>,
they will be parsed as octal values. In Ruby:</p><pre class="prism-code language-ruby" style="background-color:#2a2734;color:#9a86fd"><div class="token-line" style="color:#9a86fd"><span class="token comment" style="color:#9390a1"># parsed as octal</span><span class="token plain"></span></div><div class="token-line" style="color:#9a86fd"><span class="token plain"></span><span class="token constant">YAML</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token plain">load</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token string" style="color:#ffcc99">&quot;key: 0123&quot;</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token plain"></span></div><div class="token-line" style="color:#9a86fd"><span class="token plain"></span><span class="token comment" style="color:#9390a1"># =&gt; {&quot;key&quot;: 83}</span><span class="token plain"></span></div><div class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#9a86fd"><span class="token plain"></span><span class="token comment" style="color:#9390a1"># parsed &#x27;normally&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#9a86fd"><span class="token plain"></span><span class="token constant">YAML</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token plain">load</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token string" style="color:#ffcc99">&quot;key: 01238&quot;</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token plain"></span></div><div class="token-line" style="color:#9a86fd"><span class="token plain"></span><span class="token comment" style="color:#9390a1"># =&gt; {&quot;key&quot;: &quot;01238&quot;}</span></div></pre><p>Python does exactly the same thing in this case. To get back to the previous example, I think Python
sees the value <code>01:30:00</code> as an invalid octal number and therefore chooses to parse it as a string.</p><h2 class="heading_container__2UElk"><a class="heading_anchor__PWj4r" id="complex-keys"></a><a class="heading_link__1aoFY" href="#complex-keys">Complex keys</a></h2><p>Aside from string keys, YAML won&#x27;t complain if you want to use floats:
<code>1.1: hello there</code> =&gt; <code>{1.1 =&gt; &quot;hello there&quot;}</code> but this is still a simple key.
It <em>will</em> complain about using a list or hash as key: <code>[1, 2, 3]: hello there</code> =&gt; <code>error</code>.
Both the Ruby and Python parsers give an error when trying either.</p><p>The solution is to use a <em>language specific</em> tag. This can be used to create keys that are complex
data types such as a Ruby Array or Python Tuple.</p><p>A complex key is created by first inserting a question mark followed by a space, followed by the
<em>language specific</em> tag and the final value of the key. Then, on a new line, the value is added as usual,
starting with a colon followed by a space character and the value of the key:</p><pre class="prism-code language-yaml" style="background-color:#2a2734;color:#9a86fd"><div class="token-line" style="color:#9a86fd"><span class="token punctuation" style="color:#6c6783">---</span><span class="token plain"></span></div><div class="token-line" style="color:#9a86fd"><span class="token plain">  </span><span class="token punctuation" style="color:#6c6783">?</span><span class="token plain"> </span><span class="token tag" style="color:#e09142">!!python/tuple</span><span class="token plain"> </span><span class="token punctuation" style="color:#6c6783">[</span><span class="token number" style="color:#e09142">1</span><span class="token punctuation" style="color:#6c6783">,</span><span class="token plain"> </span><span class="token number" style="color:#e09142">2</span><span class="token punctuation" style="color:#6c6783">]</span><span class="token plain"></span></div><div class="token-line" style="color:#9a86fd"><span class="token plain">  </span><span class="token punctuation" style="color:#6c6783">:</span><span class="token plain"> hello</span></div></pre><p>In Python, this will result in:</p><pre class="prism-code language-python" style="background-color:#2a2734;color:#9a86fd"><div class="token-line" style="color:#9a86fd"><span class="token punctuation" style="color:#6c6783">{</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token number" style="color:#e09142">1</span><span class="token punctuation" style="color:#6c6783">,</span><span class="token plain"> </span><span class="token number" style="color:#e09142">2</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token punctuation" style="color:#6c6783">:</span><span class="token plain"> </span><span class="token string" style="color:#ffcc99">&#x27;hello&#x27;</span><span class="token punctuation" style="color:#6c6783">}</span></div></pre><p>Ruby on the other hand, has no &quot;Tuple&quot; type (nor did I expect it to understand the python tags)
and uses the thing that most closely resembles it, an Array:</p><pre class="prism-code language-ruby" style="background-color:#2a2734;color:#9a86fd"><div class="token-line" style="color:#9a86fd"><span class="token punctuation" style="color:#6c6783">{</span><span class="token punctuation" style="color:#6c6783">[</span><span class="token number" style="color:#e09142">1</span><span class="token punctuation" style="color:#6c6783">,</span><span class="token plain"> </span><span class="token number" style="color:#e09142">2</span><span class="token punctuation" style="color:#6c6783">]</span><span class="token plain"> </span><span class="token operator" style="color:#e09142">=</span><span class="token operator" style="color:#e09142">&gt;</span><span class="token plain"> </span><span class="token string" style="color:#ffcc99">&quot;hello&quot;</span><span class="token punctuation" style="color:#6c6783">}</span></div></pre><p>So while it is a bit awkward and not very portable, still something useful to know just in case :)</p><h2 class="heading_container__2UElk"><a class="heading_anchor__PWj4r" id="comments"></a><a class="heading_link__1aoFY" href="#comments">Comments</a></h2><p>We&#x27;ve already seen what kind of beast YAML actually is under the hood, I actually learned new things
myself <em>while writing this post</em> since I ran every example through both the Python and Ruby REPL at the
same time (Thank you tmux pane-synchronization ♥️) and it doesn&#x27;t stop there! Another
seemingly-trivial-yet-missing-from-JSON feature would be the fact that you can add <code># comments</code>.</p><p>In JSON, comments aren&#x27;t supported but of course, YAML has our back and lets us do pretty much
whatever we want, a comment starts with a # sign:</p><pre class="prism-code language-yaml" style="background-color:#2a2734;color:#9a86fd"><div class="token-line" style="color:#9a86fd"><span class="token punctuation" style="color:#6c6783">---</span><span class="token plain"></span></div><div class="token-line" style="color:#9a86fd"><span class="token plain"></span><span class="token key atrule">some</span><span class="token punctuation" style="color:#6c6783">:</span><span class="token plain"> yaml</span></div><div class="token-line" style="color:#9a86fd"><span class="token plain"></span><span class="token comment" style="color:#9390a1"># oh noes! A comment</span><span class="token plain"></span></div><div class="token-line" style="color:#9a86fd"><span class="token plain"></span><span class="token key atrule">no</span><span class="token punctuation" style="color:#6c6783">:</span><span class="token plain"> problem</span></div></pre><p>Both Ruby and Python simply ignore the comment:</p><pre class="prism-code language-ruby" style="background-color:#2a2734;color:#9a86fd"><div class="token-line" style="color:#9a86fd"><span class="token punctuation" style="color:#6c6783">{</span><span class="token string" style="color:#ffcc99">&quot;key&quot;</span><span class="token operator" style="color:#e09142">=</span><span class="token operator" style="color:#e09142">&gt;</span><span class="token punctuation" style="color:#6c6783">[</span><span class="token number" style="color:#e09142">1</span><span class="token punctuation" style="color:#6c6783">,</span><span class="token plain"> </span><span class="token number" style="color:#e09142">2</span><span class="token punctuation" style="color:#6c6783">]</span><span class="token punctuation" style="color:#6c6783">,</span><span class="token plain"> </span><span class="token string" style="color:#ffcc99">&quot;key2&quot;</span><span class="token operator" style="color:#e09142">=</span><span class="token operator" style="color:#e09142">&gt;</span><span class="token string" style="color:#ffcc99">&quot;no problem&quot;</span><span class="token punctuation" style="color:#6c6783">}</span></div></pre><h2 class="heading_container__2UElk"><a class="heading_anchor__PWj4r" id="summary"></a><a class="heading_link__1aoFY" href="#summary">Summary</a></h2><p>In short, this post described the following features:</p><ul><li><p>Inheritance / defaults</p></li><li><p>Write JSON within YAML</p></li><li><p>Ruby Symbols as keys</p></li><li><p>Multiline strings</p></li><li><p>Quoted strings</p></li><li><p>Casting values</p></li><li><p>Integer notation</p></li><li><p>Sexagesimal numbers?</p></li><li><p>Octal numbers</p></li><li><p>Complex keys</p></li><li><p>Comments</p></li></ul><p>YAML is certainly a versatile marku...lang... yeah never mind that :) But seriously though, YAML is indeed very versatile, it can do lots of things as you have hopefully seen in the examples.</p><p>The REPLS used for testing were <a href="https://github.com/pry/pry" title="Visit pry/pry repository">pry</a> for Ruby and Python&#x27;s builtin REPL.
The Ruby parser used was <a href="https://ruby-doc.org/stdlib-2.4.2/libdoc/yaml/rdoc/YAML.html" title="Visit ruby-doc.org YAML documentation">Yaml</a> on Ruby (MRI) 2.4.1 and for Python, <a href="https://pyyaml.org/wiki/PyYAMLDocumentation" title="Visit pyyaml.org YAML documentation">pyyaml</a> was used on Python 3.6.2.</p><p><strong>Post update</strong>: During the process of updating this post, I used pry for Ruby (MRI) 2.5.1 and Python&#x27;s (3.6.7) builtin REPL. The same libraries were used for testing.</p><h2 class="heading_container__2UElk"><a class="heading_anchor__PWj4r" id="conclusion"></a><a class="heading_link__1aoFY" href="#conclusion">Conclusion</a></h2><p>I think YAML is great! Every experience I&#x27;ve had so far with YAML has been a positive one, whether it includes writing thousands of lines or debugging an issue. Even writing this post was a pleasure, I just took my time, opened my favorite REPL&#x27;s with pane-sync on to reduce typing and started compiling information and examples, sometimes with side-effects I didn&#x27;t even anticipate which led to interesting results.</p><p>I&#x27;m pretty sure I&#x27;ve missed some things considering what we&#x27;ve just witnessed earlier in the Casting Values section, there are probably lots more of these nuances between various other parsers.</p><p>From this point on, I hope that your YAML experience will also be great, it is a powerful tool to be able to wield, and I also hope you learned something new.</p><p>Cheers!</p><p>👋</p></div></section><a tabindex="0" class="button_button__LVJFE" href="/">Back</a></article></main><footer class="layout_footer__2cV3b"><strong>©</strong> sidneyliebrand.io<!-- --> <!-- -->2021</footer></div></div></body></html>