<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="next-head-count" content="2"/><link rel="preload" href="/_next/static/css/93ccbabf8c27e570c856.css" as="style"/><link rel="stylesheet" href="/_next/static/css/93ccbabf8c27e570c856.css" data-n-g=""/><link rel="preload" href="/_next/static/css/8e23bdcc44af56012ad2.css" as="style"/><link rel="stylesheet" href="/_next/static/css/8e23bdcc44af56012ad2.css" data-n-p=""/><noscript data-n-css=""></noscript><link rel="preload" href="/_next/static/chunks/main-c64519ed79327e51c7fd.js" as="script"/><link rel="preload" href="/_next/static/chunks/webpack-50bee04d1dc61f8adf5b.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.29f9e2f3d4a33bafbaa5.js" as="script"/><link rel="preload" href="/_next/static/chunks/commons.2315b3822f3fa12e695d.js" as="script"/><link rel="preload" href="/_next/static/chunks/62e1beb3a59d93297dd568d6addecfcbe54736d1.c92d76e0fa573fc224b4.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-324d0b6ffeea958e119c.js" as="script"/><link rel="preload" href="/_next/static/chunks/89c7192737f5dae381690d2d2c3016603346826c.c0a4006c868814e5158c.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/blog/%5Bslug%5D-f858634b5fce0594cd16.js" as="script"/></head><body><script>
                        try {
                            if (localStorage.getItem('dark')) {
                                document.body.setAttribute('class', 'dark')
                            }
                        } catch (e) {
                        }
                    </script><div id="__next"></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"title":"Converting .gif to web-safe video formats using ffmpeg","description":"This post shows how to convert .gif images to web-safe video formats using ffmpeg cli. These formats produce smaller files which means less data to load!","published":"2021-02-14T18:30:00Z","readTimeInMinutes":3,"source":{"compiledSource":"\"use strict\";\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i \u003c arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i \u003c sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) \u003e= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i \u003c sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) \u003e= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar layoutProps = {};\nvar MDXLayout = \"wrapper\";\n\nfunction MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"When recording animated content for my blog posts I use a gif recorder. However,\\nusing \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://caniuse.com/?search=webm\",\n    \"title\": \"View caniuse.com webm support\"\n  }, \".webm\"), \" or \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://caniuse.com/?search=mp4\",\n    \"title\": \"View caniuse.com mp4 support\"\n  }, \".mp4\"), \"\\nfiles is usually more efficient and works in pretty much every major browser today.\"), mdx(\"h2\", null, \"Convert .gif to .webm\"), mdx(\"p\", null, \"To convert a .gif file to .webm, use the following command:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-shell\"\n  }, \"ffmpeg -i file.gif -c vp9 -b:v 0 -crf 40 file.webm\\n\")), mdx(\"p\", null, \"This will output a .webm file that works in most browsers, but what are these options\\ndoing exactly? Let's dive in:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"-i\"), \": Specifies the \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"input file\"), \", in this case \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"file.gif\"), \".\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"-c\"), \": Specifies the \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"codec\"), \", \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"vp9\"), \" works in most browsers.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"-b:v\"), \": Specifies the \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"video bitrate\"), \", \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"0\"), \" allows us to specify the quality via the \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"-crf\"), \" option.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"-crf\"), \": Specifies the \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"quality\"), \", ranges between 0-63, lower means better quality.\")), mdx(\"p\", null, \"More detailed explanations about the options can be found \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://trac.ffmpeg.org/wiki/Encode/VP9\",\n    \"title\": \"Visit ffmpeg VP9 encode page\"\n  }, \"here\"), \".\"), mdx(\"p\", null, \"These .webm files will suffer a little bit of quality loss, but if more quality is\\nneeded the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"-crf\"), \" flag can be set to a lower value easily. With these settings\\nthe .webm file is (on average) \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"60%\"), \" smaller than the .gif file.\"), mdx(\"p\", null, \"When we check caniuse, \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://caniuse.com/?search=webm\",\n    \"title\": \"View caniuse.com webm support\"\n  }, \".webm support\"), \" looks good too, mostly.\\nIndeed the only real reason today to use .mp4 on the web is to support Internet Explorer.\"), mdx(\"h2\", null, \"Convert .gif to .mp4\"), mdx(\"p\", null, \"To convert a .gif file to a web-safe .mp4, use the following command:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-shell\"\n  }, \"ffmpeg -i file.gif -movflags +faststart -pix_fmt yuv420p \\\\\\n       -vf \\\"scale=trunc(iw/2)*2:trunc(ih/2)*2\\\" file.mp4\\n\")), mdx(\"p\", null, \"This will output a .mp4 file that is \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://caniuse.com/?search=mp4\",\n    \"title\": \"View caniuse.com mp4 support\"\n  }, \"widely supported\"), \"\\nin all browsers except Opera Mini. Let's also cover the options for this one:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"-i\"), \": Specifies the \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"input file\"), \", in this case \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"file.gif\"), \".\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"-movflags\"), \": For web video we can specify \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"+faststart\"), \" to allow the video to start playing before the download is complete.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"-pix_fmt\"), \": The default \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"yuv444p\"), \" can't be played by some mobile browsers so we set it to \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"yuv420p\"), \" instead.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"-vf\"), \": This flag is allows us to set \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"\\\"scale=trunc(iw/2)*2:trunc(ih/2)*2\\\"\"), \" to ensure the video width and height are divisible by 2 which would otherwise cause an error when using \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"yuv420p\"), \".\")), mdx(\"p\", null, \"More detailed expoanations about the options can be found \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://trac.ffmpeg.org/wiki/Encode/H.264\",\n    \"title\": \"Visit ffmpeg H.264 encode page\"\n  }, \"here\"), \".\\nAdditionally, \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/manateelazycat/deepin-screen-recorder/commit/a49612faed28fc70a98aa117839cc67d96b99761\",\n    \"title\": \"Read details about pix_fmt and vf flags command line flags\"\n  }, \"this commit\"), \"\\nprovides some additional context about \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"-pix_fmt\"), \" and \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"-vf\"), \".\"), mdx(\"p\", null, \"The .mp4 file is (on average) \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"50%\"), \" smaller than the .gif file. While less efficient\\nthan .webm, it is still much better than using .gif.\"), mdx(\"h2\", null, \"Conclusion\"), mdx(\"p\", null, \"Hopefully this post made it a little bit easier to understand how to convert\\n.gif files to .webm or .mp4 using \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"ffmpeg\"), \". It a powerful tool that can help us\\noptimize our usage of animated media on the web. It is definitely worth looking\\ninto if you run a website that displays lots of gifs.\"), mdx(\"p\", null, \"Until next time :)\"), mdx(\"p\", null, \"\\uD83D\\uDC4B\"));\n}\n\n;\nMDXContent.isMDXComponent = true;","renderedOutput":"\u003cp\u003eWhen recording animated content for my blog posts I use a gif recorder. However,\nusing \u003ca href=\"https://caniuse.com/?search=webm\" title=\"View caniuse.com webm support\"\u003e.webm\u003c/a\u003e or \u003ca href=\"https://caniuse.com/?search=mp4\" title=\"View caniuse.com mp4 support\"\u003e.mp4\u003c/a\u003e\nfiles is usually more efficient and works in pretty much every major browser today.\u003c/p\u003e\u003ch2 class=\"heading_container__2UElk\"\u003e\u003ca class=\"heading_anchor__PWj4r\" id=\"convert-gif-to\"\u003e\u003c/a\u003e\u003ca class=\"heading_link__1aoFY\" href=\"#convert-gif-to\"\u003eConvert .gif to .webm\u003c/a\u003e\u003c/h2\u003e\u003cp\u003eTo convert a .gif file to .webm, use the following command:\u003c/p\u003e\u003cpre class=\"prism-code language-shell\" style=\"background-color:#2a2734;color:#9a86fd\"\u003e\u003cdiv class=\"token-line\" style=\"color:#9a86fd\"\u003e\u003cspan class=\"token plain\"\u003effmpeg -i file.gif -c vp9 -b:v \u003c/span\u003e\u003cspan class=\"token number\" style=\"color:#e09142\"\u003e0\u003c/span\u003e\u003cspan class=\"token plain\"\u003e -crf \u003c/span\u003e\u003cspan class=\"token number\" style=\"color:#e09142\"\u003e40\u003c/span\u003e\u003cspan class=\"token plain\"\u003e file.webm\u003c/span\u003e\u003c/div\u003e\u003c/pre\u003e\u003cp\u003eThis will output a .webm file that works in most browsers, but what are these options\ndoing exactly? Let\u0026#x27;s dive in:\u003c/p\u003e\u003cul\u003e\u003cli\u003e\u003ccode\u003e-i\u003c/code\u003e: Specifies the \u003cem\u003einput file\u003c/em\u003e, in this case \u003ccode\u003efile.gif\u003c/code\u003e.\u003c/li\u003e\u003cli\u003e\u003ccode\u003e-c\u003c/code\u003e: Specifies the \u003cem\u003ecodec\u003c/em\u003e, \u003ccode\u003evp9\u003c/code\u003e works in most browsers.\u003c/li\u003e\u003cli\u003e\u003ccode\u003e-b:v\u003c/code\u003e: Specifies the \u003cem\u003evideo bitrate\u003c/em\u003e, \u003ccode\u003e0\u003c/code\u003e allows us to specify the quality via the \u003ccode\u003e-crf\u003c/code\u003e option.\u003c/li\u003e\u003cli\u003e\u003ccode\u003e-crf\u003c/code\u003e: Specifies the \u003cem\u003equality\u003c/em\u003e, ranges between 0-63, lower means better quality.\u003c/li\u003e\u003c/ul\u003e\u003cp\u003eMore detailed explanations about the options can be found \u003ca href=\"https://trac.ffmpeg.org/wiki/Encode/VP9\" title=\"Visit ffmpeg VP9 encode page\"\u003ehere\u003c/a\u003e.\u003c/p\u003e\u003cp\u003eThese .webm files will suffer a little bit of quality loss, but if more quality is\nneeded the \u003ccode\u003e-crf\u003c/code\u003e flag can be set to a lower value easily. With these settings\nthe .webm file is (on average) \u003cstrong\u003e60%\u003c/strong\u003e smaller than the .gif file.\u003c/p\u003e\u003cp\u003eWhen we check caniuse, \u003ca href=\"https://caniuse.com/?search=webm\" title=\"View caniuse.com webm support\"\u003e.webm support\u003c/a\u003e looks good too, mostly.\nIndeed the only real reason today to use .mp4 on the web is to support Internet Explorer.\u003c/p\u003e\u003ch2 class=\"heading_container__2UElk\"\u003e\u003ca class=\"heading_anchor__PWj4r\" id=\"convert-gif-to\"\u003e\u003c/a\u003e\u003ca class=\"heading_link__1aoFY\" href=\"#convert-gif-to\"\u003eConvert .gif to .mp4\u003c/a\u003e\u003c/h2\u003e\u003cp\u003eTo convert a .gif file to a web-safe .mp4, use the following command:\u003c/p\u003e\u003cpre class=\"prism-code language-shell\" style=\"background-color:#2a2734;color:#9a86fd\"\u003e\u003cdiv class=\"token-line\" style=\"color:#9a86fd\"\u003e\u003cspan class=\"token plain\"\u003effmpeg -i file.gif -movflags +faststart -pix_fmt yuv420p \u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#6c6783\"\u003e\\\u003c/span\u003e\u003cspan class=\"token plain\"\u003e\u003c/span\u003e\u003c/div\u003e\u003cdiv class=\"token-line\" style=\"color:#9a86fd\"\u003e\u003cspan class=\"token plain\"\u003e       -vf \u003c/span\u003e\u003cspan class=\"token string\" style=\"color:#ffcc99\"\u003e\u0026quot;scale=trunc(iw/2)*2:trunc(ih/2)*2\u0026quot;\u003c/span\u003e\u003cspan class=\"token plain\"\u003e file.mp4\u003c/span\u003e\u003c/div\u003e\u003c/pre\u003e\u003cp\u003eThis will output a .mp4 file that is \u003ca href=\"https://caniuse.com/?search=mp4\" title=\"View caniuse.com mp4 support\"\u003ewidely supported\u003c/a\u003e\nin all browsers except Opera Mini. Let\u0026#x27;s also cover the options for this one:\u003c/p\u003e\u003cul\u003e\u003cli\u003e\u003ccode\u003e-i\u003c/code\u003e: Specifies the \u003cem\u003einput file\u003c/em\u003e, in this case \u003ccode\u003efile.gif\u003c/code\u003e.\u003c/li\u003e\u003cli\u003e\u003ccode\u003e-movflags\u003c/code\u003e: For web video we can specify \u003ccode\u003e+faststart\u003c/code\u003e to allow the video to start playing before the download is complete.\u003c/li\u003e\u003cli\u003e\u003ccode\u003e-pix_fmt\u003c/code\u003e: The default \u003ccode\u003eyuv444p\u003c/code\u003e can\u0026#x27;t be played by some mobile browsers so we set it to \u003ccode\u003eyuv420p\u003c/code\u003e instead.\u003c/li\u003e\u003cli\u003e\u003ccode\u003e-vf\u003c/code\u003e: This flag is allows us to set \u003ccode\u003e\u0026quot;scale=trunc(iw/2)*2:trunc(ih/2)*2\u0026quot;\u003c/code\u003e to ensure the video width and height are divisible by 2 which would otherwise cause an error when using \u003ccode\u003eyuv420p\u003c/code\u003e.\u003c/li\u003e\u003c/ul\u003e\u003cp\u003eMore detailed expoanations about the options can be found \u003ca href=\"https://trac.ffmpeg.org/wiki/Encode/H.264\" title=\"Visit ffmpeg H.264 encode page\"\u003ehere\u003c/a\u003e.\nAdditionally, \u003ca href=\"https://github.com/manateelazycat/deepin-screen-recorder/commit/a49612faed28fc70a98aa117839cc67d96b99761\" title=\"Read details about pix_fmt and vf flags command line flags\"\u003ethis commit\u003c/a\u003e\nprovides some additional context about \u003ccode\u003e-pix_fmt\u003c/code\u003e and \u003ccode\u003e-vf\u003c/code\u003e.\u003c/p\u003e\u003cp\u003eThe .mp4 file is (on average) \u003cstrong\u003e50%\u003c/strong\u003e smaller than the .gif file. While less efficient\nthan .webm, it is still much better than using .gif.\u003c/p\u003e\u003ch2 class=\"heading_container__2UElk\"\u003e\u003ca class=\"heading_anchor__PWj4r\" id=\"conclusion\"\u003e\u003c/a\u003e\u003ca class=\"heading_link__1aoFY\" href=\"#conclusion\"\u003eConclusion\u003c/a\u003e\u003c/h2\u003e\u003cp\u003eHopefully this post made it a little bit easier to understand how to convert\n.gif files to .webm or .mp4 using \u003ccode\u003effmpeg\u003c/code\u003e. It a powerful tool that can help us\noptimize our usage of animated media on the web. It is definitely worth looking\ninto if you run a website that displays lots of gifs.\u003c/p\u003e\u003cp\u003eUntil next time :)\u003c/p\u003e\u003cp\u003e👋\u003c/p\u003e","scope":{"title":"Converting .gif to web-safe video formats using ffmpeg","description":"This post shows how to convert .gif images to web-safe video formats using ffmpeg cli. These formats produce smaller files which means less data to load!","published":"2021-02-14T18:30:00Z"}},"slug":"converting-gif-to-web-safe-video-formats-using-ffmpeg"},"__N_SSG":true},"page":"/blog/[slug]","query":{"slug":"converting-gif-to-web-safe-video-formats-using-ffmpeg"},"buildId":"T3afHm8Q4GK5ayDfXcILN","nextExport":false,"isFallback":false,"gsp":true}</script><script nomodule="" src="/_next/static/chunks/polyfills-ff94e68042added27a93.js"></script><script src="/_next/static/chunks/main-c64519ed79327e51c7fd.js" async=""></script><script src="/_next/static/chunks/webpack-50bee04d1dc61f8adf5b.js" async=""></script><script src="/_next/static/chunks/framework.29f9e2f3d4a33bafbaa5.js" async=""></script><script src="/_next/static/chunks/commons.2315b3822f3fa12e695d.js" async=""></script><script src="/_next/static/chunks/62e1beb3a59d93297dd568d6addecfcbe54736d1.c92d76e0fa573fc224b4.js" async=""></script><script src="/_next/static/chunks/pages/_app-324d0b6ffeea958e119c.js" async=""></script><script src="/_next/static/chunks/89c7192737f5dae381690d2d2c3016603346826c.c0a4006c868814e5158c.js" async=""></script><script src="/_next/static/chunks/pages/blog/%5Bslug%5D-f858634b5fce0594cd16.js" async=""></script><script src="/_next/static/T3afHm8Q4GK5ayDfXcILN/_buildManifest.js" async=""></script><script src="/_next/static/T3afHm8Q4GK5ayDfXcILN/_ssgManifest.js" async=""></script></body></html>