<!DOCTYPE html><html lang="en"><head><script>
                        try {
                            var theme = localStorage.getItem('theme');
                            if (theme) {
                                var html = document.querySelector('html');
                                var style = document.createElement('style');
                                var themes = {"default":{"page-bg":"#fff","page-fg":"#000","page-accent-fg":"#666","header-shadow":"#ccc","primary-bg":"#651eea","primary-fg":"#ffffff","inline-code-bg":"#e8e8e8","inline-code-fg":"#444","kbd-bg":"#fff","kbd-fg":"#555","addition-fg":"#00852c","deletion-fg":"#d33947","star-fg":"#bf9a00","tag-bg":"#fafafa","tag-fg":"#727272","link-fg":"#651eea","selection-bg":"rgba(101, 30, 234, 0.2)"},"dark":{"page-bg":"#111","page-fg":"#eee","page-accent-fg":"#aaa","header-shadow":"#333","primary-bg":"#834de8","primary-fg":"#ffffff","inline-code-bg":"#666","inline-code-fg":"#e8e8e8","kbd-bg":"#666","kbd-fg":"#e8e8e8","addition-fg":"#00cc00","deletion-fg":"#ff0000","star-fg":"#f2d043","tag-bg":"#666","tag-fg":"#e8e8e8","link-fg":"#a676ff","selection-bg":"rgba(131, 77, 232, 0.4)"}};

                                html.setAttribute('class', theme);
                                style.innerHTML = 'html { background-color:' + themes[theme]['page-bg'] + '; }';

                                document.head.appendChild(style);
                            }
                        } catch (e) {
                        }
                    </script><meta charSet="utf-8"/><title>Codi.vim + fullscreen buffer</title><link rel="cannonical" href="https://sidneyliebrand.io/blog/codi-vim-fullscreen-buffer"/><link rel="manifest" href="/site.webmanifest"/><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#a676ff"/><link rel="icon" sizes="48x48" type="image/icon" href="/favicon.ico"/><link rel="icon" sizes="16x16" type="image/png" href="/favicon-16x16.png"/><link rel="icon" sizes="32x32" type="image/png" href="/favicon-32x32.png"/><link rel="apple-touch-icon" sizes="180x180" type="image/png" href="/apple-touch-icon.png"/><link rel="alternate" type="application/atom+xml" title="The official https://sidneyliebrand.io Atom feed" href="/atom.xml"/><link rel="alternate" type="application/rss+xml" title="The official https://sidneyliebrand.io RSS feed" href="/feed.xml"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta name="theme-color" content="#ffffff"/><meta name="msapplication-TileColor" content="#ffc40d"/><meta name="robots" content="index, follow"/><meta name="author" content="Sidney Liebrand"/><meta name="description" content="Learn how to set up Codi.vim to create a fullscreen scratch buffer that also works with Vim splits. We will take a look at wrapping the &lt;code&gt;Codi&lt;/code&gt; command and improving the buffer name(s) as seen in &lt;code&gt;:ls&lt;/code&gt;."/><meta property="og:title" content="Codi.vim + fullscreen buffer"/><meta property="og:type" content="website"/><meta property="og:url" content="https://sidneyliebrand.io"/><meta property="og:site_name" content="https://sidneyliebrand.io"/><meta property="og:description" content="Learn how to set up Codi.vim to create a fullscreen scratch buffer that also works with Vim splits. We will take a look at wrapping the &lt;code&gt;Codi&lt;/code&gt; command and improving the buffer name(s) as seen in &lt;code&gt;:ls&lt;/code&gt;."/><meta name="dc:creator" content="Sidney Liebrand"/><meta name="dc:title" content="Codi.vim + fullscreen buffer"/><meta name="dc:description" content="Learn how to set up Codi.vim to create a fullscreen scratch buffer that also works with Vim splits. We will take a look at wrapping the &lt;code&gt;Codi&lt;/code&gt; command and improving the buffer name(s) as seen in &lt;code&gt;:ls&lt;/code&gt;."/><meta name="twitter:card" content="summary"/><meta name="twitter:creator" content="@scbydoooo"/><meta name="next-head-count" content="27"/><link rel="preload" href="/_next/static/css/bd4fbdcdc303b20c9577.css" as="style"/><link rel="stylesheet" href="/_next/static/css/bd4fbdcdc303b20c9577.css" data-n-g=""/><link rel="preload" href="/_next/static/css/e4b4907898ed1f7f0f33.css" as="style"/><link rel="stylesheet" href="/_next/static/css/e4b4907898ed1f7f0f33.css" data-n-p=""/><noscript data-n-css=""></noscript><link rel="preload" href="/_next/static/chunks/main-25074903459b76ecf3d7.js" as="script"/><link rel="preload" href="/_next/static/chunks/webpack-50bee04d1dc61f8adf5b.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.29f9e2f3d4a33bafbaa5.js" as="script"/><link rel="preload" href="/_next/static/chunks/commons.8605d6b0be09876fb5ed.js" as="script"/><link rel="preload" href="/_next/static/chunks/62e1beb3a59d93297dd568d6addecfcbe54736d1.aa64992a2bd5287741c5.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-68e288554fae05524491.js" as="script"/><link rel="preload" href="/_next/static/chunks/89c7192737f5dae381690d2d2c3016603346826c.3fe8d6de12c9023523b3.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/blog/%5Bslug%5D-56fe094f7ebf3ddda401.js" as="script"/></head><body><div id="__next"><div class="layout_application__6A4un"><header class="layout_header__3bVjw"><div class="layout_headerFixed__3v8Yi"><div class="layout_headerContent__18ocK"><a class="layout_logo__319hZ" title="View home page" href="/"><span class="layout_logoTopLeft__2TXmp"></span><span class="layout_logoBottomLeft__1VwSz"></span><span class="layout_logoTopRight__36KVG"></span><span class="layout_logoBottomRight__34Roq"></span></a><nav class="layout_navigation__19PAD"><a title="View curriculum vitae" href="/cv">C.V.</a><a title="Visit Sidney Liebrand&#x27;s GitHub page" href="https://github.com/SidOfc"><figure class="layout_github__23ZLB media_figure__1BF98 media_invertDark__1FMJX"><div class="lazyload-wrapper "><div style="padding-bottom:100%"></div></div></figure></a><div tabindex="0" title="Toggle dark theme" class="dark-mode-toggle_wrapper__bHDaz"><svg fill="#000000" class="dark-mode-toggle_toggle__2rc2d dark-mode-toggle_toggleDark__2f6wj" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"></path><path d="M6.76 4.84l-1.8-1.79-1.41 1.41 1.79 1.79 1.42-1.41zM4 10.5H1v2h3v-2zm9-9.95h-2V3.5h2V.55zm7.45 3.91l-1.41-1.41-1.79 1.79 1.41 1.41 1.79-1.79zm-3.21 13.7l1.79 1.8 1.41-1.41-1.8-1.79-1.4 1.4zM20 10.5v2h3v-2h-3zm-8-5c-3.31 0-6 2.69-6 6s2.69 6 6 6 6-2.69 6-6-2.69-6-6-6zm-1 16.95h2V19.5h-2v2.95zm-7.45-3.91l1.41 1.41 1.79-1.8-1.41-1.41-1.79 1.8z"></path></svg><svg fill="#000000" class="dark-mode-toggle_toggle__2rc2d dark-mode-toggle_toggleLight__1OB2p" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"></path><path d="M9.5,2c-1.82,0-3.53,0.5-5,1.35c2.99,1.73,5,4.95,5,8.65s-2.01,6.92-5,8.65C5.97,21.5,7.68,22,9.5,22c5.52,0,10-4.48,10-10 S15.02,2,9.5,2z"></path></svg></div></nav></div></div></header><main class="layout_content__2V5t2"><article class="post_post__2uzyE"><h1 class="heading_container__2UElk"><a class="heading_link__1aoFY" href="/blog/codi-vim-fullscreen-buffer">Codi.vim + fullscreen buffer</a></h1><span class="post_postData__yktVb text_page-accent-fg__3pARq">By Sidney Liebrand on <!-- -->Aug, 2018<span class="bullet_bullet__2pnOU">â€¢</span>5<!-- --> min read</span><div><figure class="media_figure__1BF98"><div class="lazyload-wrapper "><div style="padding-bottom:58.133971291866025%"></div></div><figcaption class="media_alt__xSx7S">A Codi.vim fullscreen buffer</figcaption></figure><p>Recently I discovered <a href="https://github.com/metakirby5/codi.vim" title="Visit metakirby5/codi.vim on GitHub">codi.vim</a> on <a href="https://vimawesome.com/?q=cat%3Aother" title="Visit vimawesome.com &#x27;Other&#x27; category plugin">vimawesome.com</a>.
It sells itself as an &quot;interactive scratchpad for hackers&quot;.
After playing around with it for 5 minutes I was completely sold.</p><p>I pair program on a weekly basis using various different languages.
I used to turn to a REPL for help but this quickly becomes annoying when trying to write multi-line expressions.
Making a typo in the middle of a <code>do ... end</code> block in Ruby is quite costly:</p><figure class="media_figure__1BF98"><div class="lazyload-wrapper "><div style="padding-bottom:24.20135527589545%"></div></div><figcaption class="media_alt__xSx7S">Multiline expression typo in Pry</figcaption></figure><p>Another thing to note here is that code and results are printed sequentially.
This means that any code you write goes off-screen at least twice as fast because the result is printed below it.</p><p>In case of errors and stack traces it can become a lot worse as well.
Codi solves all of this by allowing you to type in one pane and it prints the results in a separate pane side-by-side:</p><figure class="media_figure__1BF98"><div class="lazyload-wrapper "><div style="padding-bottom:13.649564375605033%"></div></div><figcaption class="media_alt__xSx7S">Demo of Ruby in Codi.vim</figcaption></figure><p>This feature, and the fact that I can toggle this buffer for <em>multiple programming languages</em> using a single mapping blew my mind but as with anything,
it requires some more battle testing to see if it works in common scenario&#x27;s.</p><h2 class="heading_container__2UElk"><a class="heading_anchor__PWj4r" id="battle-testing"></a><a class="heading_link__1aoFY" href="#battle-testing">Battle testing</a></h2><p>This is where I found out that when used with a split, it will not be fullscreen but rather split the current buffer:</p><figure class="media_figure__1BF98"><div class="lazyload-wrapper "><div style="padding-bottom:48.01548886737657%"></div></div><figcaption class="media_alt__xSx7S">Default split behavior</figcaption></figure><p>At this point I started experimenting with a small <a href="https://gist.github.com/SidOfc/5218a7a9f12ed2105a9b052ca8e6707e" title="Visit codi.vim snippet github gist">vimscript snippet</a> in my .vimrc.
Excluding comments and blanks it is 10 LoC.
It wraps the default <code>Codi</code> command in a function which creates an empty buffer in a new tab with the right filetype set before finally running <code>Codi</code> itself.
This creates the fullscreen split that I wanted:</p><figure class="media_figure__1BF98"><div class="lazyload-wrapper "><div style="padding-bottom:48.01548886737657%"></div></div><figcaption class="media_alt__xSx7S">Enhanced split behavior</figcaption></figure><h2 class="heading_container__2UElk"><a class="heading_anchor__PWj4r" id="problem-solved-or-maybe-not"></a><a class="heading_link__1aoFY" href="#problem-solved-or-maybe-not">Problem solved, or maybe not?</a></h2><p>All good so far, but upon closing the buffer, the contents of the buffer are deleted.
While automatically clearing the scratchpad is nice, sometimes I want to go back and forth between the code and the scratchpad to add additional code or compare the existing code with the scratchpad code.</p><p>This required a <a href="https://gist.github.com/SidOfc/3f94244a8b08406710b6669052f66d62" title="Visit second codi.vim snippet github gist">second iteration</a> of the original vimscript snippet.
This time I did not want to delete the buffer but hide it instead, keeping the code that was already written in it.
After hiding the buffer, its <code>tabpagenr()</code> is stored in a dictionary keyed by the filetype of the buffer.</p><p>Then, when toggling codi for a filetype that is stored, switch to that tab instead of opening a new one (there is even a check if that tab actually exists):</p><figure class="media_figure__1BF98"><div class="lazyload-wrapper "><div style="padding-bottom:48.01548886737657%"></div></div><figcaption class="media_alt__xSx7S">Enhanced split behavior version 2</figcaption></figure><p>And there we go! Aside from the fact that the buffer now remains, the name is also <code>scratch::ruby</code>.
This is a bit more descriptive than having just <code>[Scratch]</code> in <code>:ls</code> output when multiple codi buffers of a different filetype are active.</p><h2 class="heading_container__2UElk"><a class="heading_anchor__PWj4r" id="let-s-wrap-it-in-an-issue"></a><a class="heading_link__1aoFY" href="#let-s-wrap-it-in-an-issue">Let&#x27;s wrap it in an issue</a></h2><p>It was a fun experience tweaking this plugin to my liking.
I thought this feature would be so awesome that I even proposed it in an <a href="https://github.com/metakirby5/codi.vim/issues/94" title="View metakirby5/codi.vim issue #94">issue</a>.
Unfortunately it didn&#x27;t make it since it was too workflow specific.</p><p>As you may have been able to see in the issue though, the code in that snippet is <em>slighty</em> different from the example gist linked in this post.
The main difference is this line which resizes codi to 50% of the buffer width whenever a new instance is spawned:</p><pre class="prism-code language-viml" style="background-color:#2a2734;color:#9a86fd"><div class="token-line" style="color:#9a86fd"><span class="token comment" style="color:#9390a1">&quot; since it is fullscreen, I&#x27;d like a 50/50 split</span><span class="token plain"></span></div><div class="token-line" style="color:#9a86fd"><span class="token plain"></span><span class="token keyword" style="color:#ffcc99">let</span><span class="token plain"> g</span><span class="token punctuation" style="color:#6c6783">:</span><span class="token plain">codi</span><span class="token punctuation" style="color:#6c6783">#</span><span class="token plain">width </span><span class="token operator" style="color:#e09142">=</span><span class="token plain"> </span><span class="token function" style="color:#fa60c3">winwidth</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token function" style="color:#fa60c3">winnr</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token plain"> </span><span class="token operator" style="color:#e09142">/</span><span class="token plain"> </span><span class="token number" style="color:#e09142">2</span></div></pre><p>The author thought it would be a nice addition to have percentage width support and for the snippets to live elsewhere for others to use in their .vimrc.
So I went ahead and <a href="https://github.com/metakirby5/codi.vim/pull/95" title="View metakirby5/codi.vim pull request #95">wrote a PR</a> for that instead, this is why you see
<code>let g:codi#width = 50.0</code> in the gists :)</p><h2 class="heading_container__2UElk"><a class="heading_anchor__PWj4r" id="conclusion"></a><a class="heading_link__1aoFY" href="#conclusion">Conclusion</a></h2><p>All in all it was a great experience discovering this plugin.
It is like one of those rare cases with a song where after a few seconds <strong>you just know</strong> <em>&quot;this song is awesome&quot;</em>.
I believe I&#x27;ll be using it for a long time to come for quickly testing and showing some code.</p><p>This also gave me the chance to write my first non-organization bound PR for a project which I like and now also use.
Something which I wanted to do for a long time but couldn&#x27;t really find the right project to contribute to.
I want to thank <a href="https://medium.com/@metakirby5" title="View @metakirby5 on Medium">Ethan Chan</a> for his awesome plugin and for being a kind and friendly maintainer!</p><p>That&#x27;s it! If you want a fullscreen workflow with codi.vim, you have it.
If you want to persist the code in the buffer, you have it.
If you have a great idea, comment on this post!</p><p>Until next time.</p><p>ðŸ‘‹</p></div><a tabindex="0" class="button_button__LVJFE" href="/">Back</a></article></main><footer class="layout_footer__2cV3b"><strong>Â©</strong> sidneyliebrand.io<!-- --> <!-- -->2021</footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"title":"Codi.vim + fullscreen buffer","description":"Learn how to set up Codi.vim to create a fullscreen scratch buffer that also works with Vim splits. We will take a look at wrapping the \u003ccode\u003eCodi\u003c/code\u003e command and improving the buffer name(s) as seen in \u003ccode\u003e:ls\u003c/code\u003e.","published":"2018-08-27T07:55:24Z","readTimeInMinutes":5,"source":{"compiledSource":"\"use strict\";\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i \u003c arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i \u003c sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) \u003e= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i \u003c sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) \u003e= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar layoutProps = {};\nvar MDXLayout = \"wrapper\";\n\nfunction MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(Media, {\n    src: \"/media/posts/codi-banner.png\",\n    alt: \"A Codi.vim fullscreen buffer\",\n    width: \"1672\",\n    height: \"972\",\n    \"class\": \"wide\",\n    mdxType: \"Media\"\n  }), mdx(\"p\", null, \"Recently I discovered \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/metakirby5/codi.vim\",\n    \"title\": \"Visit metakirby5/codi.vim on GitHub\"\n  }, \"codi.vim\"), \" on \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://vimawesome.com/?q=cat%3Aother\",\n    \"title\": \"Visit vimawesome.com 'Other' category plugin\"\n  }, \"vimawesome.com\"), \".\\nIt sells itself as an \\\"interactive scratchpad for hackers\\\".\\nAfter playing around with it for 5 minutes I was completely sold.\"), mdx(\"p\", null, \"I pair program on a weekly basis using various different languages.\\nI used to turn to a REPL for help but this quickly becomes annoying when trying to write multi-line expressions.\\nMaking a typo in the middle of a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"do ... end\"), \" block in Ruby is quite costly:\"), mdx(Media, {\n    src: \"/media/posts/pry-multiline-typo\",\n    alt: \"Multiline expression typo in Pry\",\n    width: \"1033\",\n    height: \"250\",\n    mdxType: \"Media\"\n  }), mdx(\"p\", null, \"Another thing to note here is that code and results are printed sequentially.\\nThis means that any code you write goes off-screen at least twice as fast because the result is printed below it.\"), mdx(\"p\", null, \"In case of errors and stack traces it can become a lot worse as well.\\nCodi solves all of this by allowing you to type in one pane and it prints the results in a separate pane side-by-side:\"), mdx(Media, {\n    src: \"/media/posts/ruby-demo\",\n    alt: \"Demo of Ruby in Codi.vim\",\n    width: \"1033\",\n    height: \"141\",\n    mdxType: \"Media\"\n  }), mdx(\"p\", null, \"This feature, and the fact that I can toggle this buffer for \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"multiple programming languages\"), \" using a single mapping blew my mind but as with anything,\\nit requires some more battle testing to see if it works in common scenario's.\"), mdx(\"h2\", null, \"Battle testing\"), mdx(\"p\", null, \"This is where I found out that when used with a split, it will not be fullscreen but rather split the current buffer:\"), mdx(Media, {\n    src: \"/media/posts/split-behavior\",\n    alt: \"Default split behavior\",\n    width: \"1033\",\n    height: \"496\",\n    mdxType: \"Media\"\n  }), mdx(\"p\", null, \"At this point I started experimenting with a small \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://gist.github.com/SidOfc/5218a7a9f12ed2105a9b052ca8e6707e\",\n    \"title\": \"Visit codi.vim snippet github gist\"\n  }, \"vimscript snippet\"), \" in my .vimrc.\\nExcluding comments and blanks it is 10 LoC.\\nIt wraps the default \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Codi\"), \" command in a function which creates an empty buffer in a new tab with the right filetype set before finally running \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Codi\"), \" itself.\\nThis creates the fullscreen split that I wanted:\"), mdx(Media, {\n    src: \"/media/posts/wrapped-split-behavior\",\n    alt: \"Enhanced split behavior\",\n    width: \"1033\",\n    height: \"496\",\n    mdxType: \"Media\"\n  }), mdx(\"h2\", null, \"Problem solved, or maybe not?\"), mdx(\"p\", null, \"All good so far, but upon closing the buffer, the contents of the buffer are deleted.\\nWhile automatically clearing the scratchpad is nice, sometimes I want to go back and forth between the code and the scratchpad to add additional code or compare the existing code with the scratchpad code.\"), mdx(\"p\", null, \"This required a \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://gist.github.com/SidOfc/3f94244a8b08406710b6669052f66d62\",\n    \"title\": \"Visit second codi.vim snippet github gist\"\n  }, \"second iteration\"), \" of the original vimscript snippet.\\nThis time I did not want to delete the buffer but hide it instead, keeping the code that was already written in it.\\nAfter hiding the buffer, its \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"tabpagenr()\"), \" is stored in a dictionary keyed by the filetype of the buffer.\"), mdx(\"p\", null, \"Then, when toggling codi for a filetype that is stored, switch to that tab instead of opening a new one (there is even a check if that tab actually exists):\"), mdx(Media, {\n    src: \"/media/posts/wrapped-split-behavior-2\",\n    alt: \"Enhanced split behavior version 2\",\n    width: \"1033\",\n    height: \"496\",\n    mdxType: \"Media\"\n  }), mdx(\"p\", null, \"And there we go! Aside from the fact that the buffer now remains, the name is also \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"scratch::ruby\"), \".\\nThis is a bit more descriptive than having just \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"[Scratch]\"), \" in \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \":ls\"), \" output when multiple codi buffers of a different filetype are active.\"), mdx(\"h2\", null, \"Let's wrap it in an issue\"), mdx(\"p\", null, \"It was a fun experience tweaking this plugin to my liking.\\nI thought this feature would be so awesome that I even proposed it in an \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/metakirby5/codi.vim/issues/94\",\n    \"title\": \"View metakirby5/codi.vim issue #94\"\n  }, \"issue\"), \".\\nUnfortunately it didn't make it since it was too workflow specific.\"), mdx(\"p\", null, \"As you may have been able to see in the issue though, the code in that snippet is \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"slighty\"), \" different from the example gist linked in this post.\\nThe main difference is this line which resizes codi to 50% of the buffer width whenever a new instance is spawned:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-viml\"\n  }, \"\\\" since it is fullscreen, I'd like a 50/50 split\\nlet g:codi#width = winwidth(winnr()) / 2\\n\")), mdx(\"p\", null, \"The author thought it would be a nice addition to have percentage width support and for the snippets to live elsewhere for others to use in their .vimrc.\\nSo I went ahead and \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/metakirby5/codi.vim/pull/95\",\n    \"title\": \"View metakirby5/codi.vim pull request #95\"\n  }, \"wrote a PR\"), \" for that instead, this is why you see\\n\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"let g:codi#width = 50.0\"), \" in the gists :)\"), mdx(\"h2\", null, \"Conclusion\"), mdx(\"p\", null, \"All in all it was a great experience discovering this plugin.\\nIt is like one of those rare cases with a song where after a few seconds \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"you just know\"), \" \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"\\\"this song is awesome\\\"\"), \".\\nI believe I'll be using it for a long time to come for quickly testing and showing some code.\"), mdx(\"p\", null, \"This also gave me the chance to write my first non-organization bound PR for a project which I like and now also use.\\nSomething which I wanted to do for a long time but couldn't really find the right project to contribute to.\\nI want to thank \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://medium.com/@metakirby5\",\n    \"title\": \"View @metakirby5 on Medium\"\n  }, \"Ethan Chan\"), \" for his awesome plugin and for being a kind and friendly maintainer!\"), mdx(\"p\", null, \"That's it! If you want a fullscreen workflow with codi.vim, you have it.\\nIf you want to persist the code in the buffer, you have it.\\nIf you have a great idea, comment on this post!\"), mdx(\"p\", null, \"Until next time.\"), mdx(\"p\", null, \"\\uD83D\\uDC4B\"));\n}\n\n;\nMDXContent.isMDXComponent = true;","renderedOutput":"\u003cfigure class=\"media_figure__1BF98\"\u003e\u003cdiv class=\"lazyload-wrapper \"\u003e\u003cdiv style=\"padding-bottom:58.133971291866025%\"\u003e\u003c/div\u003e\u003c/div\u003e\u003cfigcaption class=\"media_alt__xSx7S\"\u003eA Codi.vim fullscreen buffer\u003c/figcaption\u003e\u003c/figure\u003e\u003cp\u003eRecently I discovered \u003ca href=\"https://github.com/metakirby5/codi.vim\" title=\"Visit metakirby5/codi.vim on GitHub\"\u003ecodi.vim\u003c/a\u003e on \u003ca href=\"https://vimawesome.com/?q=cat%3Aother\" title=\"Visit vimawesome.com \u0026#x27;Other\u0026#x27; category plugin\"\u003evimawesome.com\u003c/a\u003e.\nIt sells itself as an \u0026quot;interactive scratchpad for hackers\u0026quot;.\nAfter playing around with it for 5 minutes I was completely sold.\u003c/p\u003e\u003cp\u003eI pair program on a weekly basis using various different languages.\nI used to turn to a REPL for help but this quickly becomes annoying when trying to write multi-line expressions.\nMaking a typo in the middle of a \u003ccode\u003edo ... end\u003c/code\u003e block in Ruby is quite costly:\u003c/p\u003e\u003cfigure class=\"media_figure__1BF98\"\u003e\u003cdiv class=\"lazyload-wrapper \"\u003e\u003cdiv style=\"padding-bottom:24.20135527589545%\"\u003e\u003c/div\u003e\u003c/div\u003e\u003cfigcaption class=\"media_alt__xSx7S\"\u003eMultiline expression typo in Pry\u003c/figcaption\u003e\u003c/figure\u003e\u003cp\u003eAnother thing to note here is that code and results are printed sequentially.\nThis means that any code you write goes off-screen at least twice as fast because the result is printed below it.\u003c/p\u003e\u003cp\u003eIn case of errors and stack traces it can become a lot worse as well.\nCodi solves all of this by allowing you to type in one pane and it prints the results in a separate pane side-by-side:\u003c/p\u003e\u003cfigure class=\"media_figure__1BF98\"\u003e\u003cdiv class=\"lazyload-wrapper \"\u003e\u003cdiv style=\"padding-bottom:13.649564375605033%\"\u003e\u003c/div\u003e\u003c/div\u003e\u003cfigcaption class=\"media_alt__xSx7S\"\u003eDemo of Ruby in Codi.vim\u003c/figcaption\u003e\u003c/figure\u003e\u003cp\u003eThis feature, and the fact that I can toggle this buffer for \u003cem\u003emultiple programming languages\u003c/em\u003e using a single mapping blew my mind but as with anything,\nit requires some more battle testing to see if it works in common scenario\u0026#x27;s.\u003c/p\u003e\u003ch2 class=\"heading_container__2UElk\"\u003e\u003ca class=\"heading_anchor__PWj4r\" id=\"battle-testing\"\u003e\u003c/a\u003e\u003ca class=\"heading_link__1aoFY\" href=\"#battle-testing\"\u003eBattle testing\u003c/a\u003e\u003c/h2\u003e\u003cp\u003eThis is where I found out that when used with a split, it will not be fullscreen but rather split the current buffer:\u003c/p\u003e\u003cfigure class=\"media_figure__1BF98\"\u003e\u003cdiv class=\"lazyload-wrapper \"\u003e\u003cdiv style=\"padding-bottom:48.01548886737657%\"\u003e\u003c/div\u003e\u003c/div\u003e\u003cfigcaption class=\"media_alt__xSx7S\"\u003eDefault split behavior\u003c/figcaption\u003e\u003c/figure\u003e\u003cp\u003eAt this point I started experimenting with a small \u003ca href=\"https://gist.github.com/SidOfc/5218a7a9f12ed2105a9b052ca8e6707e\" title=\"Visit codi.vim snippet github gist\"\u003evimscript snippet\u003c/a\u003e in my .vimrc.\nExcluding comments and blanks it is 10 LoC.\nIt wraps the default \u003ccode\u003eCodi\u003c/code\u003e command in a function which creates an empty buffer in a new tab with the right filetype set before finally running \u003ccode\u003eCodi\u003c/code\u003e itself.\nThis creates the fullscreen split that I wanted:\u003c/p\u003e\u003cfigure class=\"media_figure__1BF98\"\u003e\u003cdiv class=\"lazyload-wrapper \"\u003e\u003cdiv style=\"padding-bottom:48.01548886737657%\"\u003e\u003c/div\u003e\u003c/div\u003e\u003cfigcaption class=\"media_alt__xSx7S\"\u003eEnhanced split behavior\u003c/figcaption\u003e\u003c/figure\u003e\u003ch2 class=\"heading_container__2UElk\"\u003e\u003ca class=\"heading_anchor__PWj4r\" id=\"problem-solved-or-maybe-not\"\u003e\u003c/a\u003e\u003ca class=\"heading_link__1aoFY\" href=\"#problem-solved-or-maybe-not\"\u003eProblem solved, or maybe not?\u003c/a\u003e\u003c/h2\u003e\u003cp\u003eAll good so far, but upon closing the buffer, the contents of the buffer are deleted.\nWhile automatically clearing the scratchpad is nice, sometimes I want to go back and forth between the code and the scratchpad to add additional code or compare the existing code with the scratchpad code.\u003c/p\u003e\u003cp\u003eThis required a \u003ca href=\"https://gist.github.com/SidOfc/3f94244a8b08406710b6669052f66d62\" title=\"Visit second codi.vim snippet github gist\"\u003esecond iteration\u003c/a\u003e of the original vimscript snippet.\nThis time I did not want to delete the buffer but hide it instead, keeping the code that was already written in it.\nAfter hiding the buffer, its \u003ccode\u003etabpagenr()\u003c/code\u003e is stored in a dictionary keyed by the filetype of the buffer.\u003c/p\u003e\u003cp\u003eThen, when toggling codi for a filetype that is stored, switch to that tab instead of opening a new one (there is even a check if that tab actually exists):\u003c/p\u003e\u003cfigure class=\"media_figure__1BF98\"\u003e\u003cdiv class=\"lazyload-wrapper \"\u003e\u003cdiv style=\"padding-bottom:48.01548886737657%\"\u003e\u003c/div\u003e\u003c/div\u003e\u003cfigcaption class=\"media_alt__xSx7S\"\u003eEnhanced split behavior version 2\u003c/figcaption\u003e\u003c/figure\u003e\u003cp\u003eAnd there we go! Aside from the fact that the buffer now remains, the name is also \u003ccode\u003escratch::ruby\u003c/code\u003e.\nThis is a bit more descriptive than having just \u003ccode\u003e[Scratch]\u003c/code\u003e in \u003ccode\u003e:ls\u003c/code\u003e output when multiple codi buffers of a different filetype are active.\u003c/p\u003e\u003ch2 class=\"heading_container__2UElk\"\u003e\u003ca class=\"heading_anchor__PWj4r\" id=\"let-s-wrap-it-in-an-issue\"\u003e\u003c/a\u003e\u003ca class=\"heading_link__1aoFY\" href=\"#let-s-wrap-it-in-an-issue\"\u003eLet\u0026#x27;s wrap it in an issue\u003c/a\u003e\u003c/h2\u003e\u003cp\u003eIt was a fun experience tweaking this plugin to my liking.\nI thought this feature would be so awesome that I even proposed it in an \u003ca href=\"https://github.com/metakirby5/codi.vim/issues/94\" title=\"View metakirby5/codi.vim issue #94\"\u003eissue\u003c/a\u003e.\nUnfortunately it didn\u0026#x27;t make it since it was too workflow specific.\u003c/p\u003e\u003cp\u003eAs you may have been able to see in the issue though, the code in that snippet is \u003cem\u003eslighty\u003c/em\u003e different from the example gist linked in this post.\nThe main difference is this line which resizes codi to 50% of the buffer width whenever a new instance is spawned:\u003c/p\u003e\u003cpre class=\"prism-code language-viml\" style=\"background-color:#2a2734;color:#9a86fd\"\u003e\u003cdiv class=\"token-line\" style=\"color:#9a86fd\"\u003e\u003cspan class=\"token comment\" style=\"color:#9390a1\"\u003e\u0026quot; since it is fullscreen, I\u0026#x27;d like a 50/50 split\u003c/span\u003e\u003cspan class=\"token plain\"\u003e\u003c/span\u003e\u003c/div\u003e\u003cdiv class=\"token-line\" style=\"color:#9a86fd\"\u003e\u003cspan class=\"token plain\"\u003e\u003c/span\u003e\u003cspan class=\"token keyword\" style=\"color:#ffcc99\"\u003elet\u003c/span\u003e\u003cspan class=\"token plain\"\u003e g\u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#6c6783\"\u003e:\u003c/span\u003e\u003cspan class=\"token plain\"\u003ecodi\u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#6c6783\"\u003e#\u003c/span\u003e\u003cspan class=\"token plain\"\u003ewidth \u003c/span\u003e\u003cspan class=\"token operator\" style=\"color:#e09142\"\u003e=\u003c/span\u003e\u003cspan class=\"token plain\"\u003e \u003c/span\u003e\u003cspan class=\"token function\" style=\"color:#fa60c3\"\u003ewinwidth\u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#6c6783\"\u003e(\u003c/span\u003e\u003cspan class=\"token function\" style=\"color:#fa60c3\"\u003ewinnr\u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#6c6783\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#6c6783\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#6c6783\"\u003e)\u003c/span\u003e\u003cspan class=\"token plain\"\u003e \u003c/span\u003e\u003cspan class=\"token operator\" style=\"color:#e09142\"\u003e/\u003c/span\u003e\u003cspan class=\"token plain\"\u003e \u003c/span\u003e\u003cspan class=\"token number\" style=\"color:#e09142\"\u003e2\u003c/span\u003e\u003c/div\u003e\u003c/pre\u003e\u003cp\u003eThe author thought it would be a nice addition to have percentage width support and for the snippets to live elsewhere for others to use in their .vimrc.\nSo I went ahead and \u003ca href=\"https://github.com/metakirby5/codi.vim/pull/95\" title=\"View metakirby5/codi.vim pull request #95\"\u003ewrote a PR\u003c/a\u003e for that instead, this is why you see\n\u003ccode\u003elet g:codi#width = 50.0\u003c/code\u003e in the gists :)\u003c/p\u003e\u003ch2 class=\"heading_container__2UElk\"\u003e\u003ca class=\"heading_anchor__PWj4r\" id=\"conclusion\"\u003e\u003c/a\u003e\u003ca class=\"heading_link__1aoFY\" href=\"#conclusion\"\u003eConclusion\u003c/a\u003e\u003c/h2\u003e\u003cp\u003eAll in all it was a great experience discovering this plugin.\nIt is like one of those rare cases with a song where after a few seconds \u003cstrong\u003eyou just know\u003c/strong\u003e \u003cem\u003e\u0026quot;this song is awesome\u0026quot;\u003c/em\u003e.\nI believe I\u0026#x27;ll be using it for a long time to come for quickly testing and showing some code.\u003c/p\u003e\u003cp\u003eThis also gave me the chance to write my first non-organization bound PR for a project which I like and now also use.\nSomething which I wanted to do for a long time but couldn\u0026#x27;t really find the right project to contribute to.\nI want to thank \u003ca href=\"https://medium.com/@metakirby5\" title=\"View @metakirby5 on Medium\"\u003eEthan Chan\u003c/a\u003e for his awesome plugin and for being a kind and friendly maintainer!\u003c/p\u003e\u003cp\u003eThat\u0026#x27;s it! If you want a fullscreen workflow with codi.vim, you have it.\nIf you want to persist the code in the buffer, you have it.\nIf you have a great idea, comment on this post!\u003c/p\u003e\u003cp\u003eUntil next time.\u003c/p\u003e\u003cp\u003eðŸ‘‹\u003c/p\u003e","scope":{"title":"Codi.vim + fullscreen buffer","description":"Learn how to set up Codi.vim to create a fullscreen scratch buffer that also works with Vim splits. We will take a look at wrapping the \u003ccode\u003eCodi\u003c/code\u003e command and improving the buffer name(s) as seen in \u003ccode\u003e:ls\u003c/code\u003e.","published":"2018-08-27T07:55:24Z"}},"slug":"codi-vim-fullscreen-buffer"},"__N_SSG":true},"page":"/blog/[slug]","query":{"slug":"codi-vim-fullscreen-buffer"},"buildId":"1aSZwTPBO4KXoPqe4snfs","nextExport":false,"isFallback":false,"gsp":true}</script><script nomodule="" src="/_next/static/chunks/polyfills-ff94e68042added27a93.js"></script><script src="/_next/static/chunks/main-25074903459b76ecf3d7.js" async=""></script><script src="/_next/static/chunks/webpack-50bee04d1dc61f8adf5b.js" async=""></script><script src="/_next/static/chunks/framework.29f9e2f3d4a33bafbaa5.js" async=""></script><script src="/_next/static/chunks/commons.8605d6b0be09876fb5ed.js" async=""></script><script src="/_next/static/chunks/62e1beb3a59d93297dd568d6addecfcbe54736d1.aa64992a2bd5287741c5.js" async=""></script><script src="/_next/static/chunks/pages/_app-68e288554fae05524491.js" async=""></script><script src="/_next/static/chunks/89c7192737f5dae381690d2d2c3016603346826c.3fe8d6de12c9023523b3.js" async=""></script><script src="/_next/static/chunks/pages/blog/%5Bslug%5D-56fe094f7ebf3ddda401.js" async=""></script><script src="/_next/static/1aSZwTPBO4KXoPqe4snfs/_buildManifest.js" async=""></script><script src="/_next/static/1aSZwTPBO4KXoPqe4snfs/_ssgManifest.js" async=""></script></body></html>