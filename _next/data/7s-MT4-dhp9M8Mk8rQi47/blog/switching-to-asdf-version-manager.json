{"pageProps":{"title":"Switching to ASDF version manager","description":"Depending on how many languages you program in, getting all their version managers installed, added to <code>$PATH</code>, configured etc... becomes quite a pain when setting up a new system, or even figuring out how this one works because you've used something else for a while.","published":"2017-08-15T21:04:44Z","readTimeInMinutes":5,"source":{"compiledSource":"\"use strict\";\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar layoutProps = {};\nvar MDXLayout = \"wrapper\";\n\nfunction MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(Media, {\n    invertDark: true,\n    src: \"/media/posts/asdfmovie-banner.svg\",\n    alt: \"asdfmovie quote from youtube\",\n    width: \"356\",\n    height: \"200\",\n    mdxType: \"Media\"\n  }), mdx(\"p\", null, \"Version management tools for programming languages are a common thing in (web-)developer land.\\nI started to wonder if there was an all-in-one version management tool.\\nI want this because as I learn more and do more, I will need more version managers that all\\nslow down my shell. So lets prevent that shall we!\"), mdx(\"p\", null, \"I've always used \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://rvm.io\",\n    \"title\": \"Visit rvm.io\"\n  }, \"RVM\"), \" in the past without problem, the shell took about half a\\nsecond to load and that was acceptable. I mean, you can't have it all right :)\"), mdx(\"p\", null, \"Aside from sourcing good old RVM, recently I also added \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/creationix/nvm\",\n    \"title\": \"Visit creationix/nvm on GitHub\"\n  }, \"NVM\"), \" to the stack.\\nNo problem I thought! Until I resourced my shell and had to wait for two seconds... Yeah,\\nthis goes beyond the \\\"you can't have it all\\\" criteria. I often open a shell for a quick ssh session,\\nrunning tests, git commands, etc... There has to be a better way!\"), mdx(\"h2\", null, \"A universal version manager\"), mdx(\"p\", null, \"Enter \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/asdf-vm/asdf\",\n    \"title\": \"Visit asdf-vm/asdf on GitHub\"\n  }, \"ASDF\"), \" and \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/asdf-vm/asdf-plugins\",\n    \"title\": \"Visit asdf-vm/asdf-plugins on github\"\n  }, \"friends\"), \".\\nASDF is a universal and extensible version management tool for many \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/asdf-vm/asdf-plugins\",\n    \"title\": \"Visit asdf-vm/asdf-plugins on GitHub\"\n  }, \"programming languages\"), \".\\nIt provides the version management tooling and allows you to choose which plugins you would like to install.\\nLike Node.js, Ruby or Python for instance.\"), mdx(\"p\", null, \"To get started, go to their \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/asdf-vm/asdf\",\n    \"title\": \"Visit asdf-vm/asdf on GitHub\"\n  }, \"github page\"), \" and install ASDF.\"), mdx(\"p\", null, \"After installing, you'll only have the core of ASDF.\\nWe'll need to extend it by adding plugins to it and using those to install versions\\nof the language we want to use.\"), mdx(\"p\", null, \"The list of plugins you'll install will differ from what I use.\\nI am a front end developer that works with Ruby / Rails as well as React.\\nFrom time to time I also muck around in \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://crystal-lang.org/\",\n    \"title\": \"Visit crystal-lang.org\"\n  }, \"Crystal\"), \" or \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://www.rust-lang.org/en-US/\",\n    \"title\": \"Visit rust-lang.org\"\n  }, \"Rust\"), \"\\n(both of which are awesome \", \"\\u2014\", \" check them out!). So I would head to the \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/asdf-vm/asdf-plugins\",\n    \"title\": \"Visit asdf-vm plugins page\"\n  }, \"plugins page\"), \"\\nand look for plugins for those programming languages. The following is what I use:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/asdf-vm/asdf-ruby\",\n    \"title\": \"Visit asdf-vm-asdf-ruby\"\n  }, \"asdf-vm/asdf-ruby\"))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/asdf-vm/asdf-nodejs\",\n    \"title\": \"Visit asdf-vm/asdf-nodejs on GitHub\"\n  }, \"asdf-vm/asdf-nodejs\"))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/code-lever/asdf-rust\",\n    \"title\": \"Visit code-lever/asdf-rust on GitHub\"\n  }, \"code-lever/asdf-rust\"))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/asdf-community/asdf-crystal\",\n    \"title\": \"Visit asdf-community/asdf-crystal on GitHub\"\n  }, \"asdf-community/asdf-crystal\")))), mdx(\"p\", null, \"There are installation instructions on every plugin repo. Sometimes, steps\\nfor migrating from your old version manager are also included.\\nFor Ruby using RVM, the migration is as easy as moving \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"~/.rvm/rubies\"), \" to \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"~/.asdf/installs/ruby.\")), mdx(\"h2\", null, \"Sounds smooth, any bumps along the way?\"), mdx(\"p\", null, \"It could be that gems and even Ruby versions will not work. If you run into this issue,\\nrun \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"asdf reshim [language]\"), \" and restart your shell to fix any broken paths.\"), mdx(\"p\", null, \"If the problem persists, you can run \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"asdf current [language]\"), \" to find the current version.\\nIt will also print the path to the version file that defined it.\\nThis is much simpler than running a mixture of \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"ls\"), \" and \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"grep\"), \" to find out where that version comes from.\"), mdx(\"p\", null, \"If you see the following after running \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"asdf current [language]\"), \":\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"No version set for \", \"[language]\")), mdx(\"p\", null, \"It means that you haven't set or installed any versions for that language.\\nIf you haven't installed a version, run \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"asdf list-all [language]\"), \".\\nThis will list all the available versions that ASDF can install. Choose a version and run\\n\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"asdf install [language] [version]\"), \" to install it.\"), mdx(\"p\", null, \"If the plugin still doesn't work, run \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"asdf global [language] [version]\"), \" which will create a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"~/.tool-versions\"), \" file.\\nThe language and version info will be stored and ASDF will attempt to load that version.\"), mdx(\"p\", null, \"To set a specific version in a directory, \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"cd\"), \" to it and run\\n\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"asdf local [language] [version]\"), \". ASDF will use a local version over a global version.\"), mdx(\"p\", null, \"After migrating from RVM, I had to rename my rubies.\\nRVM stored them in the format of \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"ruby-[major]-[minor]-[patch]-p[ruby-patch]\"), \".\\nThis caused ASDF not to switch after running \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"asdf local ruby 2.4.1\"), \" because the folder\\nname differed from the version input. Which meant I had to run \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"asdf local ruby ruby-2.4.1\"), \".\\nIf a language is already specified, I'd rather not bother typing it again.\\nRemoving the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"ruby-\"), \" prefix from the directory names in \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"~/.asdf/installs/ruby\"), \" fixed it.\\nRunning \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"asdf local ruby 2.4.1\"), \" switched perfect afterwards.\"), mdx(\"h2\", null, \"Extra's\"), mdx(\"p\", null, \"A feature of the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"asdf-ruby\"), \" plugin is that it can install a set of \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/asdf-vm/asdf-ruby#default-gems\",\n    \"title\": \"Visit asdf-vm/asdf-ruby section on default gems\"\n  }, \"default gems\"), \"\\nspecified in a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"~/.default-gems file\"), \". I love this one as I'll never have to run \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"gem install pry\"), \" again!\"), mdx(\"p\", null, \"What RVM additionally offers that I have not seen in ASDF is the option to create a gemset.\\nThis was and still is a useful feature if you're doing Ruby projects involving lots of different\\ngems or even testing with specific gems. I rarely felt the need to create a gemset myself.\\nThus not having this feature did not have a lot of impact on my workflow (yet).\\nI'm not sure if NVM adds any extra functionality, either way I think ASDF will fill the\\ngaps because of how it was designed and how it can be extended.\"), mdx(\"p\", null, \"Finally, I added a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"~/.asdfrc\"), \" file containing: \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"legacy_version_file = yes\"), \".\\nThis enables ASDF read all version files we know and love.\"), mdx(\"h2\", null, \"Conclusion\"), mdx(\"p\", null, \"As for my shell time, it's back where it was with only RVM. But nothing messes with my \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"cd\"), \" command anymore.\\nI also don't have to keep adding these noisy \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"source\"), \" lines to \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/SidOfc/dotfiles\",\n    \"title\": \"Visit SidOfc/dotfiles on GitHub\"\n  }, \"my dotfiles\"), \".\"), mdx(\"p\", null, \"ASDF is still quite new and at the time of writing, there are few integrations.\\nThis means that if you use \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"capistrano\"), \" to deploy using RVM for example, you won't be able to do that using ASDF just yet.\\nBut as mentioned above, someone somewhere will fix that gap or you could give it a shot yourself!\"), mdx(\"p\", null, \"I hope you've learned something from this post and also that you will choose to switch to ASDF.\\nNot because it's better per-se but because it's universal and extensible and you now no longer have\\nto worry about version managers! Install a plugin and you're done! A plugin system and a management system,\\nbundled in 3 simple commands with a common interface. ASDF and I will be friends for a long time :)\"), mdx(\"p\", null, \"Cheers!\"), mdx(\"p\", null, mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Many thanks to \", mdx(\"a\", {\n    parentName: \"em\",\n    \"href\": \"https://medium.com/@vvangemert\",\n    \"title\": \"Visit Vincent van Gemert on Medium\"\n  }, \"@vvgemert\"), \" for proofreading!\")), mdx(\"p\", null, \"\\uD83D\\uDC4B\"));\n}\n\n;\nMDXContent.isMDXComponent = true;","renderedOutput":"<figure class=\"media_figure__1BF98 media_invertDark__1FMJX\"><div class=\"media_relative__3Dzxp\" style=\"padding-bottom:56.17977528089888%\"><img loading=\"lazy\" class=\"media_media__1ZpPG\" src=\"/media/posts/asdfmovie-banner.svg\" alt=\"asdfmovie quote from youtube\"/></div><figcaption class=\"media_alt__xSx7S\">asdfmovie quote from youtube</figcaption></figure><p>Version management tools for programming languages are a common thing in (web-)developer land.\nI started to wonder if there was an all-in-one version management tool.\nI want this because as I learn more and do more, I will need more version managers that all\nslow down my shell. So lets prevent that shall we!</p><p>I&#x27;ve always used <a href=\"https://rvm.io\" title=\"Visit rvm.io\">RVM</a> in the past without problem, the shell took about half a\nsecond to load and that was acceptable. I mean, you can&#x27;t have it all right :)</p><p>Aside from sourcing good old RVM, recently I also added <a href=\"https://github.com/creationix/nvm\" title=\"Visit creationix/nvm on GitHub\">NVM</a> to the stack.\nNo problem I thought! Until I resourced my shell and had to wait for two seconds... Yeah,\nthis goes beyond the &quot;you can&#x27;t have it all&quot; criteria. I often open a shell for a quick ssh session,\nrunning tests, git commands, etc... There has to be a better way!</p><h2 class=\"heading_container__2UElk\"><a class=\"heading_anchor__PWj4r\" id=\"a-universal-version-manager\"></a><a class=\"heading_link__1aoFY\" href=\"#a-universal-version-manager\">A universal version manager</a></h2><p>Enter <a href=\"https://github.com/asdf-vm/asdf\" title=\"Visit asdf-vm/asdf on GitHub\">ASDF</a> and <a href=\"https://github.com/asdf-vm/asdf-plugins\" title=\"Visit asdf-vm/asdf-plugins on github\">friends</a>.\nASDF is a universal and extensible version management tool for many <a href=\"https://github.com/asdf-vm/asdf-plugins\" title=\"Visit asdf-vm/asdf-plugins on GitHub\">programming languages</a>.\nIt provides the version management tooling and allows you to choose which plugins you would like to install.\nLike Node.js, Ruby or Python for instance.</p><p>To get started, go to their <a href=\"https://github.com/asdf-vm/asdf\" title=\"Visit asdf-vm/asdf on GitHub\">github page</a> and install ASDF.</p><p>After installing, you&#x27;ll only have the core of ASDF.\nWe&#x27;ll need to extend it by adding plugins to it and using those to install versions\nof the language we want to use.</p><p>The list of plugins you&#x27;ll install will differ from what I use.\nI am a front end developer that works with Ruby / Rails as well as React.\nFrom time to time I also muck around in <a href=\"https://crystal-lang.org/\" title=\"Visit crystal-lang.org\">Crystal</a> or <a href=\"https://www.rust-lang.org/en-US/\" title=\"Visit rust-lang.org\">Rust</a>\n(both of which are awesome <!-- -->â€”<!-- --> check them out!). So I would head to the <a href=\"https://github.com/asdf-vm/asdf-plugins\" title=\"Visit asdf-vm plugins page\">plugins page</a>\nand look for plugins for those programming languages. The following is what I use:</p><ul><li><p><a href=\"https://github.com/asdf-vm/asdf-ruby\" title=\"Visit asdf-vm-asdf-ruby\">asdf-vm/asdf-ruby</a></p></li><li><p><a href=\"https://github.com/asdf-vm/asdf-nodejs\" title=\"Visit asdf-vm/asdf-nodejs on GitHub\">asdf-vm/asdf-nodejs</a></p></li><li><p><a href=\"https://github.com/code-lever/asdf-rust\" title=\"Visit code-lever/asdf-rust on GitHub\">code-lever/asdf-rust</a></p></li><li><p><a href=\"https://github.com/asdf-community/asdf-crystal\" title=\"Visit asdf-community/asdf-crystal on GitHub\">asdf-community/asdf-crystal</a></p></li></ul><p>There are installation instructions on every plugin repo. Sometimes, steps\nfor migrating from your old version manager are also included.\nFor Ruby using RVM, the migration is as easy as moving <code>~/.rvm/rubies</code> to <code>~/.asdf/installs/ruby.</code></p><h2 class=\"heading_container__2UElk\"><a class=\"heading_anchor__PWj4r\" id=\"sounds-smooth-any-bumps-along-the-way\"></a><a class=\"heading_link__1aoFY\" href=\"#sounds-smooth-any-bumps-along-the-way\">Sounds smooth, any bumps along the way?</a></h2><p>It could be that gems and even Ruby versions will not work. If you run into this issue,\nrun <code>asdf reshim [language]</code> and restart your shell to fix any broken paths.</p><p>If the problem persists, you can run <code>asdf current [language]</code> to find the current version.\nIt will also print the path to the version file that defined it.\nThis is much simpler than running a mixture of <code>ls</code> and <code>grep</code> to find out where that version comes from.</p><p>If you see the following after running <code>asdf current [language]</code>:</p><blockquote><p>No version set for <!-- -->[language]</p></blockquote><p>It means that you haven&#x27;t set or installed any versions for that language.\nIf you haven&#x27;t installed a version, run <code>asdf list-all [language]</code>.\nThis will list all the available versions that ASDF can install. Choose a version and run\n<code>asdf install [language] [version]</code> to install it.</p><p>If the plugin still doesn&#x27;t work, run <code>asdf global [language] [version]</code> which will create a <code>~/.tool-versions</code> file.\nThe language and version info will be stored and ASDF will attempt to load that version.</p><p>To set a specific version in a directory, <code>cd</code> to it and run\n<code>asdf local [language] [version]</code>. ASDF will use a local version over a global version.</p><p>After migrating from RVM, I had to rename my rubies.\nRVM stored them in the format of <code>ruby-[major]-[minor]-[patch]-p[ruby-patch]</code>.\nThis caused ASDF not to switch after running <code>asdf local ruby 2.4.1</code> because the folder\nname differed from the version input. Which meant I had to run <code>asdf local ruby ruby-2.4.1</code>.\nIf a language is already specified, I&#x27;d rather not bother typing it again.\nRemoving the <code>ruby-</code> prefix from the directory names in <code>~/.asdf/installs/ruby</code> fixed it.\nRunning <code>asdf local ruby 2.4.1</code> switched perfect afterwards.</p><h2 class=\"heading_container__2UElk\"><a class=\"heading_anchor__PWj4r\" id=\"extra-s\"></a><a class=\"heading_link__1aoFY\" href=\"#extra-s\">Extra&#x27;s</a></h2><p>A feature of the <code>asdf-ruby</code> plugin is that it can install a set of <a href=\"https://github.com/asdf-vm/asdf-ruby#default-gems\" title=\"Visit asdf-vm/asdf-ruby section on default gems\">default gems</a>\nspecified in a <code>~/.default-gems file</code>. I love this one as I&#x27;ll never have to run <code>gem install pry</code> again!</p><p>What RVM additionally offers that I have not seen in ASDF is the option to create a gemset.\nThis was and still is a useful feature if you&#x27;re doing Ruby projects involving lots of different\ngems or even testing with specific gems. I rarely felt the need to create a gemset myself.\nThus not having this feature did not have a lot of impact on my workflow (yet).\nI&#x27;m not sure if NVM adds any extra functionality, either way I think ASDF will fill the\ngaps because of how it was designed and how it can be extended.</p><p>Finally, I added a <code>~/.asdfrc</code> file containing: <code>legacy_version_file = yes</code>.\nThis enables ASDF read all version files we know and love.</p><h2 class=\"heading_container__2UElk\"><a class=\"heading_anchor__PWj4r\" id=\"conclusion\"></a><a class=\"heading_link__1aoFY\" href=\"#conclusion\">Conclusion</a></h2><p>As for my shell time, it&#x27;s back where it was with only RVM. But nothing messes with my <code>cd</code> command anymore.\nI also don&#x27;t have to keep adding these noisy <code>source</code> lines to <a href=\"https://github.com/SidOfc/dotfiles\" title=\"Visit SidOfc/dotfiles on GitHub\">my dotfiles</a>.</p><p>ASDF is still quite new and at the time of writing, there are few integrations.\nThis means that if you use <code>capistrano</code> to deploy using RVM for example, you won&#x27;t be able to do that using ASDF just yet.\nBut as mentioned above, someone somewhere will fix that gap or you could give it a shot yourself!</p><p>I hope you&#x27;ve learned something from this post and also that you will choose to switch to ASDF.\nNot because it&#x27;s better per-se but because it&#x27;s universal and extensible and you now no longer have\nto worry about version managers! Install a plugin and you&#x27;re done! A plugin system and a management system,\nbundled in 3 simple commands with a common interface. ASDF and I will be friends for a long time :)</p><p>Cheers!</p><p><em>Many thanks to <a href=\"https://medium.com/@vvangemert\" title=\"Visit Vincent van Gemert on Medium\">@vvgemert</a> for proofreading!</em></p><p>ðŸ‘‹</p>","scope":{"title":"Switching to ASDF version manager","description":"Depending on how many languages you program in, getting all their version managers installed, added to <code>$PATH</code>, configured etc... becomes quite a pain when setting up a new system, or even figuring out how this one works because you've used something else for a while.","published":"2017-08-15T21:04:44Z"}},"slug":"switching-to-asdf-version-manager"},"__N_SSG":true}