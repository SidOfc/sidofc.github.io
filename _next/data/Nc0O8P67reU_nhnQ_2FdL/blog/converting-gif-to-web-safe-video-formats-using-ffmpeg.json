{"pageProps":{"title":"Converting .gif to web-safe video formats using ffmpeg","description":"This post shows how to convert .gif images to web-safe video formats using ffmpeg cli. These formats produce smaller files which means less data to load!","published":"2021-02-14T18:30:00Z","readTimeInMinutes":3,"source":{"compiledSource":"\"use strict\";\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar layoutProps = {};\nvar MDXLayout = \"wrapper\";\n\nfunction MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"When recording animated content for my blog posts I use a gif recorder. However,\\nusing \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://caniuse.com/?search=webm\",\n    \"title\": \"View caniuse.com webm support\"\n  }, \".webm\"), \" or \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://caniuse.com/?search=mp4\",\n    \"title\": \"View caniuse.com mp4 support\"\n  }, \".mp4\"), \"\\nfiles is usually more efficient and works in pretty much every major browser today.\"), mdx(\"h2\", null, \"Convert .gif to .webm\"), mdx(\"p\", null, \"To convert a .gif file to .webm, use the following command:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-shell\"\n  }, \"ffmpeg -i file.gif -c vp9 -b:v 0 -crf 40 file.webm\\n\")), mdx(\"p\", null, \"This will output a .webm file that works in most browsers, but what are these options\\ndoing exactly? Let's dive in:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"-i\"), \": Specifies the \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"input file\"), \", in this case \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"file.gif\"), \".\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"-c\"), \": Specifies the \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"codec\"), \", \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"vp9\"), \" works in most browsers.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"-b:v\"), \": Specifies the \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"video bitrate\"), \", \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"0\"), \" allows us to specify the quality via the \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"-crf\"), \" option.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"-crf\"), \": Specifies the \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"quality\"), \", ranges between 0-63, lower means better quality.\")), mdx(\"p\", null, \"More detailed explanations about the options can be found \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://trac.ffmpeg.org/wiki/Encode/VP9\",\n    \"title\": \"Visit ffmpeg VP9 encode page\"\n  }, \"here\"), \".\"), mdx(\"p\", null, \"These .webm files will suffer a little bit of quality loss, but if more quality is\\nneeded the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"-crf\"), \" flag can be set to a lower value easily. With these settings\\nthe .webm file is (on average) \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"60%\"), \" smaller than the .gif file.\"), mdx(\"p\", null, \"When we check caniuse, \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://caniuse.com/?search=webm\",\n    \"title\": \"View caniuse.com webm support\"\n  }, \".webm support\"), \" looks good too, mostly.\\nIndeed the only real reason today to use .mp4 on the web is to support Internet Explorer.\"), mdx(Caniuse, {\n    data: {\n      \"id\": \"webm\",\n      \"prefixes\": {\n        \"ie\": \"ms\",\n        \"edge\": \"webkit\",\n        \"firefox\": \"moz\",\n        \"chrome\": \"webkit\",\n        \"safari\": \"webkit\",\n        \"opera\": \"webkit\",\n        \"and_ff\": \"moz\",\n        \"and_chr\": \"webkit\",\n        \"ios_saf\": \"webkit\",\n        \"op_mob\": \"o\",\n        \"op_mini\": \"o\",\n        \"android\": \"webkit\",\n        \"samsung\": \"webkit\",\n        \"and_uc\": \"webkit\"\n      },\n      \"updated\": 1613977521000,\n      \"notesByNum\": [{\n        \"note\": 1,\n        \"text\": \"<span>Older browser versions did not support all codecs.</span>\"\n      }, {\n        \"note\": 2,\n        \"text\": \"<span>Older Edge versions did not support progressive sources.</span>\"\n      }, {\n        \"note\": 3,\n        \"text\": \"<span>Can be enabled in Internet Explorer and Safari for MacOS by manually installing the codecs in the operating system.</span>\"\n      }, {\n        \"note\": 4,\n        \"text\": \"<span>Supports <a href=\\\"https://webkit.org/blog/8672\\\">VP8 codec used in WebRTC</a>.</span>\"\n      }, {\n        \"note\": 5,\n        \"text\": \"<span>Supports <a href=\\\"https://webkit.org/blog/10929\\\">VP9 codec used in WebRTC</a> (off by default.)</span>\"\n      }, {\n        \"note\": 6,\n        \"text\": \"<span>Supports <a href=\\\"https://bugs.webkit.org/show_bug.cgi?id=216652#c1\\\">VP9 WebM used in MediaSource</a> on <a href=\\\"https://trac.webkit.org/changeset/264747/webkit\\\">macOS Big Sur or later.</a></span>\"\n      }],\n      \"title\": \"WebM video format\",\n      \"description\": \"<span>Multimedia format designed to provide a royalty-free, high-quality open video compression format for use with HTML5 video. WebM supports the video codec VP8 and VP9.</span>\",\n      \"status\": \"other\",\n      \"spec\": \"https://www.webmproject.org\",\n      \"usage\": {\n        \"y\": 76.78,\n        \"a\": 18.66\n      },\n      \"stats\": [{\n        \"id\": \"ie\",\n        \"name\": \"IE\",\n        \"versions\": [{\n          \"version\": \"5.5-8\",\n          \"era\": -3,\n          \"notes\": [],\n          \"flags\": [\"n\"],\n          \"disabled\": false,\n          \"prefixed\": false\n        }, {\n          \"version\": \"9-10\",\n          \"era\": -1,\n          \"notes\": [3],\n          \"flags\": [\"#3\", \"n\"],\n          \"disabled\": false,\n          \"prefixed\": false\n        }, {\n          \"version\": \"11\",\n          \"era\": 0,\n          \"flags\": [\"#3\", \"n\"],\n          \"notes\": [3],\n          \"disabled\": false,\n          \"prefixed\": false\n        }]\n      }, {\n        \"id\": \"edge\",\n        \"name\": \"Edge\",\n        \"versions\": [{\n          \"version\": \"12-13\",\n          \"era\": -14,\n          \"notes\": [],\n          \"flags\": [\"n\"],\n          \"disabled\": false,\n          \"prefixed\": false\n        }, {\n          \"version\": \"14-18\",\n          \"era\": -9,\n          \"notes\": [1, 2],\n          \"flags\": [\"a\", \"#1\", \"#2\"],\n          \"disabled\": false,\n          \"prefixed\": false\n        }, {\n          \"version\": \"79-87\",\n          \"era\": -1,\n          \"notes\": [],\n          \"flags\": [\"y\"],\n          \"disabled\": false,\n          \"prefixed\": false\n        }, {\n          \"version\": \"88\",\n          \"era\": 0,\n          \"flags\": [\"y\"],\n          \"notes\": [],\n          \"disabled\": false,\n          \"prefixed\": false\n        }]\n      }, {\n        \"id\": \"firefox\",\n        \"name\": \"Firefox\",\n        \"versions\": [{\n          \"version\": \"2-3.6\",\n          \"era\": -82,\n          \"notes\": [],\n          \"flags\": [\"n\"],\n          \"disabled\": false,\n          \"prefixed\": false\n        }, {\n          \"version\": \"4-27\",\n          \"era\": -58,\n          \"notes\": [1],\n          \"flags\": [\"a\", \"#1\"],\n          \"disabled\": false,\n          \"prefixed\": false\n        }, {\n          \"version\": \"28-84\",\n          \"era\": -1,\n          \"notes\": [],\n          \"flags\": [\"y\"],\n          \"disabled\": false,\n          \"prefixed\": false\n        }, {\n          \"version\": \"85\",\n          \"era\": 0,\n          \"flags\": [\"y\"],\n          \"notes\": [],\n          \"disabled\": false,\n          \"prefixed\": false\n        }, {\n          \"version\": \"86-87\",\n          \"era\": 2,\n          \"notes\": [],\n          \"flags\": [\"y\"],\n          \"disabled\": false,\n          \"prefixed\": false\n        }]\n      }, {\n        \"id\": \"chrome\",\n        \"name\": \"Chrome\",\n        \"versions\": [{\n          \"version\": \"4-5\",\n          \"era\": -82,\n          \"notes\": [],\n          \"flags\": [\"n\"],\n          \"disabled\": false,\n          \"prefixed\": false\n        }, {\n          \"version\": \"6-24\",\n          \"era\": -63,\n          \"notes\": [1],\n          \"flags\": [\"a\", \"#1\"],\n          \"disabled\": false,\n          \"prefixed\": false\n        }, {\n          \"version\": \"25-87\",\n          \"era\": -1,\n          \"notes\": [],\n          \"flags\": [\"y\"],\n          \"disabled\": false,\n          \"prefixed\": false\n        }, {\n          \"version\": \"88\",\n          \"era\": 0,\n          \"flags\": [\"y\"],\n          \"notes\": [],\n          \"disabled\": false,\n          \"prefixed\": false\n        }, {\n          \"version\": \"89-91\",\n          \"era\": 3,\n          \"notes\": [],\n          \"flags\": [\"y\"],\n          \"disabled\": false,\n          \"prefixed\": false\n        }]\n      }, {\n        \"id\": \"safari\",\n        \"name\": \"Safari\",\n        \"versions\": [{\n          \"version\": \"3.1\",\n          \"era\": -20,\n          \"flags\": [\"n\"],\n          \"notes\": [],\n          \"disabled\": false,\n          \"prefixed\": false\n        }, {\n          \"version\": \"3.2-5.1\",\n          \"era\": -16,\n          \"notes\": [],\n          \"flags\": [\"n\"],\n          \"disabled\": false,\n          \"prefixed\": false\n        }, {\n          \"version\": \"6-12\",\n          \"era\": -4,\n          \"notes\": [3],\n          \"flags\": [\"#3\", \"n\"],\n          \"disabled\": false,\n          \"prefixed\": false\n        }, {\n          \"version\": \"12.1-13.1\",\n          \"era\": -1,\n          \"notes\": [4],\n          \"flags\": [\"a\", \"#4\"],\n          \"disabled\": false,\n          \"prefixed\": false\n        }, {\n          \"version\": \"14\",\n          \"era\": 0,\n          \"flags\": [\"a\", \"#4\", \"#5\", \"#6\"],\n          \"notes\": [4, 5, 6],\n          \"disabled\": false,\n          \"prefixed\": false\n        }, {\n          \"version\": \"TP\",\n          \"era\": 1,\n          \"flags\": [\"a\", \"#4\", \"#5\", \"#6\"],\n          \"notes\": [4, 5, 6],\n          \"disabled\": false,\n          \"prefixed\": false\n        }]\n      }, {\n        \"id\": \"opera\",\n        \"name\": \"Opera\",\n        \"versions\": [{\n          \"version\": \"9-10.5\",\n          \"era\": -64,\n          \"notes\": [],\n          \"flags\": [\"n\"],\n          \"disabled\": false,\n          \"prefixed\": false\n        }, {\n          \"version\": \"10.6-15\",\n          \"era\": -56,\n          \"notes\": [1],\n          \"flags\": [\"a\", \"#1\"],\n          \"disabled\": false,\n          \"prefixed\": false\n        }, {\n          \"version\": \"16-72\",\n          \"era\": -1,\n          \"notes\": [],\n          \"flags\": [\"y\"],\n          \"disabled\": false,\n          \"prefixed\": false\n        }, {\n          \"version\": \"73\",\n          \"era\": 0,\n          \"flags\": [\"y\"],\n          \"notes\": [],\n          \"disabled\": false,\n          \"prefixed\": false\n        }]\n      }, {\n        \"id\": \"and_ff\",\n        \"name\": \"Firefox for Android\",\n        \"versions\": [{\n          \"version\": \"85\",\n          \"era\": 0,\n          \"flags\": [\"y\"],\n          \"notes\": [],\n          \"disabled\": false,\n          \"prefixed\": false\n        }]\n      }, {\n        \"id\": \"and_chr\",\n        \"name\": \"Chrome for Android\",\n        \"versions\": [{\n          \"version\": \"88\",\n          \"era\": 0,\n          \"flags\": [\"y\"],\n          \"notes\": [],\n          \"disabled\": false,\n          \"prefixed\": false\n        }]\n      }, {\n        \"id\": \"ios_saf\",\n        \"name\": \"iOS Safari\",\n        \"versions\": [{\n          \"version\": \"3.2-12.1\",\n          \"era\": -6,\n          \"notes\": [],\n          \"flags\": [\"n\"],\n          \"disabled\": false,\n          \"prefixed\": false\n        }, {\n          \"version\": \"12.2-13.7\",\n          \"era\": -1,\n          \"notes\": [4],\n          \"flags\": [\"a\", \"#4\"],\n          \"disabled\": false,\n          \"prefixed\": false\n        }, {\n          \"version\": \"14.0-14.4\",\n          \"era\": 0,\n          \"flags\": [\"a\", \"#4\", \"#5\"],\n          \"notes\": [4, 5],\n          \"disabled\": false,\n          \"prefixed\": false\n        }]\n      }, {\n        \"id\": \"op_mob\",\n        \"name\": \"Opera Mobile\",\n        \"versions\": [{\n          \"version\": \"10-12.1\",\n          \"era\": -1,\n          \"notes\": [],\n          \"flags\": [\"n\"],\n          \"disabled\": false,\n          \"prefixed\": false\n        }, {\n          \"version\": \"59\",\n          \"era\": 0,\n          \"flags\": [\"a\", \"#1\"],\n          \"notes\": [1],\n          \"disabled\": false,\n          \"prefixed\": false\n        }]\n      }, {\n        \"id\": \"op_mini\",\n        \"name\": \"Opera Mini\",\n        \"versions\": [{\n          \"version\": \"all\",\n          \"era\": 0,\n          \"flags\": [\"n\"],\n          \"notes\": [],\n          \"disabled\": false,\n          \"prefixed\": false\n        }]\n      }, {\n        \"id\": \"android\",\n        \"name\": \"Android Browser\",\n        \"versions\": [{\n          \"version\": \"2.1-2.2\",\n          \"era\": -8,\n          \"notes\": [],\n          \"flags\": [\"n\"],\n          \"disabled\": false,\n          \"prefixed\": false\n        }, {\n          \"version\": \"2.3-4.4.4\",\n          \"era\": -1,\n          \"notes\": [1],\n          \"flags\": [\"a\", \"#1\"],\n          \"disabled\": false,\n          \"prefixed\": false\n        }, {\n          \"version\": \"81\",\n          \"era\": 0,\n          \"flags\": [\"y\"],\n          \"notes\": [],\n          \"disabled\": false,\n          \"prefixed\": false\n        }]\n      }, {\n        \"id\": \"samsung\",\n        \"name\": \"Samsung Internet\",\n        \"versions\": [{\n          \"version\": \"4\",\n          \"era\": -9,\n          \"flags\": [\"a\", \"#1\"],\n          \"notes\": [1],\n          \"disabled\": false,\n          \"prefixed\": false\n        }, {\n          \"version\": \"5.0-12.0\",\n          \"era\": -1,\n          \"notes\": [],\n          \"flags\": [\"y\"],\n          \"disabled\": false,\n          \"prefixed\": false\n        }, {\n          \"version\": \"13.0\",\n          \"era\": 0,\n          \"flags\": [\"y\"],\n          \"notes\": [],\n          \"disabled\": false,\n          \"prefixed\": false\n        }]\n      }, {\n        \"id\": \"and_uc\",\n        \"name\": \"UC Browser for Android\",\n        \"versions\": [{\n          \"version\": \"12.12\",\n          \"era\": 0,\n          \"flags\": [\"y\"],\n          \"notes\": [],\n          \"disabled\": false,\n          \"prefixed\": false\n        }]\n      }]\n    },\n    mdxType: \"Caniuse\"\n  }), mdx(\"h2\", null, \"Convert .gif to .mp4\"), mdx(\"p\", null, \"To convert a .gif file to a web-safe .mp4, use the following command:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-shell\"\n  }, \"ffmpeg -i file.gif -movflags +faststart -pix_fmt yuv420p \\\\\\n       -vf \\\"scale=trunc(iw/2)*2:trunc(ih/2)*2\\\" file.mp4\\n\")), mdx(\"p\", null, \"Let's also cover the options for this one:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"-i\"), \": Specifies the \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"input file\"), \", in this case \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"file.gif\"), \".\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"-movflags\"), \": For web video we can specify \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"+faststart\"), \" to allow the video to start playing before the download is complete.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"-pix_fmt\"), \": The default \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"yuv444p\"), \" can't be played by some mobile browsers so we set it to \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"yuv420p\"), \" instead.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"-vf\"), \": This flag is allows us to set \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"\\\"scale=trunc(iw/2)*2:trunc(ih/2)*2\\\"\"), \" to ensure the video width and height are divisible by 2 which would otherwise cause an error when using \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"yuv420p\"), \".\")), mdx(\"p\", null, \"More detailed explanations about the options can be found \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://trac.ffmpeg.org/wiki/Encode/H.264\",\n    \"title\": \"Visit ffmpeg H.264 encode page\"\n  }, \"here\"), \".\\nAdditionally, \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/manateelazycat/deepin-screen-recorder/commit/a49612faed28fc70a98aa117839cc67d96b99761\",\n    \"title\": \"Read details about pix_fmt and vf flags command line flags\"\n  }, \"this commit\"), \"\\nprovides some additional context about \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"-pix_fmt\"), \" and \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"-vf\"), \".\"), mdx(\"p\", null, \"The .mp4 file is (on average) \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"50%\"), \" smaller than the .gif file. While less efficient\\nthan .webm, it is still much better than using .gif. Additionally, this .mp4 file is \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://caniuse.com/?search=mp4\",\n    \"title\": \"View caniuse.com mp4 support\"\n  }, \"widely supported\"), \"\\nin nearly all browsers.\"), mdx(Caniuse, {\n    data: {\n      \"id\": \"mpeg4\",\n      \"prefixes\": {\n        \"ie\": \"ms\",\n        \"edge\": \"webkit\",\n        \"firefox\": \"moz\",\n        \"chrome\": \"webkit\",\n        \"safari\": \"webkit\",\n        \"opera\": \"webkit\",\n        \"and_ff\": \"moz\",\n        \"and_chr\": \"webkit\",\n        \"ios_saf\": \"webkit\",\n        \"op_mob\": \"o\",\n        \"op_mini\": \"o\",\n        \"android\": \"webkit\",\n        \"samsung\": \"webkit\",\n        \"and_uc\": \"webkit\"\n      },\n      \"updated\": 1613977521000,\n      \"notesByNum\": [{\n        \"note\": 1,\n        \"text\": \"<span>The Android 2.3 browser requires <a href=\\\"https://www.broken-links.com/2010/07/08/making-html5-video-work-on-android-phones/\\\">specific handling</a> to play videos.</span>\"\n      }, {\n        \"note\": 2,\n        \"text\": \"<span>Partial supports refers to the lack of hardware acceleration.</span>\"\n      }],\n      \"title\": \"MPEG-4/H.264 video format\",\n      \"description\": \"<span>Commonly used video compression format.</span>\",\n      \"status\": \"other\",\n      \"spec\": \"http://ip.hhi.de/imagecom_G1/assets/pdfs/csvt_overview_0305.pdf\",\n      \"usage\": {\n        \"y\": 95.7,\n        \"a\": 1.89\n      },\n      \"stats\": [{\n        \"id\": \"ie\",\n        \"name\": \"IE\",\n        \"versions\": [{\n          \"version\": \"5.5-8\",\n          \"era\": -3,\n          \"notes\": [],\n          \"flags\": [\"n\"],\n          \"disabled\": false,\n          \"prefixed\": false\n        }, {\n          \"version\": \"9-10\",\n          \"era\": -1,\n          \"notes\": [],\n          \"flags\": [\"y\"],\n          \"disabled\": false,\n          \"prefixed\": false\n        }, {\n          \"version\": \"11\",\n          \"era\": 0,\n          \"flags\": [\"y\"],\n          \"notes\": [],\n          \"disabled\": false,\n          \"prefixed\": false\n        }]\n      }, {\n        \"id\": \"edge\",\n        \"name\": \"Edge\",\n        \"versions\": [{\n          \"version\": \"12-87\",\n          \"era\": -1,\n          \"notes\": [],\n          \"flags\": [\"y\"],\n          \"disabled\": false,\n          \"prefixed\": false\n        }, {\n          \"version\": \"88\",\n          \"era\": 0,\n          \"flags\": [\"y\"],\n          \"notes\": [],\n          \"disabled\": false,\n          \"prefixed\": false\n        }]\n      }, {\n        \"id\": \"firefox\",\n        \"name\": \"Firefox\",\n        \"versions\": [{\n          \"version\": \"2-20\",\n          \"era\": -65,\n          \"notes\": [],\n          \"flags\": [\"n\"],\n          \"disabled\": false,\n          \"prefixed\": false\n        }, {\n          \"version\": \"21-34\",\n          \"era\": -51,\n          \"notes\": [],\n          \"flags\": [\"a\"],\n          \"disabled\": false,\n          \"prefixed\": false\n        }, {\n          \"version\": \"35-84\",\n          \"era\": -1,\n          \"notes\": [],\n          \"flags\": [\"y\"],\n          \"disabled\": false,\n          \"prefixed\": false\n        }, {\n          \"version\": \"85\",\n          \"era\": 0,\n          \"flags\": [\"y\"],\n          \"notes\": [],\n          \"disabled\": false,\n          \"prefixed\": false\n        }, {\n          \"version\": \"86-87\",\n          \"era\": 2,\n          \"notes\": [],\n          \"flags\": [\"y\"],\n          \"disabled\": false,\n          \"prefixed\": false\n        }]\n      }, {\n        \"id\": \"chrome\",\n        \"name\": \"Chrome\",\n        \"versions\": [{\n          \"version\": \"4-87\",\n          \"era\": -1,\n          \"notes\": [],\n          \"flags\": [\"y\"],\n          \"disabled\": false,\n          \"prefixed\": false\n        }, {\n          \"version\": \"88\",\n          \"era\": 0,\n          \"flags\": [\"y\"],\n          \"notes\": [],\n          \"disabled\": false,\n          \"prefixed\": false\n        }, {\n          \"version\": \"89-91\",\n          \"era\": 3,\n          \"notes\": [],\n          \"flags\": [\"y\"],\n          \"disabled\": false,\n          \"prefixed\": false\n        }]\n      }, {\n        \"id\": \"safari\",\n        \"name\": \"Safari\",\n        \"versions\": [{\n          \"version\": \"3.1\",\n          \"era\": -20,\n          \"flags\": [\"n\"],\n          \"notes\": [],\n          \"disabled\": false,\n          \"prefixed\": false\n        }, {\n          \"version\": \"3.2-13.1\",\n          \"era\": -1,\n          \"notes\": [],\n          \"flags\": [\"y\"],\n          \"disabled\": false,\n          \"prefixed\": false\n        }, {\n          \"version\": \"14\",\n          \"era\": 0,\n          \"flags\": [\"y\"],\n          \"notes\": [],\n          \"disabled\": false,\n          \"prefixed\": false\n        }, {\n          \"version\": \"TP\",\n          \"era\": 1,\n          \"flags\": [\"y\"],\n          \"notes\": [],\n          \"disabled\": false,\n          \"prefixed\": false\n        }]\n      }, {\n        \"id\": \"opera\",\n        \"name\": \"Opera\",\n        \"versions\": [{\n          \"version\": \"9-24\",\n          \"era\": -47,\n          \"notes\": [],\n          \"flags\": [\"n\"],\n          \"disabled\": false,\n          \"prefixed\": false\n        }, {\n          \"version\": \"25-72\",\n          \"era\": -1,\n          \"notes\": [],\n          \"flags\": [\"y\"],\n          \"disabled\": false,\n          \"prefixed\": false\n        }, {\n          \"version\": \"73\",\n          \"era\": 0,\n          \"flags\": [\"y\"],\n          \"notes\": [],\n          \"disabled\": false,\n          \"prefixed\": false\n        }]\n      }, {\n        \"id\": \"and_ff\",\n        \"name\": \"Firefox for Android\",\n        \"versions\": [{\n          \"version\": \"85\",\n          \"era\": 0,\n          \"flags\": [\"a\", \"#2\"],\n          \"notes\": [2],\n          \"disabled\": false,\n          \"prefixed\": false\n        }]\n      }, {\n        \"id\": \"and_chr\",\n        \"name\": \"Chrome for Android\",\n        \"versions\": [{\n          \"version\": \"88\",\n          \"era\": 0,\n          \"flags\": [\"y\"],\n          \"notes\": [],\n          \"disabled\": false,\n          \"prefixed\": false\n        }]\n      }, {\n        \"id\": \"ios_saf\",\n        \"name\": \"iOS Safari\",\n        \"versions\": [{\n          \"version\": \"3.2-13.7\",\n          \"era\": -1,\n          \"notes\": [],\n          \"flags\": [\"y\"],\n          \"disabled\": false,\n          \"prefixed\": false\n        }, {\n          \"version\": \"14.0-14.4\",\n          \"era\": 0,\n          \"flags\": [\"y\"],\n          \"notes\": [],\n          \"disabled\": false,\n          \"prefixed\": false\n        }]\n      }, {\n        \"id\": \"op_mob\",\n        \"name\": \"Opera Mobile\",\n        \"versions\": [{\n          \"version\": \"10\",\n          \"era\": -6,\n          \"flags\": [\"n\"],\n          \"notes\": [],\n          \"disabled\": false,\n          \"prefixed\": false\n        }, {\n          \"version\": \"11-12.1\",\n          \"era\": -1,\n          \"notes\": [],\n          \"flags\": [\"y\"],\n          \"disabled\": false,\n          \"prefixed\": false\n        }, {\n          \"version\": \"59\",\n          \"era\": 0,\n          \"flags\": [\"y\"],\n          \"notes\": [],\n          \"disabled\": false,\n          \"prefixed\": false\n        }]\n      }, {\n        \"id\": \"op_mini\",\n        \"name\": \"Opera Mini\",\n        \"versions\": [{\n          \"version\": \"all\",\n          \"era\": 0,\n          \"flags\": [\"n\"],\n          \"notes\": [],\n          \"disabled\": false,\n          \"prefixed\": false\n        }]\n      }, {\n        \"id\": \"android\",\n        \"name\": \"Android Browser\",\n        \"versions\": [{\n          \"version\": \"2.1-2.2\",\n          \"era\": -8,\n          \"notes\": [],\n          \"flags\": [\"a\"],\n          \"disabled\": false,\n          \"prefixed\": false\n        }, {\n          \"version\": \"2.3\",\n          \"era\": -7,\n          \"flags\": [\"a\", \"#1\"],\n          \"notes\": [1],\n          \"disabled\": false,\n          \"prefixed\": false\n        }, {\n          \"version\": \"3-4.3\",\n          \"era\": -3,\n          \"notes\": [],\n          \"flags\": [\"a\"],\n          \"disabled\": false,\n          \"prefixed\": false\n        }, {\n          \"version\": \"4.4-4.4.4\",\n          \"era\": -1,\n          \"notes\": [],\n          \"flags\": [\"y\"],\n          \"disabled\": false,\n          \"prefixed\": false\n        }, {\n          \"version\": \"81\",\n          \"era\": 0,\n          \"flags\": [\"y\"],\n          \"notes\": [],\n          \"disabled\": false,\n          \"prefixed\": false\n        }]\n      }, {\n        \"id\": \"samsung\",\n        \"name\": \"Samsung Internet\",\n        \"versions\": [{\n          \"version\": \"4-12.0\",\n          \"era\": -1,\n          \"notes\": [],\n          \"flags\": [\"y\"],\n          \"disabled\": false,\n          \"prefixed\": false\n        }, {\n          \"version\": \"13.0\",\n          \"era\": 0,\n          \"flags\": [\"y\"],\n          \"notes\": [],\n          \"disabled\": false,\n          \"prefixed\": false\n        }]\n      }, {\n        \"id\": \"and_uc\",\n        \"name\": \"UC Browser for Android\",\n        \"versions\": [{\n          \"version\": \"12.12\",\n          \"era\": 0,\n          \"flags\": [\"a\"],\n          \"notes\": [],\n          \"disabled\": false,\n          \"prefixed\": false\n        }]\n      }]\n    },\n    mdxType: \"Caniuse\"\n  }), mdx(\"h2\", null, \"Conclusion\"), mdx(\"p\", null, \"Hopefully this post made it a little bit easier to understand how to convert\\n.gif files to .webm or .mp4 using \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"ffmpeg\"), \". It a powerful tool that can help us\\noptimize our usage of animated media on the web. It is definitely worth looking\\ninto if you run a website that displays lots of gifs.\"), mdx(\"p\", null, \"Until next time :)\"), mdx(\"p\", null, \"\\uD83D\\uDC4B\"));\n}\n\n;\nMDXContent.isMDXComponent = true;","renderedOutput":"<p>When recording animated content for my blog posts I use a gif recorder. However,\nusing <a href=\"https://caniuse.com/?search=webm\" title=\"View caniuse.com webm support\">.webm</a> or <a href=\"https://caniuse.com/?search=mp4\" title=\"View caniuse.com mp4 support\">.mp4</a>\nfiles is usually more efficient and works in pretty much every major browser today.</p><h2 class=\"heading_container__2UElk\"><a class=\"heading_anchor__PWj4r\" id=\"convert-gif-to-webm\"></a><a class=\"heading_link__1aoFY\" href=\"#convert-gif-to-webm\">Convert .gif to .webm</a></h2><p>To convert a .gif file to .webm, use the following command:</p><pre class=\"prism-code language-shell\" style=\"background-color:#2a2734;color:#9a86fd\"><div class=\"token-line\" style=\"color:#9a86fd\"><span class=\"token plain\">ffmpeg -i file.gif -c vp9 -b:v </span><span class=\"token number\" style=\"color:#e09142\">0</span><span class=\"token plain\"> -crf </span><span class=\"token number\" style=\"color:#e09142\">40</span><span class=\"token plain\"> file.webm</span></div></pre><p>This will output a .webm file that works in most browsers, but what are these options\ndoing exactly? Let&#x27;s dive in:</p><ul><li><code>-i</code>: Specifies the <em>input file</em>, in this case <code>file.gif</code>.</li><li><code>-c</code>: Specifies the <em>codec</em>, <code>vp9</code> works in most browsers.</li><li><code>-b:v</code>: Specifies the <em>video bitrate</em>, <code>0</code> allows us to specify the quality via the <code>-crf</code> option.</li><li><code>-crf</code>: Specifies the <em>quality</em>, ranges between 0-63, lower means better quality.</li></ul><p>More detailed explanations about the options can be found <a href=\"https://trac.ffmpeg.org/wiki/Encode/VP9\" title=\"Visit ffmpeg VP9 encode page\">here</a>.</p><p>These .webm files will suffer a little bit of quality loss, but if more quality is\nneeded the <code>-crf</code> flag can be set to a lower value easily. With these settings\nthe .webm file is (on average) <strong>60%</strong> smaller than the .gif file.</p><p>When we check caniuse, <a href=\"https://caniuse.com/?search=webm\" title=\"View caniuse.com webm support\">.webm support</a> looks good too, mostly.\nIndeed the only real reason today to use .mp4 on the web is to support Internet Explorer.</p><section class=\"caniuse_caniuse__3HlK-\" data-embed=\"true\"><div class=\"caniuse_header__1qoVv\"><span class=\"caniuse_title__2oGXT\">WebM video format</span><span class=\"caniuse_headerMeta__2ExWl\"><span class=\"caniuse_textRow__2mcRb caniuse_rowStatus__27IsJ\"><span class=\"caniuse_status__2qCZ_\">other</span><span class=\"bullet_bullet__2pnOU\">•</span><span class=\"caniuse_usage__3YkVt caniuse_color-yellow__35MaB\">%<!-- -->76.78</span></span><span class=\"caniuse_textRow__2mcRb\"><a href=\"https://caniuse.com/webm\" rel=\"noreferrer\" target=\"_blank\" title=\"View on caniuse.com\">caniuse</a></span><span class=\"caniuse_textRow__2mcRb\"><a href=\"https://www.webmproject.org\" rel=\"noreferrer\" target=\"_blank\" title=\"View spec on w3.org\">spec</a></span></span><p class=\"caniuse_description__2HIQ6\"><span>Multimedia format designed to provide a royalty-free, high-quality open video compression format for use with HTML5 video. WebM supports the video codec VP8 and VP9.</span></p><small class=\"caniuse_updated__DUZKL\">updated<!-- --> <!-- -->Feb, 22 2021</small></div><div class=\"caniuse_table__4Rda8\"><div class=\"caniuse_tableHeader__3TLBP\"><div class=\"caniuse_column__c5s8c\"><div class=\"caniuse_browser__3_6Lq\" data-name=\"ie\">IE</div></div><div class=\"caniuse_column__c5s8c\"><div class=\"caniuse_browser__3_6Lq\" data-name=\"edge\">Edge</div></div><div class=\"caniuse_column__c5s8c\"><div class=\"caniuse_browser__3_6Lq\" data-name=\"firefox\">Firefox</div></div><div class=\"caniuse_column__c5s8c\"><div class=\"caniuse_browser__3_6Lq\" data-name=\"chrome\">Chrome</div></div><div class=\"caniuse_column__c5s8c\"><div class=\"caniuse_browser__3_6Lq\" data-name=\"safari\">Safari</div></div><div class=\"caniuse_column__c5s8c\"><div class=\"caniuse_browser__3_6Lq\" data-name=\"opera\">Opera</div></div><div class=\"caniuse_column__c5s8c\"><div class=\"caniuse_browser__3_6Lq\" data-name=\"and_ff\">Firefox for Android</div></div><div class=\"caniuse_column__c5s8c\"><div class=\"caniuse_browser__3_6Lq\" data-name=\"and_chr\">Chrome for Android</div></div><div class=\"caniuse_column__c5s8c\"><div class=\"caniuse_browser__3_6Lq\" data-name=\"ios_saf\">iOS Safari</div></div><div class=\"caniuse_column__c5s8c\"><div class=\"caniuse_browser__3_6Lq\" data-name=\"op_mob\">Opera Mobile</div></div><div class=\"caniuse_column__c5s8c\"><div class=\"caniuse_browser__3_6Lq\" data-name=\"op_mini\">Opera Mini</div></div><div class=\"caniuse_column__c5s8c\"><div class=\"caniuse_browser__3_6Lq\" data-name=\"android\">Android Browser</div></div><div class=\"caniuse_column__c5s8c\"><div class=\"caniuse_browser__3_6Lq\" data-name=\"samsung\">Samsung Internet</div></div><div class=\"caniuse_column__c5s8c\"><div class=\"caniuse_browser__3_6Lq\" data-name=\"and_uc\">UC Browser for Android</div></div></div><div class=\"caniuse_tableBody__1Qpcb caniuse_tableBodyPast__nm1G4\"><div class=\"caniuse_column__c5s8c\"><div class=\"caniuse_cell__JKZsr caniuse_flag-n__1fo0e\"><div class=\"caniuse_cellDetails__3eKIs\"><span class=\"caniuse_notes__1q1Q6\"></span></div>5.5-8</div><div class=\"caniuse_cell__JKZsr caniuse_flag-n__1fo0e\"><div class=\"caniuse_cellDetails__3eKIs\"><span class=\"caniuse_notes__1q1Q6\"><span class=\"caniuse_note__3w-xw\">3</span></span></div>9-10</div></div><div class=\"caniuse_column__c5s8c\"><div class=\"caniuse_cell__JKZsr caniuse_flag-n__1fo0e\"><div class=\"caniuse_cellDetails__3eKIs\"><span class=\"caniuse_notes__1q1Q6\"></span></div>12-13</div><div class=\"caniuse_cell__JKZsr caniuse_flag-a__2KAGe\"><div class=\"caniuse_cellDetails__3eKIs\"><span class=\"caniuse_notes__1q1Q6\"><span class=\"caniuse_note__3w-xw\">1</span><span class=\"caniuse_note__3w-xw\">2</span></span></div>14-18</div><div class=\"caniuse_cell__JKZsr caniuse_flag-y__2oU3A\"><div class=\"caniuse_cellDetails__3eKIs\"><span class=\"caniuse_notes__1q1Q6\"></span></div>79-87</div></div><div class=\"caniuse_column__c5s8c\"><div class=\"caniuse_cell__JKZsr caniuse_flag-n__1fo0e\"><div class=\"caniuse_cellDetails__3eKIs\"><span class=\"caniuse_notes__1q1Q6\"></span></div>2-3.6</div><div class=\"caniuse_cell__JKZsr caniuse_flag-a__2KAGe\"><div class=\"caniuse_cellDetails__3eKIs\"><span class=\"caniuse_notes__1q1Q6\"><span class=\"caniuse_note__3w-xw\">1</span></span></div>4-27</div><div class=\"caniuse_cell__JKZsr caniuse_flag-y__2oU3A\"><div class=\"caniuse_cellDetails__3eKIs\"><span class=\"caniuse_notes__1q1Q6\"></span></div>28-84</div></div><div class=\"caniuse_column__c5s8c\"><div class=\"caniuse_cell__JKZsr caniuse_flag-n__1fo0e\"><div class=\"caniuse_cellDetails__3eKIs\"><span class=\"caniuse_notes__1q1Q6\"></span></div>4-5</div><div class=\"caniuse_cell__JKZsr caniuse_flag-a__2KAGe\"><div class=\"caniuse_cellDetails__3eKIs\"><span class=\"caniuse_notes__1q1Q6\"><span class=\"caniuse_note__3w-xw\">1</span></span></div>6-24</div><div class=\"caniuse_cell__JKZsr caniuse_flag-y__2oU3A\"><div class=\"caniuse_cellDetails__3eKIs\"><span class=\"caniuse_notes__1q1Q6\"></span></div>25-87</div></div><div class=\"caniuse_column__c5s8c\"><div class=\"caniuse_cell__JKZsr caniuse_flag-n__1fo0e\"><div class=\"caniuse_cellDetails__3eKIs\"><span class=\"caniuse_notes__1q1Q6\"></span></div>3.1</div><div class=\"caniuse_cell__JKZsr caniuse_flag-n__1fo0e\"><div class=\"caniuse_cellDetails__3eKIs\"><span class=\"caniuse_notes__1q1Q6\"></span></div>3.2-5.1</div><div class=\"caniuse_cell__JKZsr caniuse_flag-n__1fo0e\"><div class=\"caniuse_cellDetails__3eKIs\"><span class=\"caniuse_notes__1q1Q6\"><span class=\"caniuse_note__3w-xw\">3</span></span></div>6-12</div><div class=\"caniuse_cell__JKZsr caniuse_flag-a__2KAGe\"><div class=\"caniuse_cellDetails__3eKIs\"><span class=\"caniuse_notes__1q1Q6\"><span class=\"caniuse_note__3w-xw\">4</span></span></div>12.1-13.1</div></div><div class=\"caniuse_column__c5s8c\"><div class=\"caniuse_cell__JKZsr caniuse_flag-n__1fo0e\"><div class=\"caniuse_cellDetails__3eKIs\"><span class=\"caniuse_notes__1q1Q6\"></span></div>9-10.5</div><div class=\"caniuse_cell__JKZsr caniuse_flag-a__2KAGe\"><div class=\"caniuse_cellDetails__3eKIs\"><span class=\"caniuse_notes__1q1Q6\"><span class=\"caniuse_note__3w-xw\">1</span></span></div>10.6-15</div><div class=\"caniuse_cell__JKZsr caniuse_flag-y__2oU3A\"><div class=\"caniuse_cellDetails__3eKIs\"><span class=\"caniuse_notes__1q1Q6\"></span></div>16-72</div></div><div class=\"caniuse_column__c5s8c\"></div><div class=\"caniuse_column__c5s8c\"></div><div class=\"caniuse_column__c5s8c\"><div class=\"caniuse_cell__JKZsr caniuse_flag-n__1fo0e\"><div class=\"caniuse_cellDetails__3eKIs\"><span class=\"caniuse_notes__1q1Q6\"></span></div>3.2-12.1</div><div class=\"caniuse_cell__JKZsr caniuse_flag-a__2KAGe\"><div class=\"caniuse_cellDetails__3eKIs\"><span class=\"caniuse_notes__1q1Q6\"><span class=\"caniuse_note__3w-xw\">4</span></span></div>12.2-13.7</div></div><div class=\"caniuse_column__c5s8c\"><div class=\"caniuse_cell__JKZsr caniuse_flag-n__1fo0e\"><div class=\"caniuse_cellDetails__3eKIs\"><span class=\"caniuse_notes__1q1Q6\"></span></div>10-12.1</div></div><div class=\"caniuse_column__c5s8c\"></div><div class=\"caniuse_column__c5s8c\"><div class=\"caniuse_cell__JKZsr caniuse_flag-n__1fo0e\"><div class=\"caniuse_cellDetails__3eKIs\"><span class=\"caniuse_notes__1q1Q6\"></span></div>2.1-2.2</div><div class=\"caniuse_cell__JKZsr caniuse_flag-a__2KAGe\"><div class=\"caniuse_cellDetails__3eKIs\"><span class=\"caniuse_notes__1q1Q6\"><span class=\"caniuse_note__3w-xw\">1</span></span></div>2.3-4.4.4</div></div><div class=\"caniuse_column__c5s8c\"><div class=\"caniuse_cell__JKZsr caniuse_flag-a__2KAGe\"><div class=\"caniuse_cellDetails__3eKIs\"><span class=\"caniuse_notes__1q1Q6\"><span class=\"caniuse_note__3w-xw\">1</span></span></div>4</div><div class=\"caniuse_cell__JKZsr caniuse_flag-y__2oU3A\"><div class=\"caniuse_cellDetails__3eKIs\"><span class=\"caniuse_notes__1q1Q6\"></span></div>5.0-12.0</div></div><div class=\"caniuse_column__c5s8c\"></div></div><div class=\"caniuse_tableBody__1Qpcb caniuse_tableBodyCurrent__1gt_O\"><div class=\"caniuse_column__c5s8c\"><div class=\"caniuse_cell__JKZsr caniuse_flag-n__1fo0e\"><div class=\"caniuse_cellDetails__3eKIs\"><span class=\"caniuse_notes__1q1Q6\"><span class=\"caniuse_note__3w-xw\">3</span></span></div>11</div></div><div class=\"caniuse_column__c5s8c\"><div class=\"caniuse_cell__JKZsr caniuse_flag-y__2oU3A\"><div class=\"caniuse_cellDetails__3eKIs\"><span class=\"caniuse_notes__1q1Q6\"></span></div>88</div></div><div class=\"caniuse_column__c5s8c\"><div class=\"caniuse_cell__JKZsr caniuse_flag-y__2oU3A\"><div class=\"caniuse_cellDetails__3eKIs\"><span class=\"caniuse_notes__1q1Q6\"></span></div>85</div></div><div class=\"caniuse_column__c5s8c\"><div class=\"caniuse_cell__JKZsr caniuse_flag-y__2oU3A\"><div class=\"caniuse_cellDetails__3eKIs\"><span class=\"caniuse_notes__1q1Q6\"></span></div>88</div></div><div class=\"caniuse_column__c5s8c\"><div class=\"caniuse_cell__JKZsr caniuse_flag-a__2KAGe\"><div class=\"caniuse_cellDetails__3eKIs\"><span class=\"caniuse_notes__1q1Q6\"><span class=\"caniuse_note__3w-xw\">4</span><span class=\"caniuse_note__3w-xw\">5</span><span class=\"caniuse_note__3w-xw\">6</span></span></div>14</div></div><div class=\"caniuse_column__c5s8c\"><div class=\"caniuse_cell__JKZsr caniuse_flag-y__2oU3A\"><div class=\"caniuse_cellDetails__3eKIs\"><span class=\"caniuse_notes__1q1Q6\"></span></div>73</div></div><div class=\"caniuse_column__c5s8c\"><div class=\"caniuse_cell__JKZsr caniuse_flag-y__2oU3A\"><div class=\"caniuse_cellDetails__3eKIs\"><span class=\"caniuse_notes__1q1Q6\"></span></div>85</div></div><div class=\"caniuse_column__c5s8c\"><div class=\"caniuse_cell__JKZsr caniuse_flag-y__2oU3A\"><div class=\"caniuse_cellDetails__3eKIs\"><span class=\"caniuse_notes__1q1Q6\"></span></div>88</div></div><div class=\"caniuse_column__c5s8c\"><div class=\"caniuse_cell__JKZsr caniuse_flag-a__2KAGe\"><div class=\"caniuse_cellDetails__3eKIs\"><span class=\"caniuse_notes__1q1Q6\"><span class=\"caniuse_note__3w-xw\">4</span><span class=\"caniuse_note__3w-xw\">5</span></span></div>14.0-14.4</div></div><div class=\"caniuse_column__c5s8c\"><div class=\"caniuse_cell__JKZsr caniuse_flag-a__2KAGe\"><div class=\"caniuse_cellDetails__3eKIs\"><span class=\"caniuse_notes__1q1Q6\"><span class=\"caniuse_note__3w-xw\">1</span></span></div>59</div></div><div class=\"caniuse_column__c5s8c\"><div class=\"caniuse_cell__JKZsr caniuse_flag-n__1fo0e\"><div class=\"caniuse_cellDetails__3eKIs\"><span class=\"caniuse_notes__1q1Q6\"></span></div>all</div></div><div class=\"caniuse_column__c5s8c\"><div class=\"caniuse_cell__JKZsr caniuse_flag-y__2oU3A\"><div class=\"caniuse_cellDetails__3eKIs\"><span class=\"caniuse_notes__1q1Q6\"></span></div>81</div></div><div class=\"caniuse_column__c5s8c\"><div class=\"caniuse_cell__JKZsr caniuse_flag-y__2oU3A\"><div class=\"caniuse_cellDetails__3eKIs\"><span class=\"caniuse_notes__1q1Q6\"></span></div>13.0</div></div><div class=\"caniuse_column__c5s8c\"><div class=\"caniuse_cell__JKZsr caniuse_flag-y__2oU3A\"><div class=\"caniuse_cellDetails__3eKIs\"><span class=\"caniuse_notes__1q1Q6\"></span></div>12.12</div></div></div><div class=\"caniuse_tableBody__1Qpcb\"><div class=\"caniuse_column__c5s8c\"></div><div class=\"caniuse_column__c5s8c\"></div><div class=\"caniuse_column__c5s8c\"><div class=\"caniuse_cell__JKZsr caniuse_flag-y__2oU3A\"><div class=\"caniuse_cellDetails__3eKIs\"><span class=\"caniuse_notes__1q1Q6\"></span></div>86-87</div></div><div class=\"caniuse_column__c5s8c\"><div class=\"caniuse_cell__JKZsr caniuse_flag-y__2oU3A\"><div class=\"caniuse_cellDetails__3eKIs\"><span class=\"caniuse_notes__1q1Q6\"></span></div>89-91</div></div><div class=\"caniuse_column__c5s8c\"><div class=\"caniuse_cell__JKZsr caniuse_flag-a__2KAGe\"><div class=\"caniuse_cellDetails__3eKIs\"><span class=\"caniuse_notes__1q1Q6\"><span class=\"caniuse_note__3w-xw\">4</span><span class=\"caniuse_note__3w-xw\">5</span><span class=\"caniuse_note__3w-xw\">6</span></span></div>TP</div></div><div class=\"caniuse_column__c5s8c\"></div><div class=\"caniuse_column__c5s8c\"></div><div class=\"caniuse_column__c5s8c\"></div><div class=\"caniuse_column__c5s8c\"></div><div class=\"caniuse_column__c5s8c\"></div><div class=\"caniuse_column__c5s8c\"></div><div class=\"caniuse_column__c5s8c\"></div><div class=\"caniuse_column__c5s8c\"></div><div class=\"caniuse_column__c5s8c\"></div></div></div><div class=\"caniuse_legendAndNotes__OLmrF\"><div class=\"caniuse_legend__22Qq3\"><div class=\"caniuse_legendItem__gj1r_ caniuse_flag-y__2oU3A\">supported</div><div class=\"caniuse_legendItem__gj1r_ caniuse_flag-n__1fo0e\">unsupported</div><div class=\"caniuse_legendItem__gj1r_ caniuse_flag-a__2KAGe\">partial</div><div class=\"caniuse_legendItem__gj1r_ caniuse_flag-u__2eqhH\">unknown</div><div class=\"caniuse_legendItem__gj1r_ caniuse_flag-p__2XKIQ\">-prefixed-</div><div class=\"caniuse_legendItem__gj1r_ caniuse_flag-d__tmfZZ\">⚑ disabled</div></div><button type=\"button\" class=\"caniuse_notesToggle__1fDzM\">Show<!-- --> <!-- -->6 notes</button></div></section><h2 class=\"heading_container__2UElk\"><a class=\"heading_anchor__PWj4r\" id=\"convert-gif-to-mp4\"></a><a class=\"heading_link__1aoFY\" href=\"#convert-gif-to-mp4\">Convert .gif to .mp4</a></h2><p>To convert a .gif file to a web-safe .mp4, use the following command:</p><pre class=\"prism-code language-shell\" style=\"background-color:#2a2734;color:#9a86fd\"><div class=\"token-line\" style=\"color:#9a86fd\"><span class=\"token plain\">ffmpeg -i file.gif -movflags +faststart -pix_fmt yuv420p </span><span class=\"token punctuation\" style=\"color:#6c6783\">\\</span><span class=\"token plain\"></span></div><div class=\"token-line\" style=\"color:#9a86fd\"><span class=\"token plain\">       -vf </span><span class=\"token string\" style=\"color:#ffcc99\">&quot;scale=trunc(iw/2)*2:trunc(ih/2)*2&quot;</span><span class=\"token plain\"> file.mp4</span></div></pre><p>Let&#x27;s also cover the options for this one:</p><ul><li><code>-i</code>: Specifies the <em>input file</em>, in this case <code>file.gif</code>.</li><li><code>-movflags</code>: For web video we can specify <code>+faststart</code> to allow the video to start playing before the download is complete.</li><li><code>-pix_fmt</code>: The default <code>yuv444p</code> can&#x27;t be played by some mobile browsers so we set it to <code>yuv420p</code> instead.</li><li><code>-vf</code>: This flag is allows us to set <code>&quot;scale=trunc(iw/2)*2:trunc(ih/2)*2&quot;</code> to ensure the video width and height are divisible by 2 which would otherwise cause an error when using <code>yuv420p</code>.</li></ul><p>More detailed explanations about the options can be found <a href=\"https://trac.ffmpeg.org/wiki/Encode/H.264\" title=\"Visit ffmpeg H.264 encode page\">here</a>.\nAdditionally, <a href=\"https://github.com/manateelazycat/deepin-screen-recorder/commit/a49612faed28fc70a98aa117839cc67d96b99761\" title=\"Read details about pix_fmt and vf flags command line flags\">this commit</a>\nprovides some additional context about <code>-pix_fmt</code> and <code>-vf</code>.</p><p>The .mp4 file is (on average) <strong>50%</strong> smaller than the .gif file. While less efficient\nthan .webm, it is still much better than using .gif. Additionally, this .mp4 file is <a href=\"https://caniuse.com/?search=mp4\" title=\"View caniuse.com mp4 support\">widely supported</a>\nin nearly all browsers.</p><section class=\"caniuse_caniuse__3HlK-\" data-embed=\"true\"><div class=\"caniuse_header__1qoVv\"><span class=\"caniuse_title__2oGXT\">MPEG-4/H.264 video format</span><span class=\"caniuse_headerMeta__2ExWl\"><span class=\"caniuse_textRow__2mcRb caniuse_rowStatus__27IsJ\"><span class=\"caniuse_status__2qCZ_\">other</span><span class=\"bullet_bullet__2pnOU\">•</span><span class=\"caniuse_usage__3YkVt caniuse_color-green__3vu2c\">%<!-- -->95.7</span></span><span class=\"caniuse_textRow__2mcRb\"><a href=\"https://caniuse.com/mpeg4\" rel=\"noreferrer\" target=\"_blank\" title=\"View on caniuse.com\">caniuse</a></span><span class=\"caniuse_textRow__2mcRb\"><a href=\"http://ip.hhi.de/imagecom_G1/assets/pdfs/csvt_overview_0305.pdf\" rel=\"noreferrer\" target=\"_blank\" title=\"View spec on w3.org\">spec</a></span></span><p class=\"caniuse_description__2HIQ6\"><span>Commonly used video compression format.</span></p><small class=\"caniuse_updated__DUZKL\">updated<!-- --> <!-- -->Feb, 22 2021</small></div><div class=\"caniuse_table__4Rda8\"><div class=\"caniuse_tableHeader__3TLBP\"><div class=\"caniuse_column__c5s8c\"><div class=\"caniuse_browser__3_6Lq\" data-name=\"ie\">IE</div></div><div class=\"caniuse_column__c5s8c\"><div class=\"caniuse_browser__3_6Lq\" data-name=\"edge\">Edge</div></div><div class=\"caniuse_column__c5s8c\"><div class=\"caniuse_browser__3_6Lq\" data-name=\"firefox\">Firefox</div></div><div class=\"caniuse_column__c5s8c\"><div class=\"caniuse_browser__3_6Lq\" data-name=\"chrome\">Chrome</div></div><div class=\"caniuse_column__c5s8c\"><div class=\"caniuse_browser__3_6Lq\" data-name=\"safari\">Safari</div></div><div class=\"caniuse_column__c5s8c\"><div class=\"caniuse_browser__3_6Lq\" data-name=\"opera\">Opera</div></div><div class=\"caniuse_column__c5s8c\"><div class=\"caniuse_browser__3_6Lq\" data-name=\"and_ff\">Firefox for Android</div></div><div class=\"caniuse_column__c5s8c\"><div class=\"caniuse_browser__3_6Lq\" data-name=\"and_chr\">Chrome for Android</div></div><div class=\"caniuse_column__c5s8c\"><div class=\"caniuse_browser__3_6Lq\" data-name=\"ios_saf\">iOS Safari</div></div><div class=\"caniuse_column__c5s8c\"><div class=\"caniuse_browser__3_6Lq\" data-name=\"op_mob\">Opera Mobile</div></div><div class=\"caniuse_column__c5s8c\"><div class=\"caniuse_browser__3_6Lq\" data-name=\"op_mini\">Opera Mini</div></div><div class=\"caniuse_column__c5s8c\"><div class=\"caniuse_browser__3_6Lq\" data-name=\"android\">Android Browser</div></div><div class=\"caniuse_column__c5s8c\"><div class=\"caniuse_browser__3_6Lq\" data-name=\"samsung\">Samsung Internet</div></div><div class=\"caniuse_column__c5s8c\"><div class=\"caniuse_browser__3_6Lq\" data-name=\"and_uc\">UC Browser for Android</div></div></div><div class=\"caniuse_tableBody__1Qpcb caniuse_tableBodyPast__nm1G4\"><div class=\"caniuse_column__c5s8c\"><div class=\"caniuse_cell__JKZsr caniuse_flag-n__1fo0e\"><div class=\"caniuse_cellDetails__3eKIs\"><span class=\"caniuse_notes__1q1Q6\"></span></div>5.5-8</div><div class=\"caniuse_cell__JKZsr caniuse_flag-y__2oU3A\"><div class=\"caniuse_cellDetails__3eKIs\"><span class=\"caniuse_notes__1q1Q6\"></span></div>9-10</div></div><div class=\"caniuse_column__c5s8c\"><div class=\"caniuse_cell__JKZsr caniuse_flag-y__2oU3A\"><div class=\"caniuse_cellDetails__3eKIs\"><span class=\"caniuse_notes__1q1Q6\"></span></div>12-87</div></div><div class=\"caniuse_column__c5s8c\"><div class=\"caniuse_cell__JKZsr caniuse_flag-n__1fo0e\"><div class=\"caniuse_cellDetails__3eKIs\"><span class=\"caniuse_notes__1q1Q6\"></span></div>2-20</div><div class=\"caniuse_cell__JKZsr caniuse_flag-a__2KAGe\"><div class=\"caniuse_cellDetails__3eKIs\"><span class=\"caniuse_notes__1q1Q6\"></span></div>21-34</div><div class=\"caniuse_cell__JKZsr caniuse_flag-y__2oU3A\"><div class=\"caniuse_cellDetails__3eKIs\"><span class=\"caniuse_notes__1q1Q6\"></span></div>35-84</div></div><div class=\"caniuse_column__c5s8c\"><div class=\"caniuse_cell__JKZsr caniuse_flag-y__2oU3A\"><div class=\"caniuse_cellDetails__3eKIs\"><span class=\"caniuse_notes__1q1Q6\"></span></div>4-87</div></div><div class=\"caniuse_column__c5s8c\"><div class=\"caniuse_cell__JKZsr caniuse_flag-n__1fo0e\"><div class=\"caniuse_cellDetails__3eKIs\"><span class=\"caniuse_notes__1q1Q6\"></span></div>3.1</div><div class=\"caniuse_cell__JKZsr caniuse_flag-y__2oU3A\"><div class=\"caniuse_cellDetails__3eKIs\"><span class=\"caniuse_notes__1q1Q6\"></span></div>3.2-13.1</div></div><div class=\"caniuse_column__c5s8c\"><div class=\"caniuse_cell__JKZsr caniuse_flag-n__1fo0e\"><div class=\"caniuse_cellDetails__3eKIs\"><span class=\"caniuse_notes__1q1Q6\"></span></div>9-24</div><div class=\"caniuse_cell__JKZsr caniuse_flag-y__2oU3A\"><div class=\"caniuse_cellDetails__3eKIs\"><span class=\"caniuse_notes__1q1Q6\"></span></div>25-72</div></div><div class=\"caniuse_column__c5s8c\"></div><div class=\"caniuse_column__c5s8c\"></div><div class=\"caniuse_column__c5s8c\"><div class=\"caniuse_cell__JKZsr caniuse_flag-y__2oU3A\"><div class=\"caniuse_cellDetails__3eKIs\"><span class=\"caniuse_notes__1q1Q6\"></span></div>3.2-13.7</div></div><div class=\"caniuse_column__c5s8c\"><div class=\"caniuse_cell__JKZsr caniuse_flag-n__1fo0e\"><div class=\"caniuse_cellDetails__3eKIs\"><span class=\"caniuse_notes__1q1Q6\"></span></div>10</div><div class=\"caniuse_cell__JKZsr caniuse_flag-y__2oU3A\"><div class=\"caniuse_cellDetails__3eKIs\"><span class=\"caniuse_notes__1q1Q6\"></span></div>11-12.1</div></div><div class=\"caniuse_column__c5s8c\"></div><div class=\"caniuse_column__c5s8c\"><div class=\"caniuse_cell__JKZsr caniuse_flag-a__2KAGe\"><div class=\"caniuse_cellDetails__3eKIs\"><span class=\"caniuse_notes__1q1Q6\"></span></div>2.1-2.2</div><div class=\"caniuse_cell__JKZsr caniuse_flag-a__2KAGe\"><div class=\"caniuse_cellDetails__3eKIs\"><span class=\"caniuse_notes__1q1Q6\"><span class=\"caniuse_note__3w-xw\">1</span></span></div>2.3</div><div class=\"caniuse_cell__JKZsr caniuse_flag-a__2KAGe\"><div class=\"caniuse_cellDetails__3eKIs\"><span class=\"caniuse_notes__1q1Q6\"></span></div>3-4.3</div><div class=\"caniuse_cell__JKZsr caniuse_flag-y__2oU3A\"><div class=\"caniuse_cellDetails__3eKIs\"><span class=\"caniuse_notes__1q1Q6\"></span></div>4.4-4.4.4</div></div><div class=\"caniuse_column__c5s8c\"><div class=\"caniuse_cell__JKZsr caniuse_flag-y__2oU3A\"><div class=\"caniuse_cellDetails__3eKIs\"><span class=\"caniuse_notes__1q1Q6\"></span></div>4-12.0</div></div><div class=\"caniuse_column__c5s8c\"></div></div><div class=\"caniuse_tableBody__1Qpcb caniuse_tableBodyCurrent__1gt_O\"><div class=\"caniuse_column__c5s8c\"><div class=\"caniuse_cell__JKZsr caniuse_flag-y__2oU3A\"><div class=\"caniuse_cellDetails__3eKIs\"><span class=\"caniuse_notes__1q1Q6\"></span></div>11</div></div><div class=\"caniuse_column__c5s8c\"><div class=\"caniuse_cell__JKZsr caniuse_flag-y__2oU3A\"><div class=\"caniuse_cellDetails__3eKIs\"><span class=\"caniuse_notes__1q1Q6\"></span></div>88</div></div><div class=\"caniuse_column__c5s8c\"><div class=\"caniuse_cell__JKZsr caniuse_flag-y__2oU3A\"><div class=\"caniuse_cellDetails__3eKIs\"><span class=\"caniuse_notes__1q1Q6\"></span></div>85</div></div><div class=\"caniuse_column__c5s8c\"><div class=\"caniuse_cell__JKZsr caniuse_flag-y__2oU3A\"><div class=\"caniuse_cellDetails__3eKIs\"><span class=\"caniuse_notes__1q1Q6\"></span></div>88</div></div><div class=\"caniuse_column__c5s8c\"><div class=\"caniuse_cell__JKZsr caniuse_flag-y__2oU3A\"><div class=\"caniuse_cellDetails__3eKIs\"><span class=\"caniuse_notes__1q1Q6\"></span></div>14</div></div><div class=\"caniuse_column__c5s8c\"><div class=\"caniuse_cell__JKZsr caniuse_flag-y__2oU3A\"><div class=\"caniuse_cellDetails__3eKIs\"><span class=\"caniuse_notes__1q1Q6\"></span></div>73</div></div><div class=\"caniuse_column__c5s8c\"><div class=\"caniuse_cell__JKZsr caniuse_flag-a__2KAGe\"><div class=\"caniuse_cellDetails__3eKIs\"><span class=\"caniuse_notes__1q1Q6\"><span class=\"caniuse_note__3w-xw\">2</span></span></div>85</div></div><div class=\"caniuse_column__c5s8c\"><div class=\"caniuse_cell__JKZsr caniuse_flag-y__2oU3A\"><div class=\"caniuse_cellDetails__3eKIs\"><span class=\"caniuse_notes__1q1Q6\"></span></div>88</div></div><div class=\"caniuse_column__c5s8c\"><div class=\"caniuse_cell__JKZsr caniuse_flag-y__2oU3A\"><div class=\"caniuse_cellDetails__3eKIs\"><span class=\"caniuse_notes__1q1Q6\"></span></div>14.0-14.4</div></div><div class=\"caniuse_column__c5s8c\"><div class=\"caniuse_cell__JKZsr caniuse_flag-y__2oU3A\"><div class=\"caniuse_cellDetails__3eKIs\"><span class=\"caniuse_notes__1q1Q6\"></span></div>59</div></div><div class=\"caniuse_column__c5s8c\"><div class=\"caniuse_cell__JKZsr caniuse_flag-n__1fo0e\"><div class=\"caniuse_cellDetails__3eKIs\"><span class=\"caniuse_notes__1q1Q6\"></span></div>all</div></div><div class=\"caniuse_column__c5s8c\"><div class=\"caniuse_cell__JKZsr caniuse_flag-y__2oU3A\"><div class=\"caniuse_cellDetails__3eKIs\"><span class=\"caniuse_notes__1q1Q6\"></span></div>81</div></div><div class=\"caniuse_column__c5s8c\"><div class=\"caniuse_cell__JKZsr caniuse_flag-y__2oU3A\"><div class=\"caniuse_cellDetails__3eKIs\"><span class=\"caniuse_notes__1q1Q6\"></span></div>13.0</div></div><div class=\"caniuse_column__c5s8c\"><div class=\"caniuse_cell__JKZsr caniuse_flag-a__2KAGe\"><div class=\"caniuse_cellDetails__3eKIs\"><span class=\"caniuse_notes__1q1Q6\"></span></div>12.12</div></div></div><div class=\"caniuse_tableBody__1Qpcb\"><div class=\"caniuse_column__c5s8c\"></div><div class=\"caniuse_column__c5s8c\"></div><div class=\"caniuse_column__c5s8c\"><div class=\"caniuse_cell__JKZsr caniuse_flag-y__2oU3A\"><div class=\"caniuse_cellDetails__3eKIs\"><span class=\"caniuse_notes__1q1Q6\"></span></div>86-87</div></div><div class=\"caniuse_column__c5s8c\"><div class=\"caniuse_cell__JKZsr caniuse_flag-y__2oU3A\"><div class=\"caniuse_cellDetails__3eKIs\"><span class=\"caniuse_notes__1q1Q6\"></span></div>89-91</div></div><div class=\"caniuse_column__c5s8c\"><div class=\"caniuse_cell__JKZsr caniuse_flag-y__2oU3A\"><div class=\"caniuse_cellDetails__3eKIs\"><span class=\"caniuse_notes__1q1Q6\"></span></div>TP</div></div><div class=\"caniuse_column__c5s8c\"></div><div class=\"caniuse_column__c5s8c\"></div><div class=\"caniuse_column__c5s8c\"></div><div class=\"caniuse_column__c5s8c\"></div><div class=\"caniuse_column__c5s8c\"></div><div class=\"caniuse_column__c5s8c\"></div><div class=\"caniuse_column__c5s8c\"></div><div class=\"caniuse_column__c5s8c\"></div><div class=\"caniuse_column__c5s8c\"></div></div></div><div class=\"caniuse_legendAndNotes__OLmrF\"><div class=\"caniuse_legend__22Qq3\"><div class=\"caniuse_legendItem__gj1r_ caniuse_flag-y__2oU3A\">supported</div><div class=\"caniuse_legendItem__gj1r_ caniuse_flag-n__1fo0e\">unsupported</div><div class=\"caniuse_legendItem__gj1r_ caniuse_flag-a__2KAGe\">partial</div><div class=\"caniuse_legendItem__gj1r_ caniuse_flag-u__2eqhH\">unknown</div><div class=\"caniuse_legendItem__gj1r_ caniuse_flag-p__2XKIQ\">-prefixed-</div><div class=\"caniuse_legendItem__gj1r_ caniuse_flag-d__tmfZZ\">⚑ disabled</div></div><button type=\"button\" class=\"caniuse_notesToggle__1fDzM\">Show<!-- --> <!-- -->2 notes</button></div></section><h2 class=\"heading_container__2UElk\"><a class=\"heading_anchor__PWj4r\" id=\"conclusion\"></a><a class=\"heading_link__1aoFY\" href=\"#conclusion\">Conclusion</a></h2><p>Hopefully this post made it a little bit easier to understand how to convert\n.gif files to .webm or .mp4 using <code>ffmpeg</code>. It a powerful tool that can help us\noptimize our usage of animated media on the web. It is definitely worth looking\ninto if you run a website that displays lots of gifs.</p><p>Until next time :)</p><p>👋</p>","scope":{"title":"Converting .gif to web-safe video formats using ffmpeg","description":"This post shows how to convert .gif images to web-safe video formats using ffmpeg cli. These formats produce smaller files which means less data to load!","published":"2021-02-14T18:30:00Z"}},"slug":"converting-gif-to-web-safe-video-formats-using-ffmpeg"},"__N_SSG":true}